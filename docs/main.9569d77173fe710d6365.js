(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.r(e),n.d(e,"Component",function(){return o}),n.d(e,"ComponentContainer",function(){return u}),n.d(e,"Provider",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.__assign)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.__values)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.__read)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var t;return Object(r.__generator)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.__spreadArray)(Object(r.__spreadArray)([],Object(r.__read)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.__read)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=Object(r.__values)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var f=Object(r.__read)(h.value,2),d=f[1];u===this.normalizeInstanceIdentifier(f[0])&&d.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(c,u),c},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var o=Object(r.__values)(this.onInitCallbacks),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e=n("zIRd"),r=n("/6Yf"),i=n("qOnz"),o=n("mrSG"),s=n("q/0M"),a="";function u(t){a=t}var c,l=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(i.stringify)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(i.jsonEval)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),h=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(i.contains)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l(e)}}catch(n){}return new h},d=f("localStorage"),p=f("sessionStorage"),g=new s.Logger("@firebase/database"),v=(c=1,function(){return c++}),m=function(t){var e=Object(i.stringToByteArray)(t),n=new i.Sha1;n.update(e);var r=n.digest();return i.base64.encodeByteArray(r)},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var o=t[r];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?n+=y.apply(null,o):n+="object"==typeof o?Object(i.stringify)(o):o,n+=" "}return n},b=null,_=!0,w=function(t,e){Object(i.assert)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(g.logLevel=s.LogLevel.VERBOSE,b=g.log.bind(g),e&&p.set("logging_enabled",!0)):"function"==typeof t?b=t:(b=null,p.remove("logging_enabled"))},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===b&&!0===p.get("logging_enabled")&&w(!0)),b){var n=y.apply(null,t);b(n)}},T=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];I.apply(void 0,Object(o.__spreadArray)([t],Object(o.__read)(e)))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(o.__spreadArray)([],Object(o.__read)(t)));g.error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(o.__spreadArray)([],Object(o.__read)(t)));throw g.error(n),new Error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(o.__spreadArray)([],Object(o.__read)(t)));g.warn(n)},S=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},k="[MIN_NAME]",A="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===k||e===A)return-1;if(e===k||t===A)return 1;var n=F(t),r=F(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},N=function(t,e){return t===e?0:t<e?-1:1},j=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(i.stringify)(e))},P=function(t){if("object"!=typeof t||null===t)return Object(i.stringify)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",o=0;o<e.length;o++)0!==o&&(r+=","),r+=Object(i.stringify)(e[o]),r+=":",r+=P(t[e[o]]);return r+"}"},R=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function D(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var M=function(t){var e,n,r,o,s;Object(i.assert)(!S(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},L=new RegExp("^-?(0*)\\d{1,10}$"),F=function(t){if(L.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},U=function(t){try{t()}catch(e){setTimeout(function(){throw C("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},V=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},q=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(n,r){setTimeout(function(){e.appCheck?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){C('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),B=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(I("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):new Promise(function(n,r){setTimeout(function(){e.auth_?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)})},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';C(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),H=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),z=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,K="websocket",W="long_polling",G=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=d.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&d.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function $(t,e,n){var r;if(Object(i.assert)("string"==typeof e,"typeof type must == string"),Object(i.assert)("object"==typeof n,"typeof params must == object"),e===K)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==W)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var o=[];return D(n,function(t,e){o.push(t+"="+e)}),r+o.join("&")}var Q=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(i.contains)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(i.deepCopy)(this.counters_)},t}(),Y={},X={};function J(t){var e=t.toString();return Y[e]||(Y[e]=new Q),Y[e]}var Z=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&U(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),tt="start",et="close",nt=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=T(t),this.stats_=J(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),$(e,W,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Z(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(i.isNodeSdk)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new rt(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.__read)(t,5),i=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===tt)n.id=s,n.password=a;else{if(i!==et)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.__read)(t,2),i=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&z.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(i.isNodeSdk)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(i.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(i.base64Encode)(e),r=R(n,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(i.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(i.stringify)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),rt=function(){function t(e,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(i.isNodeSdk)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=v(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){I("frame writing exception"),u.stack&&I(u.stack),I(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||I("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(i.isNodeSdk)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){I("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),it=null;"undefined"!=typeof MozWebSocket?it=MozWebSocket:"undefined"!=typeof WebSocket&&(it=WebSocket);var ot=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=T(this.connId),this.stats_=J(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var o={v:"5"};return!Object(i.isNodeSdk)()&&"undefined"!=typeof location&&location.hostname&&z.test(location.hostname)&&(o.r="f"),e&&(o.s=e),n&&(o.ls=n),r&&(o.ac=r),$(t,K,o)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,d.set("previous_websocket_failure",!0);try{if(Object(i.isNodeSdk)()){var r={headers:{"User-Agent":"Firebase/5/"+a+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?r.headers.Authorization=this.authToken||"":r.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var o=process.env,s=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new it(this.connURL,[],r)}else this.mySock=new it(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==it&&!t.forceDisallow_},t.previouslyFailed=function(){return d.isInMemoryStorage||!0===d.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){d.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(i.jsonEval)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(i.assert)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(i.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=R(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),st=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[nt,ot]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=ot&&ot.isAvailable(),s=i&&!ot.previouslyFailed();if(e.webSocketOnly&&(i||C("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ot];else{var a=this.transports_=[];try{for(var u=Object(o.__values)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),at=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=T("c:"+this.id+":"),this.transportManager_=new st(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=V(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=j("t",t),n=j("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=j("t",t),n=j("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=j("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&C("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),V(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(d.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ut=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ct=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(i.assert)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(o.__spreadArray)([],Object(o.__read)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(i.assert)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),lt=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(i.isMobileCordova)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(o.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.assert)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ct),ht=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function ft(){return new ht("")}function dt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pt(t){return t.pieces_.length-t.pieceNum_}function gt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new ht(t.pieces_,e)}function vt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function mt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function yt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ht(e,0)}function bt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ht)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ht(n,0)}function _t(t){return t.pieceNum_>=t.pieces_.length}function wt(t,e){var n=dt(t),r=dt(e);if(null===n)return e;if(n===r)return wt(gt(t),gt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function It(t,e){for(var n=mt(t,0),r=mt(e,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Tt(t,e){if(pt(t)!==pt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Et(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(pt(t)>pt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Ot=function(){return function(t,e){this.errorPrefix_=e,this.parts_=mt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(i.stringLength)(this.parts_[n]);Ct(this)}}();function Ct(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+St(t))}function St(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var kt,At,xt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(o.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.assert)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ct),Nt=1e3,jt=function(t){function e(n,r,o,s,a,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=o,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=T("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Nt,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(i.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return xt.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&lt.getInstance().on("online",h.onOnline_,h),h}return Object(o.__extends)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,o={r:r,a:t,b:e};this.log_(Object(i.stringify)(o)),Object(i.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new i.Deferred,r={p:t._path.toString(),q:t._queryObject},o={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&o===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var o=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),Object(i.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(i.assert)(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(o,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(i.contains)(t,"w")){var n=Object(i.safeGet)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',o=e._path.toString();C("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(i.isAdmin)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(i.isValidFormat)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(i.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(i.stringify)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(i.stringify)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(i.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Nt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Nt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Nt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Object(o.__awaiter)(this,void 0,void 0,function(){var t,n,r,s,a,u,c,l,h,f,d,p,g,v=this;return Object(o.__generator)(this,function(m){switch(m.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){Object(i.assert)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,m.label=1;case 1:return m.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return f=o.__read.apply(void 0,[m.sent(),2]),d=f[0],p=f[1],u?I("getToken() completed but was canceled"):(I("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,c=new at(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){C(t+" ("+v.repoInfo_.toString()+")"),v.interrupt("server_kill")},a)),[3,4];case 3:return g=m.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&C(g),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){I("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){I("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(i.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=Nt,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return P(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new ht(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){I("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){I("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Object(o.__values)(this.listens.values()),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,Object(o.__values)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(i.isNodeSdk)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+a.replace(/\./g,"-")]=1,Object(i.isMobileCordova)()?t["framework.cordova"]=1:Object(i.isReactNative)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=lt.getInstance().currentlyOnline();return Object(i.isEmpty)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ut),Pt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Rt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Pt(k,t),r=new Pt(k,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Pt.MIN},t}(),Dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return kt},set:function(t){kt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(i.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return new Pt(A,kt)},e.prototype.makePost=function(t,e){return Object(i.assert)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Pt(t,kt)},e.prototype.toString=function(){return".key"},e}(Rt),Mt=new Dt,Lt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ft=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Vt.EMPTY_NODE,this.right=null!=o?o:Vt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Vt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Vt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ut=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ft(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Vt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Lt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Lt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Lt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Lt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ut,t}();function qt(t,e){return x(t.name,e.name)}function Bt(t,e){return x(t,e)}var Ht,zt,Kt,Wt,Gt,$t=function(t){return"number"==typeof t?"number:"+M(t):"string:"+t},Qt=function(t){if(t.isLeafNode()){var e=t.val();Object(i.assert)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(i.contains)(e,".sv"),"Priority must be a string or number.")}else Object(i.assert)(t===At||t.isEmpty(),"priority of unexpected type.");Object(i.assert)(t===At||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Yt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(i.assert)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Qt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ht},set:function(t){Ht=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return _t(e)?this:".priority"===dt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=dt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(i.assert)(".priority"!==r||1===pt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(gt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+$t(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?M(this.value_):this.value_,this.lazyHash_=m(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(i.assert)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(i.assert)(o>=0,"Unknown leaf type: "+n),Object(i.assert)(s>=0,"Unknown leaf type: "+r),o===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Xt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return new Pt(A,new Yt("[PRIORITY-POST]",Kt))},e.prototype.makePost=function(t,e){var n=zt(t);return new Pt(e,new Yt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Rt)),Jt=Math.log(2),Zt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Jt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),te=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Ft(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Ft.BLACK):(a(h,Ft.BLACK),a(h,Ft.RED))}return o}(new Zt(t.length));return new Vt(r||e,o)},ee={},ne=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(i.assert)(ee&&Xt,"ChildrenNode.ts has not been loaded"),Wt=Wt||new t({".priority":ee},{".priority":Xt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(i.safeGet)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vt?e:null},t.prototype.hasIndex=function(t){return Object(i.contains)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(i.assert)(e!==Mt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Pt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?te(s,e.getCompare()):ee;var l=e.toString(),h=Object(o.__assign)({},this.indexSet_);h[l]=e;var f=Object(o.__assign)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(i.map)(this.indexes_,function(t,o){var s=Object(i.safeGet)(r.indexSet_,o);if(Object(i.assert)(s,"Missing index implementation for "+o),t===ee){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Pt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),te(a,s.getCompare())}return ee}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Pt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(i.map)(this.indexes_,function(t){if(t===ee)return t;var r=n.get(e.name);return r?t.remove(new Pt(e.name,r)):t}),this.indexSet_)},t}(),re=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Qt(this.priorityNode_),this.children_.isEmpty()&&Object(i.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Gt||(Gt=new t(new Vt(Bt),null,ne.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Gt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Gt:e},t.prototype.getChild=function(t){var e=dt(t);return null===e?this:this.getImmediateChild(e).getChild(gt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(i.assert)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Pt(e,n),o=void 0,s=void 0;n.isEmpty()?(o=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=o.isEmpty()?Gt:this.priorityNode_;return new t(o,a,s)},t.prototype.updateChild=function(t,e){var n=dt(t);if(null===n)return e;Object(i.assert)(".priority"!==dt(t)||1===pt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(gt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Xt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+$t(this.getPriority().val())+":"),this.forEachChild(Xt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":m(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Pt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Pt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Pt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Pt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Pt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ie?-1:0},t.prototype.withIndex=function(e){if(e===Mt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Mt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Xt),r=e.getIterator(Xt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Mt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ie=new(function(t){function e(){return t.call(this,new Vt(Bt),re.EMPTY_NODE,ne.Default)||this}return Object(o.__extends)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return re.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(re));function oe(t,e){if(void 0===e&&(e=null),null===t)return re.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(i.assert)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Yt(t,oe(e));if(t instanceof Array){var n=re.EMPTY_NODE;return D(t,function(e,r){if(Object(i.contains)(t,e)&&"."!==e.substring(0,1)){var o=oe(r);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(e,o))}}),n.updatePriority(oe(e))}var r=[],o=!1;if(D(t,function(t,e){if("."!==t.substring(0,1)){var n=oe(e);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new Pt(t,n)))}}),0===r.length)return re.EMPTY_NODE;var s=te(r,qt,function(t){return t.name},Bt);if(o){var a=te(r,Xt.getCompare());return new re(s,oe(e),new ne({".priority":a},{".priority":Xt}))}return new re(s,oe(e),ne.Default)}Object.defineProperties(Pt,{MIN:{value:new Pt(k,re.EMPTY_NODE)},MAX:{value:new Pt(A,ie)}}),Dt.__EMPTY_NODE=re.EMPTY_NODE,Yt.__childrenNodeConstructor=re,At=ie,Kt=ie,zt=oe;var se,ae,ue=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(i.assert)(!_t(e)&&".priority"!==dt(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(o.__extends)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=oe(t),r=re.EMPTY_NODE.updateChild(this.indexPath_,n);return new Pt(e,r)},e.prototype.maxPost=function(){var t=re.EMPTY_NODE.updateChild(this.indexPath_,ie);return new Pt(A,t)},e.prototype.toString=function(){return mt(this.indexPath_,0).join("/")},e}(Rt),ce=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return Pt.MAX},e.prototype.makePost=function(t,e){var n=oe(t);return new Pt(e,n)},e.prototype.toString=function(){return".value"},e}(Rt)),le="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",he=(se=0,ae=[],function(t){var e,n=t===se;se=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=le.charAt(t%64),t=Math.floor(t/64);Object(i.assert)(0===t,"Cannot push at time == 0");var o=r.join("");if(n){for(e=11;e>=0&&63===ae[e];e--)ae[e]=0;ae[e]++}else for(e=0;e<12;e++)ae[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)o+=le.charAt(ae[e]);return Object(i.assert)(20===o.length,"nextPushId: Length should be 20."),o}),fe=function(t){if("2147483647"===t)return"-";var e=F(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return A;var o=le.charAt(le.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},de=function(t){if("-2147483648"===t)return k;var e=F(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=le.charAt(le.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function pe(t){return{type:"value",snapshotNode:t}}function ge(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ve(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function me(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ye=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,o,s){Object(i.assert)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(ve(e,a)):Object(i.assert)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ge(e,n)):s.trackChildChange(me(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Xt,function(t,r){e.hasChild(t)||n.trackChildChange(ve(t,r))}),e.isLeafNode()||e.forEachChild(Xt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(me(e,r,i))}else n.trackChildChange(ge(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?re.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(e){this.indexedFilter_=new ye(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Pt(e,n))||(n=re.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=re.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(re.EMPTY_NODE);var i=this;return e.forEachChild(Xt,function(t,e){i.matches(new Pt(t,e))||(r=r.updateImmediateChild(t,re.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),_e=function(){function t(t){this.rangedFilter_=new be(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Pt(e,n))||(n=re.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=re.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=re.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(re.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,re.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,o){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(i.assert)(u.numChildren()===this.limit_,"");var c=new Pt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=o&&o.trackChildChange(me(e,n,f)),u.updateImmediateChild(e,n);null!=o&&o.trackChildChange(ve(e,f));var g=u.updateImmediateChild(e,re.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=o&&o.trackChildChange(ge(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=o&&(o.trackChildChange(ve(l.name,l.node)),o.trackChildChange(ge(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,re.EMPTY_NODE)):t},t}(),we=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(i.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(i.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:k},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(i.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(i.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:A},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(i.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Xt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Ie(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Te(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ee(t,e){var n=t.copy();return n.index_=e,n}function Oe(t){var e,n={};return t.isDefault()||(t.index_===Xt?e="$priority":t.index_===ce?e="$value":t.index_===Mt?e="$key":(Object(i.assert)(t.index_ instanceof ue,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(i.stringify)(e),t.startSet_&&(n.startAt=Object(i.stringify)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(i.stringify)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(i.stringify)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(i.stringify)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Ce(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Xt&&(e.i=t.index_.toString()),e}var Se=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=T("p:rest:"),o.listens_={},o}return Object(o.__extends)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(i.assert)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,o){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Oe(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(i.safeGet)(s.listens_,u)===c&&o(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Oe(t._queryParams),r=t._path.toString(),o=new i.Deferred;return this.restRequest_(r+".json",n,function(t,n){var i=n;404===t&&(i=null,t=null),null===t?(e.onDataUpdate_(r,i,!1,null),o.resolve(i)):o.reject(new Error(i))}),o.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(s){var a=Object(o.__read)(s,2),u=a[0],c=a[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(i.querystring)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=Object(i.jsonEval)(h.responseText)}catch(e){C("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&C("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},e}(ut),ke=function(){function t(){this.rootNode_=re.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Ae(){return{value:null,children:new Map}}function xe(t,e,n){if(_t(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=dt(e);t.children.has(r)||t.children.set(r,Ae()),xe(t.children.get(r),e=gt(e),n)}}function Ne(t,e){if(_t(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Xt,function(e,n){xe(t,new ht(e),n)}),Ne(t,e)}if(t.children.size>0){var r=dt(e);return e=gt(e),t.children.has(r)&&Ne(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function je(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){je(r,new ht(e.toString()+"/"+t),n)})}var Pe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(o.__assign)({},t);return this.last_&&D(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Re=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Pe(t);var n=1e4+2e4*Math.random();V(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;D(e,function(e,o){o>0&&Object(i.contains)(t.statsToReport_,e)&&(n[e]=o,r=!0)}),r&&this.server_.reportStats(n),V(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),De=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Me(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Le,Fe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=De.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(_t(this.path)){if(null!=this.affectedTree.value)return Object(i.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ht(e));return new t(ft(),n,this.revert)}return Object(i.assert)(dt(this.path)===e,"operationForChild called for unrelated child."),new t(gt(this.path),this.affectedTree,this.revert)},t}(),Ue=function(){function t(t,e){this.source=t,this.path=e,this.type=De.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,ft()):new t(this.source,gt(this.path))},t}(),Ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=De.OVERWRITE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,ft(),this.snap.getImmediateChild(e)):new t(this.source,gt(this.path),this.snap)},t}(),qe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=De.MERGE}return t.prototype.operationForChild=function(e){if(_t(this.path)){var n=this.children.subtree(new ht(e));return n.isEmpty()?null:n.value?new Ve(this.source,ft(),n.value):new t(this.source,ft(),n)}return Object(i.assert)(dt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,gt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Be=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(_t(t))return this.isFullyInitialized()&&!this.filtered_;var e=dt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),He=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function ze(t,e,n,r,o,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(i.assertionError)("Should only compare child_ events.");var r=new Pt(e.childName,e.snapshotNode),o=new Pt(n.childName,n.snapshotNode);return t.index_.compare(r,o)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);o.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function Ke(t,e){return{eventCache:t,serverCache:e}}function We(t,e,n,r){return Ke(new Be(e,n,r),t.serverCache)}function Ge(t,e,n,r){return Ke(t.eventCache,new Be(e,n,r))}function $e(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qe(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ye=function(){function t(t,e){void 0===e&&(Le||(Le=new Vt(N)),e=Le),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return D(e,function(t,e){n=n.set(new ht(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ft(),value:this.value};if(_t(t))return null;var n=dt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(gt(t),e);return null!=i?{path:bt(new ht(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(_t(e))return this;var n=dt(e),r=this.children.get(n);return null!==r?r.subtree(gt(e)):new t(null)},t.prototype.set=function(e,n){if(_t(e))return new t(n,this.children);var r=dt(e),i=(this.children.get(r)||new t(null)).set(gt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(_t(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=dt(e),r=this.children.get(n);if(r){var i=r.remove(gt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(_t(t))return this.value;var e=dt(t),n=this.children.get(e);return n?n.get(gt(t)):null},t.prototype.setTree=function(e,n){if(_t(e))return n;var r,i=dt(e),o=(this.children.get(i)||new t(null)).setTree(gt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(ft(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(bt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ft(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(_t(t))return null;var i=dt(t),o=this.children.get(i);return o?o.findOnPath_(gt(t),bt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ft(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(_t(e))return this;this.value&&r(n,this.value);var i=dt(e),o=this.children.get(i);return o?o.foreachOnPath_(gt(e),bt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(ft(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(bt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Xe=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ye(null))},t}();function Je(t,e,n){if(_t(e))return new Xe(new Ye(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=wt(i,e);return o=o.updateChild(s,n),new Xe(t.writeTree_.set(i,o))}var a=new Ye(n),u=t.writeTree_.setTree(e,a);return new Xe(u)}function Ze(t,e,n){var r=t;return D(n,function(t,n){r=Je(r,bt(e,t),n)}),r}function tn(t,e){if(_t(e))return Xe.empty();var n=t.writeTree_.setTree(e,new Ye(null));return new Xe(n)}function en(t,e){return null!=nn(t,e)}function nn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(wt(n.path,e)):null}function rn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Xt,function(t,n){e.push(new Pt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Pt(t,n.value))}),e}function on(t,e){if(_t(e))return t;var n=nn(t,e);return new Xe(null!=n?new Ye(n):t.writeTree_.subtree(e))}function sn(t){return t.writeTree_.isEmpty()}function an(t,e){return un(ft(),t.writeTree_,e)}function un(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,o){".priority"===e?(Object(i.assert)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=un(bt(t,e),o,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(bt(t,".priority"),r)),n}function cn(t,e){return _n(e,t)}function ln(t,e){if(t.snap)return Et(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Et(bt(t.path,n),e))return!0;return!1}function hn(t){return t.visible}function fn(t,e,n){for(var r=Xe.empty(),o=0;o<t.length;++o){var s=t[o];if(e(s)){var a=s.path,u=void 0;if(s.snap)Et(n,a)?r=Je(r,u=wt(n,a),s.snap):Et(a,n)&&(u=wt(a,n),r=Je(r,ft(),s.snap.getChild(u)));else{if(!s.children)throw Object(i.assertionError)("WriteRecord should have .snap or .children");if(Et(n,a))r=Ze(r,u=wt(n,a),s.children);else if(Et(a,n))if(_t(u=wt(a,n)))r=Ze(r,ft(),s.children);else{var c=Object(i.safeGet)(s.children,dt(u));if(c){var l=c.getChild(gt(u));r=Je(r,ft(),l)}}}}}return r}function dn(t,e,n,r,i){if(r||i){var o=on(t.visibleWrites,e);return!i&&sn(o)?n:i||null!=n||en(o,ft())?an(fn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Et(t.path,e)||Et(e,t.path))},e),n||re.EMPTY_NODE):null}var s=nn(t.visibleWrites,e);if(null!=s)return s;var a=on(t.visibleWrites,e);return sn(a)?n:null!=n||en(a,ft())?an(a,n||re.EMPTY_NODE):null}function pn(t,e,n,r){return dn(t.writeTree,t.treePath,e,n,r)}function gn(t,e){return function(t,e,n){var r=re.EMPTY_NODE,i=nn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=on(t.visibleWrites,e);return n.forEachChild(Xt,function(t,e){var n=an(on(o,new ht(t)),e);r=r.updateImmediateChild(t,n)}),rn(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return rn(on(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function vn(t,e,n,r){return function(t,e,n,r,o){Object(i.assert)(r||o,"Either existingEventSnap or existingServerSnap must exist");var s=bt(e,n);if(en(t.visibleWrites,s))return null;var a=on(t.visibleWrites,s);return sn(a)?o.getChild(n):an(a,o.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function mn(t,e){return function(t,e){return nn(t.visibleWrites,e)}(t.writeTree,bt(t.treePath,e))}function yn(t,e,n){return function(t,e,n,r){var i=bt(e,n),o=nn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?an(on(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function bn(t,e){return _n(bt(t.treePath,e),t.writeTree)}function _n(t,e){return{treePath:t,writeTree:e}}var wn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(i.assert)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(i.assert)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(n,me(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(n,ve(n,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(n,ge(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw Object(i.assertionError)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,me(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),In=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Tn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Be(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Qe(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=on(t.visibleWrites,e),c=nn(u,ft());if(null!=c)a=c;else{if(null==n)return[];a=an(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),d=f.getNext();d&&l.length<1;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function En(t,e,n,r,o,s){var a=e.eventCache;if(null!=mn(r,n))return e;var u=void 0,c=void 0;if(_t(n))if(Object(i.assert)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Qe(e),h=gn(r,l instanceof re?l:re.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var f=pn(r,Qe(e));u=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{var d=dt(n);if(".priority"===d){Object(i.assert)(1===pt(n),"Can't have a priority with additional path components");var p=a.getNode(),g=vn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var v=gt(n),m=void 0;if(a.isCompleteForChild(d)){c=e.serverCache.getNode();var y=vn(r,n,a.getNode(),c);m=null!=y?a.getNode().getImmediateChild(d).updateChild(v,y):a.getNode().getImmediateChild(d)}else m=yn(r,d,e.serverCache);u=null!=m?t.filter.updateChild(a.getNode(),d,m,v,o,s):a.getNode()}}return We(e,u,a.isFullyInitialized()||_t(n),t.filter.filtersNodes())}function On(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(_t(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=dt(n);if(!c.isCompleteForPath(n)&&pt(n)>1)return e;var d=gt(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,In,null)}var g=Ge(e,u,c.isFullyInitialized()||_t(n),l.filtersNodes());return En(t,g,n,i,new Tn(i,g,o),a)}function Cn(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new Tn(i,e,o);if(_t(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=We(e,u,!0,t.filter.filtersNodes());else{var h=dt(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=We(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=gt(n),d=c.getNode().getImmediateChild(h),p=void 0;if(_t(f))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===vt(f)&&g.getChild(yt(f)).isEmpty()?g:g.updateChild(f,r):re.EMPTY_NODE}a=d.equals(p)?e:We(e,t.filter.updateChild(c.getNode(),h,p,f,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function Sn(t,e){return t.eventCache.isCompleteForChild(e)}function kn(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function An(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=_t(n)?r:new Ye(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=kn(0,e.serverCache.getNode().getImmediateChild(n),r);c=On(t,c,new ht(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=kn(0,e.serverCache.getNode().getImmediateChild(n),r);c=On(t,c,new ht(n),h,i,o,s,a)}}),c}var xn,Nn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new ye(r.getIndex()),o=(n=r).loadsAllData()?new ye(n.getIndex()):n.hasLimit()?new _e(n):new be(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(re.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(re.EMPTY_NODE,a.getNode(),null),l=new Be(u,s.isFullyInitialized(),i.filtersNodes()),h=new Be(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ke(h,l),this.eventGenerator_=new He(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function jn(t,e){var n=Qe(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!_t(e)&&!n.getImmediateChild(dt(e)).isEmpty())?n.getChild(e):null}function Pn(t){return 0===t.eventRegistrations_.length}function Rn(t,e,n){var r=[];if(n){Object(i.assert)(null==e,"A cancel should cancel all event registrations.");var o=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,o);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Dn(t,e,n,r){e.type===De.MERGE&&null!==e.source.queryId&&(Object(i.assert)(Qe(t.viewCache_),"We should always have a full cache before handling merges"),Object(i.assert)($e(t.viewCache_),"Missing event cache, even though we have a server cache"));var o,s,a=t.viewCache_,u=function(t,e,n,r,o){var s,a,u=new wn;if(n.type===De.OVERWRITE){var c=n;c.source.fromUser?s=Cn(t,e,c.path,c.snap,r,o,u):(Object(i.assert)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!_t(c.path),s=On(t,e,c.path,c.snap,r,o,a,u))}else if(n.type===De.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=bt(n,r);Sn(e,dt(c))&&(a=Cn(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=bt(n,r);Sn(e,dt(c))||(a=Cn(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,o,u):(Object(i.assert)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=An(t,e,l.path,l.children,r,o,a,u))}else if(n.type===De.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,o,s){var a;if(null!=mn(r,n))return e;var u=new Tn(r,e,o),c=e.eventCache.getNode(),l=void 0;if(_t(n)||".priority"===dt(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=pn(r,Qe(e));else{var f=e.serverCache.getNode();Object(i.assert)(f instanceof re,"serverChildren would be complete if leaf node"),h=gn(r,f)}l=t.filter.updateFullNode(c,h=h,s)}else{var d=dt(n),p=yn(r,d,e.serverCache);null==p&&e.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?t.filter.updateChild(c,d,p,gt(n),u,s):e.eventCache.getNode().hasChild(d)?t.filter.updateChild(c,d,re.EMPTY_NODE,gt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=pn(r,Qe(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=mn(r,ft()),We(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,o,u):function(t,e,n,r,i,o,s){if(null!=mn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(_t(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return On(t,e,n,u.getNode().getChild(n),i,o,a,s);if(_t(n)){var c=new Ye(null);return u.getNode().forEachChild(Mt,function(t,e){c=c.set(new ht(t),e)}),An(t,e,n,c,i,o,a,s)}return e}var l=new Ye(null);return r.foreach(function(t,e){var r=bt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),An(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,o,u)}else{if(n.type!==De.LISTEN_COMPLETE)throw Object(i.assertionError)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return En(t,Ge(e,o.getNode(),o.isFullyInitialized()||_t(n),o.isFiltered()),n,r,In,i)}(t,e,n.path,r,u)}var f=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=$e(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pe($e(e)))}}(e,s,f),{viewCache:s,changes:f}}(t.processor_,a,e,n,r);return o=t.processor_,s=u.viewCache,Object(i.assert)(s.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Object(i.assert)(s.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Object(i.assert)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Mn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Mn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),ze(t,i,"child_removed",e,r,n),ze(t,i,"child_added",e,r,n),ze(t,i,"child_moved",o,r,n),ze(t,i,"child_changed",e,r,n),ze(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Ln,Fn=function(){return function(){this.views=new Map}}();function Un(t,e,n,r){var s,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(i.assert)(null!=c,"SyncTree gave us an op for an invalid query."),Dn(c,e,n,r)}var l=[];try{for(var h=Object(o.__values)(t.views.values()),f=h.next();!f.done;f=h.next())l=l.concat(Dn(c=f.value,e,n,r))}catch(d){s={error:d}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return l}function Vn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=pn(n,i?r:null),a=!1;s?a=!0:r instanceof re?(s=gn(n,r),a=!1):(s=re.EMPTY_NODE,a=!1);var u=Ke(new Be(s,a,!1),new Be(r,i,!1));return new Nn(e,u)}return o}function qn(t){var e,n,r=[];try{for(var i=Object(o.__values)(t.views.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Bn(t,e){var n,r,i=null;try{for(var s=Object(o.__values)(t.views.values()),a=s.next();!a.done;a=s.next())i=i||jn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function Hn(t,e){return e._queryParams.loadsAllData()?Wn(t):t.views.get(e._queryIdentifier)}function zn(t,e){return null!=Hn(t,e)}function Kn(t){return null!=Wn(t)}function Wn(t){var e,n;try{for(var r=Object(o.__values)(t.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.query._queryParams.loadsAllData())return s}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Gn=1,$n=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Ye(null),this.pendingWriteTree_={visibleWrites:Xe.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Qn(t,e,n,r,o){return function(t,e,n,r,o){Object(i.assert)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=Je(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,o),o?er(t,new Ve({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Yn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(i.assert)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var o=r.visible,s=!1,a=t.allWrites.length-1;o&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&ln(u,r.path)?o=!1:Et(r.path,u.path)&&(s=!0)),a--}return!!o&&(s?(function(t){t.visibleWrites=fn(t.allWrites,hn,ft()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=tn(t.visibleWrites,r.path):D(r.children,function(e){t.visibleWrites=tn(t.visibleWrites,bt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var o=new Ye(null);return null!=r.snap?o=o.set(ft(),!0):D(r.children,function(t){o=o.set(new ht(t),!0)}),er(t,new Fe(r.path,o,n))}return[]}function Xn(t,e,n){return er(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Jn(t,e,n,r){var s=e._path,a=t.syncPointTree_.get(s),u=[];if(a&&("default"===e._queryIdentifier||zn(a,e))){var c=function(t,e,n,r){var s,a,u=e._queryIdentifier,c=[],l=[],h=Kn(t);if("default"===u)try{for(var f=Object(o.__values)(t.views.entries()),d=f.next();!d.done;d=f.next()){var p,g=Object(o.__read)(d.value,2),v=g[0];l=l.concat(Rn(p=g[1],n,r)),Pn(p)&&(t.views.delete(v),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(m){s={error:m}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(s)throw s.error}}else(p=t.views.get(u))&&(l=l.concat(Rn(p,n,r)),Pn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Kn(t)&&c.push(new(Object(i.assert)(xn,"Reference.ts has not been loaded"),xn)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(s));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),f=t.syncPointTree_.findOnPath(s,function(t,e){return Kn(e)});if(h&&!f){var d=t.syncPointTree_.subtree(s);if(!d.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Kn(e))return[Wn(e)];var r=[];return e&&(r=qn(e)),D(n,function(t,e){r=r.concat(e)}),r})}(d),g=0;g<p.length;++g){var v=p[g],m=v.query,y=ir(t,v);t.listenProvider_.startListening(lr(m),or(t,m),y.hashFn,y.onComplete)}}!f&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(lr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(sr(e));t.listenProvider_.stopListening(lr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=sr(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Zn(t,e,n){var r=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=wt(t,r);o=o||Bn(e,n),s=s||Kn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Kn(u),o=o||Bn(u,ft())):(u=new Fn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=o?a=!0:(a=!1,o=re.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Bn(e,ft());n&&(o=o.updateImmediateChild(t,n))}));var c=zn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=sr(e);Object(i.assert)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Gn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var f=function(t,e,n,r,i,o){var s=Vn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Xt,function(t,e){r.push(ge(t,e))}),n.isFullyInitialized()&&r.push(pe(n.getNode())),Mn(t,r,n.getNode(),e)}(s,n)}(u,e,n,cn(t.pendingWriteTree_,r),o,a);if(!c&&!s){var d=Hn(u,e);f=f.concat(function(t,e,n){var r=e._path,o=or(t,e),s=ir(t,n),a=t.listenProvider_.startListening(lr(e),o,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(o)Object(i.assert)(!Kn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!_t(t)&&e&&Kn(e))return[Wn(e).query];var r=[];return e&&(r=r.concat(qn(e).map(function(t){return t.query}))),D(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(lr(h),or(t,h))}return a}(t,e,d))}return f}function tr(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Bn(n,wt(t,e));if(r)return r});return dn(r,e,i,n,!0)}function er(t,e){return nr(e,t.syncPointTree_,null,cn(t.pendingWriteTree_,ft()))}function nr(t,e,n,r){if(_t(t.path))return rr(t,e,n,r);var i=e.get(ft());null==n&&null!=i&&(n=Bn(i,ft()));var o=[],s=dt(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=bn(r,s);o=o.concat(nr(a,u,c,l))}return i&&(o=o.concat(Un(i,t,r,n))),o}function rr(t,e,n,r){var i=e.get(ft());null==n&&null!=i&&(n=Bn(i,ft()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=bn(r,e),u=t.operationForChild(e);u&&(o=o.concat(rr(u,i,s,a)))}),i&&(o=o.concat(Un(i,t,r,n))),o}function ir(t,e){var n=e.query,r=or(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||re.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ar(t,n);if(r){var i=ur(r),o=i.path,s=i.queryId,a=wt(o,e);return cr(t,o,new Ue(Me(s),a))}return[]}(t,n._path,r):function(t,e){return er(t,new Ue({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Jn(t,n,null,i)}}}function or(t,e){var n=sr(e);return t.queryToTagMap.get(n)}function sr(t){return t._path.toString()+"$"+t._queryIdentifier}function ar(t,e){return t.tagToQueryMap.get(e)}function ur(t){var e=t.indexOf("$");return Object(i.assert)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ht(t.substr(0,e))}}function cr(t,e,n){var r=t.syncPointTree_.get(e);return Object(i.assert)(r,"Missing sync point for query tag that we're tracking"),Un(r,n,cn(t.pendingWriteTree_,e),null)}function lr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(i.assert)(Ln,"Reference.ts has not been loaded"),Ln)(t._repo,t._path):t}var hr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),fr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=bt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return tr(this.syncTree_,this.path_)},t}(),dr=function(t,e,n){return t&&"object"==typeof t?(Object(i.assert)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?pr(t[".sv"],e,n):"object"==typeof t[".sv"]?gr(t[".sv"],e):void Object(i.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},pr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(i.assert)(!1,"Unexpected server value: "+t)}},gr=function(t,e,n){t.hasOwnProperty("increment")||Object(i.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(i.assert)(!1,"Unexpected increment value: "+r);var o=e.node();if(Object(i.assert)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var s=o.getValue();return"number"!=typeof s?r:s+r},vr=function(t,e,n,r){return yr(e,new fr(n,t),r)},mr=function(t,e,n){return yr(t,new hr(e),n)};function yr(t,e,n){var r,i=t.getPriority().val(),o=dr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=dr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Yt(a,oe(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Yt(o))),u.forEachChild(Xt,function(t,i){var o=yr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var br=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function _r(t,e){for(var n=e instanceof ht?e:new ht(e),r=t,o=dt(n);null!==o;){var s=Object(i.safeGet)(r.node.children,o)||{children:{},childCount:0};r=new br(o,r,s),o=dt(n=gt(n))}return r}function wr(t){return t.node.value}function Ir(t,e){t.node.value=e,Sr(t)}function Tr(t){return t.node.childCount>0}function Er(t,e){D(t.node.children,function(n,r){e(new br(n,t,r))})}function Or(t,e,n,r){n&&!r&&e(t),Er(t,function(t){Or(t,e,!0,r)}),n&&r&&e(t)}function Cr(t){return new ht(null===t.parent?t.name:Cr(t.parent)+"/"+t.name)}function Sr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===wr(t)&&!Tr(t)}(n),o=Object(i.contains)(t.node.children,e);r&&o?(delete t.node.children[e],t.node.childCount--,Sr(t)):r||o||(t.node.children[e]=n.node,t.node.childCount++,Sr(t))}(t.parent,t.name,t)}var kr=/[\[\].#$\/\u0000-\u001F\u007F]/,Ar=/[\[\].#$\u0000-\u001F\u007F]/,xr=10485760,Nr=function(t){return"string"==typeof t&&0!==t.length&&!kr.test(t)},jr=function(t){return"string"==typeof t&&0!==t.length&&!Ar.test(t)},Pr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!S(t)||t&&"object"==typeof t&&Object(i.contains)(t,".sv")},Rr=function(t,e,n,r){r&&void 0===e||Dr(Object(i.errorPrefix)(t,"value"),e,n)},Dr=function(t,e,n){var r=n instanceof ht?new Ot(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+St(r));if("function"==typeof e)throw new Error(t+"contains a function "+St(r)+" with contents = "+e.toString());if(S(e))throw new Error(t+"contains "+e.toString()+" "+St(r));if("string"==typeof e&&e.length>xr/3&&Object(i.stringLength)(e)>xr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+St(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var o=!1,s=!1;if(D(e,function(e,n){if(".value"===e)o=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Nr(e)))throw new Error(t+" contains an invalid key ("+e+") "+St(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(i.stringLength)(e),Ct(t)}(r,e),Dr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=Object(i.stringLength)(u),a.parts_.length>0&&(a.byteLength_-=1)}),o&&s)throw new Error(t+' contains ".value" child '+St(r)+" in addition to actual children.")}},Mr=function(t,e,n,r){if(!r||void 0!==e){var o=Object(i.errorPrefix)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");var s=[];D(e,function(t,e){var r=new ht(t);if(Dr(o,e,bt(n,r)),".priority"===vt(r)&&!Pr(e))throw new Error(o+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=mt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Nr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(It);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Et(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},Lr=function(t,e,n){if(!n||void 0!==e){if(S(e))throw new Error(Object(i.errorPrefix)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Pr(e))throw new Error(Object(i.errorPrefix)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Fr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(i.errorPrefix)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ur=function(t,e,n,r){if(!(r&&void 0===n||Nr(n)))throw new Error(Object(i.errorPrefix)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vr=function(t,e,n,r){if(!(r&&void 0===n||jr(n)))throw new Error(Object(i.errorPrefix)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qr=function(t,e){if(".info"===dt(e))throw new Error(t+" failed = Can't modify data under /.info/")},Br=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Nr(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),jr(t)}(n))throw new Error(Object(i.errorPrefix)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Hr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(i.errorPrefix)(t,e)+"must be a boolean.")},zr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Kr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Tt(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Wr(t,e,n){Kr(t,n),$r(t,function(t){return Tt(t,e)})}function Gr(t,e,n){Kr(t,n),$r(t,function(t){return Et(t,e)||Et(e,t)})}function $r(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Qr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Qr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();b&&I("event: "+n.toString()),U(r)}}}var Yr="repo_interrupt",Xr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ae(),this.transactionQueueTree_=new br,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Jr(t){var e=t.infoData_.getNode(new ht(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Zr(t){return(e=(e={timestamp:Jr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ti(t,e,n,r,o){t.dataUpdateCount++;var s=new ht(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(o)if(r){var u=Object(i.map)(n,function(t){return oe(t)});a=function(t,e,n,r){var i=ar(t,r);if(i){var o=ur(i),s=o.path,a=o.queryId,u=wt(s,e),c=Ye.fromObject(n);return cr(t,s,new qe(Me(a),u,c))}return[]}(t.serverSyncTree_,s,u,o)}else{var c=oe(n);a=function(t,e,n,r){var i=ar(t,r);if(null!=i){var o=ur(i),s=o.path,a=o.queryId,u=wt(s,e);return cr(t,s,new Ve(Me(a),u,n))}return[]}(t.serverSyncTree_,s,c,o)}else if(r){var l=Object(i.map)(n,function(t){return oe(t)});a=function(t,e,n){var r=Ye.fromObject(n);return er(t,new qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=oe(n);a=Xn(t.serverSyncTree_,s,h)}var f=s;a.length>0&&(f=di(t,s)),Gr(t.eventQueue_,f,a)}function ei(t,e){ni(t,"connected",e),!1===e&&function(t){ci(t,"onDisconnectEvents");var e=Zr(t),n=Ae();je(t.onDisconnect_,ft(),function(r,i){var o=vr(r,i,t.serverSyncTree_,e);xe(n,r,o)});var r=[];je(n,ft(),function(e,n){r=r.concat(Xn(t.serverSyncTree_,e,n));var i=yi(t,e);di(t,i)}),t.onDisconnect_=Ae(),Gr(t.eventQueue_,ft(),r)}(t)}function ni(t,e,n){var r=new ht("/.info/"+e),i=oe(n);t.infoData_.updateSnapshot(r,i);var o=Xn(t.infoSyncTree_,r,i);Gr(t.eventQueue_,r,o)}function ri(t){return t.nextWriteId_++}function ii(t,e,n,r,i){ci(t,"set",{path:e.toString(),value:n,priority:r});var o=Zr(t),s=oe(n,r),a=tr(t.serverSyncTree_,e),u=mr(s,a,o),c=ri(t),l=Qn(t.serverSyncTree_,e,u,c,!0);Kr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||C("set at "+e+" failed: "+n);var s=Yn(t.serverSyncTree_,c,!o);Gr(t.eventQueue_,e,s),li(0,i,n,r)});var h=yi(t,e);di(t,h),Gr(t.eventQueue_,h,[])}function oi(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Ne(t.onDisconnect_,e),li(0,n,r,i)})}function si(t,e,n,r){var i=oe(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&xe(t.onDisconnect_,e,i),li(0,r,n,o)})}function ai(t,e,n){var r;r=".info"===dt(e._path)?Jn(t.infoSyncTree_,e,n):Jn(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}function ui(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Yr)}function ci(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),I.apply(void 0,Object(o.__spreadArray)([r],Object(o.__read)(e)))}function li(t,e,n,r){e&&U(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function hi(t,e,n){return tr(t.serverSyncTree_,e,n)||re.EMPTY_NODE}function fi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||mi(t,e),wr(e)){var n=gi(t,e);Object(i.assert)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),o=hi(t,e,r),s=o,a=o.hash(),u=0;u<n.length;u++){var c=n[u];Object(i.assert)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=wt(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=e;t.server_.put(f.toString(),h,function(r){ci(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Yn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(mi(t,_r(t.transactionQueueTree_,e)),fi(t,t.transactionQueueTree_),Gr(t.eventQueue_,e,i),a=0;a<o.length;a++)U(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(C("transaction at "+f.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;di(t,e)}},a)}(t,Cr(e),n)}else Tr(e)&&Er(e,function(e){fi(t,e)})}function di(t,e){var n=pi(t,e),r=Cr(n);return function(t,e,n){if(0!==e.length){for(var r=[],o=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=wt(n,c.path),h=!1;if(Object(i.assert)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,o=o.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",o=o.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0));else{var f=hi(t,c.path,s);c.currentInputSnapshot=f;var d=e[a].update(f.val());if(void 0!==d){Dr("transaction failed: Data returned ",d,c.path);var p=oe(d);"object"==typeof d&&null!=d&&Object(i.contains)(d,".priority")||(p=p.updatePriority(f.getPriority()));var g=c.currentWriteId,v=Zr(t),m=mr(p,f,v);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=ri(t),s.splice(s.indexOf(g),1),o=(o=o.concat(Qn(t.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat(Yn(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",o=o.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0))}Gr(t.eventQueue_,n,o),o=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(mi(t,t.transactionQueueTree_),u=0;u<r.length;u++)U(r[u]);fi(t,t.transactionQueueTree_)}}(t,gi(t,n),r),r}function pi(t,e){var n,r=t.transactionQueueTree_;for(n=dt(e);null!==n&&void 0===wr(r);)r=_r(r,n),n=dt(e=gt(e));return r}function gi(t,e){var n=[];return vi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function vi(t,e,n){var r=wr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Er(e,function(e){vi(t,e,n)})}function mi(t,e){var n=wr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Ir(e,n.length>0?n:void 0)}Er(e,function(e){mi(t,e)})}function yi(t,e){var n=Cr(pi(t,e)),r=_r(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){bi(t,e)}),bi(t,r),Or(r,function(e){bi(t,e)}),n}function bi(t,e){var n=wr(e);if(n){for(var r=[],o=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(i.assert)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(i.assert)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),o=o.concat(Yn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Ir(e,void 0):n.length=s+1,Gr(t.eventQueue_,Cr(e),o),a=0;a<r.length;a++)U(r[a])}}var _i=function(t,e){var n=wi(t),r=n.namespace;return"firebase.com"===n.domain&&O(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||O("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&C("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new G(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new ht(n.pathString)}},wi=function(t){var e="",n="",r="",i="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(o.__values)(t.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):C("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:s}},Ii=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(i.stringify)(this.snapshot.exportVal())},t}(),Ti=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ei=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(i.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Oi=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new i.Deferred;return oi(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){qr("OnDisconnect.remove",this._path);var t=new i.Deferred;return si(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){qr("OnDisconnect.set",this._path),Rr("OnDisconnect.set",t,this._path,!1);var e=new i.Deferred;return si(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){qr("OnDisconnect.setWithPriority",this._path),Rr("OnDisconnect.setWithPriority",t,this._path,!1),Lr("OnDisconnect.setWithPriority",e,!1);var n=new i.Deferred;return function(t,e,n,r,i){var o=oe(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&xe(t.onDisconnect_,e,o),li(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){qr("OnDisconnect.update",this._path),Mr("OnDisconnect.update",t,this._path,!1);var e=new i.Deferred;return function(t,e,n,r){if(Object(i.isEmpty)(n))return I("onDisconnect().update() called with empty data.  Don't do anything."),void li(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&D(n,function(n,r){var i=oe(r);xe(t.onDisconnect_,bt(e,n),i)}),li(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),Ci=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return _t(this._path)?null:vt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new xi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Ce(this._queryParams),e=P(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Ce(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(i.getModularInstance)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Tt(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Si(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function ki(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Mt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==k)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==A)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(t.getIndex()===Xt){if(null!=e&&!Pr(e)||null!=n&&!Pr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(i.assert)(t.getIndex()instanceof ue||t.getIndex()===ce,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ai(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var xi=function(t){function e(e,n){return t.call(this,e,n,new we,!1)||this}return Object(o.__extends)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=yt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Ci),Ni=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new ht(e),r=Ri(this.ref,e);return new t(this._node.getChild(n),r,Xt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Ri(n.ref,r),Xt))})},t.prototype.hasChild=function(t){var e=new ht(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function ji(t,e){return(t=Object(i.getModularInstance)(t))._checkNotDeleted("ref"),void 0!==e?Ri(t._root,e):t._root}function Pi(t,e){(t=Object(i.getModularInstance)(t))._checkNotDeleted("refFromURL");var n=_i(e,t._repo.repoInfo_.nodeAdmin);Br("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||O("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),ji(t,n.path.toString())}function Ri(t,e){var n;return null===dt((t=Object(i.getModularInstance)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vr("child","path",n,!1)):Vr("child","path",e,!1),new xi(t._repo,bt(t._path,e))}function Di(t,e){t=Object(i.getModularInstance)(t),qr("push",t._path),Rr("push",e,t._path,!0);var n,r=Jr(t._repo),o=he(r),s=Ri(t,o),a=Ri(t,o);return n=null!=e?Li(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Mi(t){return qr("remove",t._path),Li(t,null)}function Li(t,e){t=Object(i.getModularInstance)(t),qr("set",t._path),Rr("set",e,t._path,!1);var n=new i.Deferred;return ii(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Fi(t,e){t=Object(i.getModularInstance)(t),qr("setPriority",t._path),Lr("setPriority",e,!1);var n=new i.Deferred;return ii(t._repo,bt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Ui(t,e,n){if(qr("setWithPriority",t._path),Rr("setWithPriority",e,t._path,!1),Lr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new i.Deferred;return ii(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Vi(t,e){Mr("update",e,t._path,!1);var n=new i.Deferred;return function(t,e,n,r){ci(t,"update",{path:e.toString(),value:n});var o=!0,s=Zr(t),a={};if(D(n,function(n,r){o=!1,a[n]=vr(bt(e,n),oe(r),t.serverSyncTree_,s)}),o)I("update() called with empty data.  Don't do anything."),li(0,r,"ok",void 0);else{var u=ri(t),c=function(t,e,n,r){!function(t,e,n,r){Object(i.assert)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ze(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var o=Ye.fromObject(n);return er(t,new qe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(t.serverSyncTree_,e,a,u);Kr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||C("update at "+e+" failed: "+n);var s=Yn(t.serverSyncTree_,u,!o),a=s.length>0?di(t,e):e;Gr(t.eventQueue_,a,s),li(0,r,n,i)}),D(n,function(n){var r=yi(t,bt(e,n));di(t,r)}),Gr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var qi=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Ii("value",this,new Ni(t.snapshotNode,new xi(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ti(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Bi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ti(this,t,e):null},t.prototype.createEvent=function(t,e){Object(i.assert)(null!=t.childName,"Child events should have a childName.");var n=Ri(new xi(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Ii(t.type,this,new Ni(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Hi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){ai(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Ei(n,o||void 0),c="value"===e?new qi(u):new Bi(e,u);return function(t,e,n){var r;r=".info"===dt(e._path)?Zn(t.infoSyncTree_,e,n):Zn(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ai(t._repo,t,c)}}function zi(t,e,n,r){return Hi(t,"value",e,n,r)}function Ki(t,e,n,r){return Hi(t,"child_added",e,n,r)}function Wi(t,e,n,r){return Hi(t,"child_changed",e,n,r)}function Gi(t,e,n,r){return Hi(t,"child_moved",e,n,r)}function $i(t,e,n,r){return Hi(t,"child_removed",e,n,r)}function Qi(t,e,n){var r=null,i=n?new Ei(n):null;"value"===e?r=new qi(i):e&&(r=new Bi(e,i)),ai(t._repo,t,r)}var Yi=function(){return function(){}}(),Xi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Rr("endAt",this._value,t._path,!0);var e=Te(t._queryParams,this._value,this._key);if(Ai(e),ki(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ci(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function Ji(t,e){return Ur("endAt","key",e,!0),new Xi(t,e)}var Zi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Rr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Mt?("string"==typeof n&&(n=de(n)),i=Te(e,n,r)):i=Te(e,n,null==r?k:de(r)),i.endBeforeSet_=!0,i);if(Ai(o),ki(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ci(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function to(t,e){return Ur("endBefore","key",e,!0),new Zi(t,e)}var eo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Rr("startAt",this._value,t._path,!0);var e=Ie(t._queryParams,this._value,this._key);if(Ai(e),ki(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ci(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function no(t,e){return void 0===t&&(t=null),Ur("startAt","key",e,!0),new eo(t,e)}var ro=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Rr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Mt?("string"==typeof n&&(n=fe(n)),i=Ie(e,n,r)):i=Ie(e,n,null==r?A:fe(r)),i.startAfterSet_=!0,i);if(Ai(o),ki(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ci(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function io(t,e){return Ur("startAfter","key",e,!0),new ro(t,e)}var oo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ci(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Yi);function so(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oo(t)}var ao=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ci(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Yi);function uo(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ao(t)}var co=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Si(t,"orderByChild");var e=new ht(this._path);if(_t(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ue(e),r=Ee(t._queryParams,n);return ki(r),new Ci(t._repo,t._path,r,!0)},e}(Yi);function lo(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vr("orderByChild","path",t,!1),new co(t)}var ho=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Si(t,"orderByKey");var e=Ee(t._queryParams,Mt);return ki(e),new Ci(t._repo,t._path,e,!0)},e}(Yi);function fo(){return new ho}var po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Si(t,"orderByPriority");var e=Ee(t._queryParams,Xt);return ki(e),new Ci(t._repo,t._path,e,!0)},e}(Yi);function go(){return new po}var vo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Si(t,"orderByValue");var e=Ee(t._queryParams,ce);return ki(e),new Ci(t._repo,t._path,e,!0)},e}(Yi);function mo(){return new vo}var yo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){if(Rr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Xi(this._value,this._key)._apply(new eo(this._value,this._key)._apply(t))},e}(Yi);function bo(t,e){return Ur("equalTo","key",e,!0),new yo(t,e)}function _o(t){for(var e,n,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];var a=Object(i.getModularInstance)(t);try{for(var u=Object(o.__values)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){Object(i.assert)(!xn,"__referenceConstructor has already been defined"),xn=t}(xi),function(t){Object(i.assert)(!Ln,"__referenceConstructor has already been defined"),Ln=t}(xi);var wo={},Io=!1;function To(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||O("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),I("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=_i(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=_i(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new H(H.OWNER):new B(t.name,t.options,e);Br("Invalid Firebase Database URL",a),_t(a.path)||O("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=wo[e.name];i||(wo[e.name]=i={});var o=i[t.toURLString()];return o&&O("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Xr(t,Io,n,r),i[t.toURLString()]=o,o}(u,t,l,new q(t.name,n));return new Eo(h,t)}var Eo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=J(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Se(t.repoInfo_,function(e,n,r,i){ti(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return ei(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(i.stringify)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new jt(t.repoInfo_,e,function(e,n,r,i){ti(t,e,n,r,i)},function(e){ei(t,e)},function(e){!function(t,e){D(e,function(e,n){ni(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,o;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new Re(t.stats_,t.server_)},o=t.repoInfo_.toString(),X[o]||(X[o]=r()),X[o]),t.infoData_=new ke,t.infoSyncTree_=new $n({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Xn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ni(t,"connected",!1),t.serverSyncTree_=new $n({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Gr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new xi(this._repo,ft())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=wo[e=this.app.name])&&n[t.key]===t||O("Database "+e+"("+t.repoInfo_+") has already been deleted."),ui(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&O("Cannot call "+t+" on a deleted database.")},t}();function Oo(t){(t=Object(i.getModularInstance)(t))._checkNotDeleted("goOffline"),ui(t._repo)}function Co(t){var e;(t=Object(i.getModularInstance)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(Yr)}var So={".sv":"timestamp"},ko=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Ao(t,e,n){var r;if(t=Object(i.getModularInstance)(t),qr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var o=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new i.Deferred,a=zi(t,function(){});return function(e,n,r,o,a,u){ci(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Ni(r,new xi(t._repo,t._path),Xt),s.resolve(new ko(n,i)))},status:null,order:v(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=hi(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Dr("transaction failed: Data returned ",h,c.path),c.status=0;var f=_r(e.transactionQueueTree_,n),d=wr(f)||[];d.push(c),Ir(f,d);var p=void 0;"object"==typeof h&&null!==h&&Object(i.contains)(h,".priority")?(p=Object(i.safeGet)(h,".priority"),Object(i.assert)(Pr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(tr(e.serverSyncTree_,n)||re.EMPTY_NODE).getPriority().val();var g=Zr(e),m=oe(h,p),y=mr(m,l,g);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=y,c.currentWriteId=ri(e);var b=Qn(e.serverSyncTree_,n,y,c.currentWriteId,c.applyLocally);Gr(e.eventQueue_,n,b),fi(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,o),s.promise}var xo=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(i.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),Object(i.validateCallback)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){Object(i.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),Object(i.validateCallback)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){Object(i.validateArgCount)("OnDisconnect.set",1,2,arguments.length),Object(i.validateCallback)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){Object(i.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(i.validateCallback)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if(Object(i.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(i.validateCallback)("OnDisconnect.update","onComplete",e,!0);var o=this._delegate.update(t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},t}(),No=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(i.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),jo=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(i.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(i.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(i.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(i.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(i.validateArgCount)("DataSnapshot.child",0,1,arguments.length),e=String(e),Vr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(i.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),Vr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(i.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(i.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),Object(i.validateCallback)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return Object(i.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(i.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(i.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new Ro(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Po=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,o){var s,a=this;Object(i.validateArgCount)("Query.on",2,4,arguments.length),Object(i.validateCallback)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,o),c=function(t,e){n.call(u.context,new jo(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return zi(this._delegate,c,l),n;case"child_added":return Ki(this._delegate,c,l),n;case"child_removed":return $i(this._delegate,c,l),n;case"child_changed":return Wi(this._delegate,c,l),n;case"child_moved":return Gi(this._delegate,c,l),n;default:throw new Error(Object(i.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(i.validateArgCount)("Query.off",0,3,arguments.length),Fr("Query.off",t,!0),Object(i.validateCallback)("Query.off","callback",e,!0),Object(i.validateContextObject)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Qi(this._delegate,t,r)}else Qi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=wt(t,n);r=r||Bn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Bn(i,ft()):(i=new Fn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Be(r,!0,!1):null;return $e(Vn(i,e,cn(t.pendingWriteTree_,e._path),o?s.getNode():re.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=oe(n).withIndex(e._queryParams.getIndex()),i=Xn(t.serverSyncTree_,e._path,r);return Wr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return ci(t,"get for query "+Object(i.stringify)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=Object(i.getModularInstance)(t))._repo,t).then(function(e){return new Ni(e,new xi(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new jo(t.database,e)})},t.prototype.once=function(e,n,r,o){var s=this;Object(i.validateArgCount)("Query.once",1,4,arguments.length),Object(i.validateCallback)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,o),u=new i.Deferred,c=function(t,e){var r=new jo(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Ki(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":$i(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Wi(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Gi(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(i.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(i.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new t(this.database,_o(this._delegate,so(e)))},t.prototype.limitToLast=function(e){return Object(i.validateArgCount)("Query.limitToLast",1,1,arguments.length),new t(this.database,_o(this._delegate,uo(e)))},t.prototype.orderByChild=function(e){return Object(i.validateArgCount)("Query.orderByChild",1,1,arguments.length),new t(this.database,_o(this._delegate,lo(e)))},t.prototype.orderByKey=function(){return Object(i.validateArgCount)("Query.orderByKey",0,0,arguments.length),new t(this.database,_o(this._delegate,fo()))},t.prototype.orderByPriority=function(){return Object(i.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new t(this.database,_o(this._delegate,go()))},t.prototype.orderByValue=function(){return Object(i.validateArgCount)("Query.orderByValue",0,0,arguments.length),new t(this.database,_o(this._delegate,mo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.startAt",0,2,arguments.length),new t(this.database,_o(this._delegate,no(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.startAfter",0,2,arguments.length),new t(this.database,_o(this._delegate,io(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.endAt",0,2,arguments.length),new t(this.database,_o(this._delegate,Ji(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.endBefore",0,2,arguments.length),new t(this.database,_o(this._delegate,to(e,n)))},t.prototype.equalTo=function(e,n){return Object(i.validateArgCount)("Query.equalTo",1,2,arguments.length),new t(this.database,_o(this._delegate,bo(e,n)))},t.prototype.toString=function(){return Object(i.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(i.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(i.validateArgCount)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(i.validateCallback)(t,"cancel",r.cancel,!0),r.context=n,Object(i.validateContextObject)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(i.errorPrefix)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Ro(this.database,new xi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Ro=function(t){function e(e,n){var r=t.call(this,e,new Ci(n._repo,n._path,new we,!1))||this;return r.database=e,r._delegate=n,r}return Object(o.__extends)(e,t),e.prototype.getKey=function(){return Object(i.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(i.validateArgCount)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Ri(this._delegate,t))},e.prototype.getParent=function(){Object(i.validateArgCount)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(i.validateArgCount)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(i.validateArgCount)("Reference.set",1,2,arguments.length),Object(i.validateCallback)("Reference.set","onComplete",e,!0);var n=Li(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if(Object(i.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}qr("Reference.update",this._delegate._path),Object(i.validateCallback)("Reference.update","onComplete",e,!0);var o=Vi(this._delegate,t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},e.prototype.setWithPriority=function(t,e,n){Object(i.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),Object(i.validateCallback)("Reference.setWithPriority","onComplete",n,!0);var r=Ui(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){Object(i.validateArgCount)("Reference.remove",0,1,arguments.length),Object(i.validateCallback)("Reference.remove","onComplete",t,!0);var e=Mi(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;Object(i.validateArgCount)("Reference.transaction",1,3,arguments.length),Object(i.validateCallback)("Reference.transaction","transactionUpdate",t,!1),Object(i.validateCallback)("Reference.transaction","onComplete",e,!0),Hr("Reference.transaction","applyLocally",n,!0);var o=Ao(this._delegate,t,{applyLocally:n}).then(function(t){return new No(t.committed,new jo(r.database,t.snapshot))});return e&&o.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),o},e.prototype.setPriority=function(t,e){Object(i.validateArgCount)("Reference.setPriority",1,2,arguments.length),Object(i.validateCallback)("Reference.setPriority","onComplete",e,!0);var n=Fi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;Object(i.validateArgCount)("Reference.push",0,2,arguments.length),Object(i.validateCallback)("Reference.push","onComplete",n,!0);var o=Di(this._delegate,t),s=o.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,o);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return qr("Reference.onDisconnect",this._delegate._path),new xo(new Oi(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Po),Do=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=Object(i.getModularInstance)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&O("Cannot call useEmulator() after instance has already been initialized.");var o=t._repoInternal,s=void 0;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&O('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new H(H.OWNER);else if(r.mockUserToken){var a=Object(i.createMockUserToken)(r.mockUserToken,t.app.options.projectId);s=new H(a)}!function(t,e,n,r){t.repoInfo_=new G(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(o,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if(Object(i.validateArgCount)("database.ref",0,1,arguments.length),t instanceof Ro){var e=Pi(this._delegate,t.toString());return new Ro(this,e)}return e=ji(this._delegate,t),new Ro(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(i.validateArgCount)(e,1,1,arguments.length);var n=Pi(this._delegate,t);return new Ro(this,n)},t.prototype.goOffline=function(){return Object(i.validateArgCount)("database.goOffline",0,0,arguments.length),Oo(this._delegate)},t.prototype.goOnline=function(){return Object(i.validateArgCount)("database.goOnline",0,0,arguments.length),Co(this._delegate)},t.ServerValue={TIMESTAMP:So,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Mo=Object.freeze({__proto__:null,forceLongPolling:function(){ot.forceDisallow(),nt.forceAllow()},forceWebSockets:function(){nt.forceDisallow()},isWebSocketsAvailable:function(){return ot.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Pe(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);D(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;u(t.version);var c=new r.Provider("auth-internal",new r.ComponentContainer("database-standalone"));return c.setComponent(new r.Component("auth-internal",function(){return i},"PRIVATE")),{instance:new Do(To(e,c,void 0,n,a),e),namespace:o}}}),Lo=jt;jt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},jt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Fo=Object.freeze({__proto__:null,DataConnection:Lo,RealTimeConnection:at,hijackHash:function(t){var e=jt.prototype.put;return jt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){jt.prototype.put=e}},ConnectionTarget:G,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){Io=t}(t)}}),Uo=Do.ServerValue;!function(e){u(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new r.Component("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Do(To(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:Ro,Query:Po,Database:Do,DataSnapshot:jo,enableLogging:w,INTERNAL:Mo,ServerValue:Uo,TEST_ACCESS:Fo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.2"),Object(i.isNodeSdk)()&&(t.exports=n)}(e.default)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("mCNh"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:Object(a.b)(t)(this)}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.default}),r.default.registerVersion("firebase","8.6.3","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},"X8/r":function(t,e,n){"use strict";var r=n("zIRd"),i=n("/6Yf"),o=n("mrSG"),s=n("qOnz"),a=n("q/0M");function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var c,l=u(r),h=((c={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",c["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",c["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",c["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",c["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",c["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",c["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",c["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",c["recaptcha-error"]="ReCAPTCHA error.",c),f=new s.ErrorFactory("appCheck","AppCheck",h),d=new Map,p={activated:!1,tokenListeners:[]},g={enabled:!1};function v(t){return d.get(t)||p}function m(t,e){d.set(t,e)}function y(){return g}function b(){return self.grecaptcha}function _(t){if(!v(t).activated)throw f.create("use-before-activation",{appName:t.name})}function w(t){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(n){switch(n.label){case 0:return _(t),[4,v(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise(function(n,r){var i=v(t).reCAPTCHAState;e.ready(function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))})})]}})})}function I(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),s=v(t);m(t,o.__assign(o.__assign({},s),{reCAPTCHAState:o.__assign(o.__assign({},s.reCAPTCHAState),{widgetId:i})}))}var T="https://content-firebaseappcheck.googleapis.com/v1beta",E=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new s.Deferred,[4,(r=this.getNextRun(t),new Promise(function(t){setTimeout(t,r)}))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new s.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}var r})})},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function O(t,e){var n=t.url,r=t.body;return o.__awaiter(this,void 0,void 0,function(){var t,i,s,a,u,c,l,h,d,p;return o.__generator(this,function(o){switch(o.label){case 0:t={"Content-Type":"application/json"},(i=e.getImmediate({optional:!0}))&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),s={method:"POST",body:JSON.stringify(r),headers:t},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,s)];case 2:return a=o.sent(),[3,4];case 3:throw u=o.sent(),f.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==a.status)throw f.create("fetch-status-error",{httpStatus:a.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,a.json()];case 6:return c=o.sent(),[3,8];case 7:throw l=o.sent(),f.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(!(h=c.ttl.match(/^([\d.]+)(s)$/))||!h[2]||isNaN(Number(h[1])))throw f.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return d=1e3*Number(h[1]),p=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:p+d,issuedAtTimeMillis:p}]}})})}function C(t,e){var n=t.options;return{url:T+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeRecaptchaToken?key="+n.apiKey,body:{recaptcha_token:e}}}function S(t,e){var n=t.options;return{url:T+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeDebugToken?key="+n.apiKey,body:{debug_token:e}}}var k="firebase-app-check-store",A="debug-token",x=null;function N(){return x||(x=new Promise(function(t,e){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(f.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(k,{keyPath:"compositeKey"})}}}catch(r){e(f.create("storage-open",{originalErrorMessage:r.message}))}}))}function j(t){return R(D(t))}function P(t,e){return o.__awaiter(this,void 0,void 0,function(){var n,r,i,s;return o.__generator(this,function(o){switch(o.label){case 0:return[4,N()];case 1:return n=o.sent(),r=n.transaction(k,"readwrite"),i=r.objectStore(k),s=i.put({compositeKey:t,value:e}),[2,new Promise(function(t,e){s.onsuccess=function(e){t()},r.onerror=function(t){var n;e(f.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})]}})})}function R(t){return o.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return o.__generator(this,function(o){switch(o.label){case 0:return[4,N()];case 1:return e=o.sent(),n=e.transaction(k,"readonly"),r=n.objectStore(k),i=r.get(t),[2,new Promise(function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(f.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})]}})})}function D(t){return t.options.appId+"-"+t.name}var M=new a.Logger("@firebase/app-check");function L(t){return o.__awaiter(this,void 0,void 0,function(){var e,n;return o.__generator(this,function(r){switch(r.label){case 0:if(!s.isIndexedDBAvailable())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,j(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),M.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}})})}function F(t,e){return s.isIndexedDBAvailable()?function(t,e){return P(D(t),e)}(t,e).catch(function(t){M.warn("Failed to write token to indexeddb. Error: "+t)}):Promise.resolve()}function U(){return y().enabled}function V(){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(e){if((t=y()).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")})})}var q={error:"UNKNOWN_ERROR"};function B(t,e,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,function(){var r,i,a,u,c,l,h,d,p,g,y,b,I;return o.__generator(this,function(T){switch(T.label){case 0:return _(t),U()?(r=O,i=S,a=[t],[4,V()]):[3,3];case 1:return[4,r.apply(void 0,[i.apply(void 0,a.concat([T.sent()])),e])];case 2:return[2,{token:T.sent().token}];case 3:return u=v(t),l=void 0,(c=u.token)?[3,5]:[4,L(t)];case 4:(h=T.sent())&&z(h)&&(c=h,m(t,o.__assign(o.__assign({},u),{token:c})),H(t,{token:c.token})),T.label=5;case 5:if(!n&&c&&z(c))return[2,{token:c.token}];T.label=6;case 6:return T.trys.push([6,12,,13]),u.customProvider?[4,u.customProvider.getToken()]:[3,8];case 7:return d=T.sent(),p=s.issuedAtTime(d.token),g=null!==p&&p<Date.now()&&p>0?1e3*p:Date.now(),c=o.__assign(o.__assign({},d),{issuedAtTimeMillis:g}),[3,11];case 8:return[4,w(t).catch(function(t){throw f.create("recaptcha-error")})];case 9:return y=T.sent(),[4,O(C(t,y),e)];case 10:c=T.sent(),T.label=11;case 11:return[3,13];case 12:return b=T.sent(),M.error(b),l=b,[3,13];case 13:return c?[3,14]:(I=function(t){return{token:(e=q,s.base64.encodeString(JSON.stringify(e),!1)),error:t};var e}(l),[3,16]);case 14:return I={token:c.token},m(t,o.__assign(o.__assign({},u),{token:c})),[4,F(t,c)];case 15:T.sent(),T.label=16;case 16:return H(t,I),[2,I]}})})}function H(t,e){for(var n=0,r=v(t).tokenListeners;n<r.length;n++){var i=r[n];try{i(e)}catch(o){}}}function z(t){return t.expireTimeMillis-Date.now()>0}var K="app-check-internal";!function(t){t.INTERNAL.registerComponent(new i.Component("appCheck",function(t){return e=t.getProvider("app").getImmediate(),{activate:function(t,n){return function(t,e,n){var r=v(t);if(r.activated)throw f.create("already-activated",{appName:t.name});var i=o.__assign(o.__assign({},r),{activated:!0});"string"==typeof e?i.siteKey=e:i.customProvider=e,i.isTokenAutoRefreshEnabled=void 0===n?t.automaticDataCollectionEnabled:n,m(t,i),i.siteKey&&function(t,e){var n=v(t),r=new s.Deferred;m(t,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,a=document.createElement("div");a.id=i,a.style.display="none",document.body.appendChild(a);var u,c,l=b();return l?l.ready(function(){I(t,e,l,i),r.resolve(l)}):(u=function(){var n=b();if(!n)throw new Error("no recaptcha");n.ready(function(){I(t,e,n,i),r.resolve(n)})},(c=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",c.onload=u,document.head.appendChild(c)),r.promise}(t,i.siteKey).catch(function(){})}(e,t,n)},setTokenAutoRefreshEnabled:function(t){return function(t,e){var n=v(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),m(t,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:e}))}(e,t)}};var e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(t,e,n){t.getProvider(K).initialize()})),t.INTERNAL.registerComponent(new i.Component(K,function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger"),{getToken:function(t){return B(e,n,t)},addTokenListener:function(t){return function(t,e,n){var r=v(t),i=o.__assign(o.__assign({},r),{tokenListeners:o.__spreadArray(o.__spreadArray([],r.tokenListeners),[n])});if(U()){var s=y();s.enabled&&s.token&&s.token.promise.then(function(t){return n({token:t})}).catch(function(){})}else{if(!i.tokenRefresher){var a=function(t,e){var n=this;return new E(function(){return o.__awaiter(n,void 0,void 0,function(){var n;return o.__generator(this,function(r){switch(r.label){case 0:return v(t).token?[3,2]:[4,B(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,B(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}})})},function(){return!0},function(){var e=v(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return n=Math.min(n,e.token.expireTimeMillis-3e5),Math.max(0,n-Date.now())}return 0},3e4,96e4)}(t,e);i.tokenRefresher=a}if(i.tokenRefresher.isRunning()||!0!==r.isTokenAutoRefreshEnabled||i.tokenRefresher.start(),r.token&&z(r.token)){var u=r.token;Promise.resolve().then(function(){return n({token:u.token})}).catch(function(){})}}m(t,i)}(e,n,t)},removeTokenListener:function(t){return function(t,e){var n=v(t),r=n.tokenListeners.filter(function(t){return t!==e});0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),m(t,o.__assign(o.__assign({},n),{tokenListeners:r}))}(e,t)}};var e,n},"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion("@firebase/app-check","0.1.1")}(l.default),function(){var t=s.getGlobal();if("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=y();e.enabled=!0;var n=new s.Deferred;e.token=n,n.resolve("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?t.FIREBASE_APPCHECK_DEBUG_TOKEN:function(){return o.__awaiter(this,void 0,void 0,function(){var t,e;return o.__generator(this,function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,R(A)];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:((r=e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}),P(A,r)).catch(function(t){return M.warn("Failed to persist debug token to indexeddb. Error: "+t)}),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}var r})})}())}}()},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return nn}),n.d(e,"b",function(){return ru}),n.d(e,"c",function(){return Ja}),n.d(e,"d",function(){return Ya}),n.d(e,"e",function(){return Xa}),n.d(e,"f",function(){return Yu}),n.d(e,"g",function(){return Vu}),n.d(e,"h",function(){return na}),n.d(e,"i",function(){return pu}),n.d(e,"j",function(){return Cs}),n.d(e,"k",function(){return su}),n.d(e,"l",function(){return xs}),n.d(e,"m",function(){return gr}),n.d(e,"n",function(){return Pa}),n.d(e,"o",function(){return Xi}),n.d(e,"p",function(){return In}),n.d(e,"q",function(){return N}),n.d(e,"r",function(){return en}),n.d(e,"s",function(){return po}),n.d(e,"t",function(){return Qs}),n.d(e,"u",function(){return Xs}),n.d(e,"v",function(){return ou}),n.d(e,"w",function(){return da}),n.d(e,"x",function(){return Bu}),n.d(e,"y",function(){return fa}),n.d(e,"z",function(){return Du}),n.d(e,"A",function(){return mu}),n.d(e,"B",function(){return Tn}),n.d(e,"C",function(){return nu}),n.d(e,"D",function(){return eu}),n.d(e,"E",function(){return Ps}),n.d(e,"F",function(){return js}),n.d(e,"G",function(){return br}),n.d(e,"H",function(){return Ds}),n.d(e,"I",function(){return lr}),n.d(e,"J",function(){return En}),n.d(e,"K",function(){return Ku}),n.d(e,"L",function(){return ua}),n.d(e,"M",function(){return Eu}),n.d(e,"N",function(){return rn}),n.d(e,"O",function(){return Ls}),n.d(e,"P",function(){return Ms}),n.d(e,"Q",function(){return ga}),n.d(e,"R",function(){return L}),n.d(e,"S",function(){return Mu}),n.d(e,"T",function(){return Pu}),n.d(e,"U",function(){return g}),n.d(e,"V",function(){return ju}),n.d(e,"W",function(){return $u}),n.d(e,"X",function(){return Su}),n.d(e,"Y",function(){return iu}),n.d(e,"Z",function(){return Zi}),n.d(e,"ab",function(){return fs}),n.d(e,"bb",function(){return y}),n.d(e,"cb",function(){return ur}),n.d(e,"db",function(){return Kn}),n.d(e,"eb",function(){return Rn}),n.d(e,"fb",function(){return Mn}),n.d(e,"gb",function(){return Vn}),n.d(e,"hb",function(){return Fn}),n.d(e,"ib",function(){return Ln}),n.d(e,"jb",function(){return Un}),n.d(e,"kb",function(){return us}),n.d(e,"lb",function(){return Gu}),n.d(e,"mb",function(){return cs}),n.d(e,"nb",function(){return ls}),n.d(e,"ob",function(){return Dn}),n.d(e,"pb",function(){return B}),n.d(e,"qb",function(){return Eo}),n.d(e,"rb",function(){return qo}),n.d(e,"sb",function(){return Uo}),n.d(e,"tb",function(){return Vo}),n.d(e,"ub",function(){return as}),n.d(e,"vb",function(){return St}),n.d(e,"wb",function(){return f}),n.d(e,"xb",function(){return Pn}),n.d(e,"yb",function(){return vo}),n.d(e,"zb",function(){return wt}),n.d(e,"Ab",function(){return Ts}),n.d(e,"Bb",function(){return ni}),n.d(e,"Cb",function(){return So}),n.d(e,"Db",function(){return Qo}),n.d(e,"Eb",function(){return Wa}),n.d(e,"Fb",function(){return tt}),n.d(e,"Gb",function(){return at}),n.d(e,"Hb",function(){return I}),n.d(e,"Ib",function(){return T}),n.d(e,"Jb",function(){return it}),n.d(e,"Kb",function(){return ut}),n.d(e,"Lb",function(){return xo}),n.d(e,"Mb",function(){return Do}),n.d(e,"Nb",function(){return Lo}),n.d(e,"Ob",function(){return Mo}),n.d(e,"Pb",function(){return Ro}),n.d(e,"Qb",function(){return Po}),n.d(e,"Rb",function(){return Fo}),n.d(e,"Sb",function(){return Ye}),n.d(e,"Tb",function(){return rs}),n.d(e,"Ub",function(){return bn}),n.d(e,"Vb",function(){return Je}),n.d(e,"Wb",function(){return Qa}),n.d(e,"Xb",function(){return Bo}),n.d(e,"Yb",function(){return Ga}),n.d(e,"Zb",function(){return Ko}),n.d(e,"ac",function(){return xa}),n.d(e,"bc",function(){return Na}),n.d(e,"cc",function(){return No}),n.d(e,"dc",function(){return Wo}),n.d(e,"ec",function(){return Ka}),n.d(e,"fc",function(){return Kt}),n.d(e,"gc",function(){return hr}),n.d(e,"hc",function(){return ot}),n.d(e,"ic",function(){return Ao}),n.d(e,"jc",function(){return ts}),n.d(e,"kc",function(){return es}),n.d(e,"lc",function(){return ns});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("EQ5u"),u=n("x+ZX");function c(){return new r.a}function l(t){for(let e in t)if(t[e]===l)return e;throw Error("Could not find renamed property on target object.")}function h(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function f(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(f).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function d(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const p=l({__forward_ref__:l});function g(t){return t.__forward_ref__=g,t.toString=function(){return f(this())},t}function v(t){return m(t)?t():t}function m(t){return"function"==typeof t&&t.hasOwnProperty(p)&&t.__forward_ref__===g}class y extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function b(t){return"string"==typeof t?t:null==t?"":String(t)}function _(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():b(t)}function w(t,e){const n=e?` in ${e}`:"";throw new y("201",`No provider for ${_(t)} found${n}`)}function I(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function T(t){return{providers:t.providers||[],imports:t.imports||[]}}function E(t){return O(t,S)||O(t,A)}function O(t,e){return t.hasOwnProperty(e)?t[e]:null}function C(t){return t&&(t.hasOwnProperty(k)||t.hasOwnProperty(x))?t[k]:null}const S=l({"\u0275prov":l}),k=l({"\u0275inj":l}),A=l({ngInjectableDef:l}),x=l({ngInjectorDef:l});var N=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let j;function P(t){const e=j;return j=t,e}function R(t,e,n){const r=E(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&N.Optional?null:void 0!==e?e:void w(f(t),"Injector")}function D(t){return{toString:t}.toString()}var M=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),L=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const F="undefined"!=typeof globalThis&&globalThis,U="undefined"!=typeof window&&window,V="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,B=F||q||U||V,H={},z=[],K=[],W=l({"\u0275cmp":l}),G=l({"\u0275dir":l}),$=l({"\u0275pipe":l}),Q=l({"\u0275mod":l}),Y=l({"\u0275loc":l}),X=l({"\u0275fac":l}),J=l({__NG_ELEMENT_ID__:l});let Z=0;function tt(t){return D(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===M.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||K,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||K,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Z++,n.inputs=st(t.inputs,e),n.outputs=st(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(et):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(nt):null,n})}function et(t){return ct(t)||function(t){return t[G]||null}(t)}function nt(t){return function(t){return t[$]||null}(t)}const rt={};function it(t){const e={type:t.type,bootstrap:t.bootstrap||K,declarations:t.declarations||K,imports:t.imports||K,exports:t.exports||K,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&D(()=>{rt[t.id]=t.type}),e}function ot(t,e){return D(()=>{const n=lt(t,!0);n.declarations=e.declarations||K,n.imports=e.imports||K,n.exports=e.exports||K})}function st(t,e){if(null==t)return H;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const at=tt;function ut(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ct(t){return t[W]||null}function lt(t,e){const n=t[Q]||null;if(!n&&!0===e)throw new Error(`Type ${f(t)} does not have '\u0275mod' property.`);return n}const ht=20,ft=10;function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function pt(t){return Array.isArray(t)&&!0===t[1]}function gt(t){return 0!=(8&t.flags)}function vt(t){return 2==(2&t.flags)}function mt(t){return 1==(1&t.flags)}function yt(t){return null!==t.template}function bt(t,e){return t.hasOwnProperty(X)?t[X]:null}class _t{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function wt(){return It}function It(t){return t.type.prototype.ngOnChanges&&(t.setInput=Et),Tt}function Tt(){const t=Ot(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===H)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Et(t,e,n,r){const i=Ot(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:H,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new _t(u&&u.currentValue,e,s===H),t[r]=e}function Ot(t){return t.__ngSimpleChanges__||null}let Ct;function St(t){Ct=t}function kt(t){return!!t.listen}wt.ngInherit=!0;const At={createRenderer:(t,e)=>void 0!==Ct?Ct:"undefined"!=typeof document?document:void 0};function xt(t){for(;Array.isArray(t);)t=t[0];return t}function Nt(t,e){return xt(e[t])}function jt(t,e){return xt(e[t.index])}function Pt(t,e){return t.data[e]}function Rt(t,e){const n=e[t];return dt(n)?n:n[0]}function Dt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Mt(t){return 4==(4&t[2])}function Lt(t){return 128==(128&t[2])}function Ft(t,e){return null==e?null:t[e]}function Ut(t){t[18]=0}function Vt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const qt={lFrame:ue(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Bt(){return qt.bindingsEnabled}function Ht(){return qt.lFrame.lView}function zt(){return qt.lFrame.tView}function Kt(t){qt.lFrame.contextLView=t}function Wt(){let t=Gt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Gt(){return qt.lFrame.currentTNode}function $t(t,e){const n=qt.lFrame;n.currentTNode=t,n.isParent=e}function Qt(){return qt.lFrame.isParent}function Yt(){qt.lFrame.isParent=!1}function Xt(){return qt.isInCheckNoChangesMode}function Jt(t){qt.isInCheckNoChangesMode=t}function Zt(){return qt.lFrame.bindingIndex++}function te(t,e){const n=qt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ee(e)}function ee(t){qt.lFrame.currentDirectiveIndex=t}function ne(){return qt.lFrame.currentQueryIndex}function re(t){qt.lFrame.currentQueryIndex=t}function ie(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function oe(t,e,n){if(n&N.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&N.Host||(r=ie(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=qt.lFrame=ae();return r.currentTNode=e,r.lView=t,!0}function se(t){const e=ae(),n=t[1];qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ae(){const t=qt.lFrame,e=null===t?null:t.child;return null===e?ue(t):e}function ue(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ce(){const t=qt.lFrame;return qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const le=ce;function he(){const t=ce();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fe(){return qt.lFrame.selectedIndex}function de(t){qt.lFrame.selectedIndex=t}function pe(){const t=qt.lFrame;return Pt(t.tView,t.selectedIndex)}function ge(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function ve(t,e,n){be(t,e,3,n)}function me(t,e,n,r){(3&t[2])===n&&be(t,e,n,r)}function ye(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function be(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(_e(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function _e(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const we=-1;class Ie{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Te(t,e,n){const r=kt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Oe(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ee(t){return 3===t||4===t||6===t}function Oe(t){return 64===t.charCodeAt(0)}function Ce(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Se(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Se(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function ke(t){return t!==we}function Ae(t){return 32767&t}function xe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ne=!0;function je(t){const e=Ne;return Ne=t,e}let Pe=0;function Re(t,e){const n=Me(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,De(r.data,t),De(e,null),De(r.blueprint,null));const i=Le(t,e),o=t.injectorIndex;if(ke(i)){const t=Ae(i),n=xe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function De(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Me(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Le(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return we;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return we}function Fe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(J)&&(r=n[J]),null==r&&(r=n[J]=Pe++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ue(t,e,n){if(n&N.Optional)return t;w(e,"NodeInjector")}function Ve(t,e,n,r){if(n&N.Optional&&void 0===r&&(r=null),0==(n&(N.Self|N.Host))){const i=t[9],o=P(void 0);try{return i?i.get(e,r,n&N.Optional):R(e,r,n&N.Optional)}finally{P(o)}}return Ue(r,e,n)}function qe(t,e,n,r=N.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(J)?t[J]:void 0;return"number"==typeof e?e>=0?255&e:He:e}(n);if("function"==typeof o){if(!oe(e,t,r))return r&N.Host?Ue(i,n,r):Ve(e,n,r,i);try{const t=o();if(null!=t||r&N.Optional)return t;w(n)}finally{le()}}else if("number"==typeof o){let i=null,s=Me(t,e),a=we,u=r&N.Host?e[16][6]:null;for((-1===s||r&N.SkipSelf)&&(a=-1===s?Le(t,e):e[s+8],a!==we&&$e(r,!1)?(i=e[1],s=Ae(a),e=xe(a,e)):s=-1);-1!==s;){const t=e[1];if(Ge(o,s,t.data)){const t=ze(s,e,n,i,r,u);if(t!==Be)return t}a=e[s+8],a!==we&&$e(r,e[1].data[s+8]===u)&&Ge(o,s,e)?(i=t,s=Ae(a),e=xe(a,e)):s=-1}}}return Ve(e,n,r,i)}const Be={};function He(){return new Qe(Wt(),Ht())}function ze(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ke(a,s,n,null==r?vt(a)&&Ne:r!=s&&0!=(3&a.type),i&N.Host&&o===a);return null!==u?We(e,s,u,a):Be}function Ke(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&yt(t)&&t.type===n)return u}return null}function We(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Ie){const s=i;s.resolving&&function(t,e){throw new y("200",`Circular dependency in DI detected for ${t}`)}(_(o[n]));const a=je(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?P(s.injectImpl):null;oe(t,r,N.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=It(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&P(u),je(a),s.resolving=!1,le()}}return i}function Ge(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function $e(t,e){return!(t&N.Self||t&N.Host&&e)}class Qe{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return qe(this._tNode,this._lView,t,void 0,e)}}function Ye(t){return D(()=>{const e=t.prototype.constructor,n=e[X]||Xe(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[X]||Xe(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Xe(t){return m(t)?()=>{const e=Xe(v(t));return e&&e()}:bt(t)}function Je(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ee(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Wt(),t)}const Ze="__parameters__";function tn(t,e,n){return D(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Ze)?t[Ze]:Object.defineProperty(t,Ze,{value:[]})[Ze];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class en{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=I({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const nn=new en("AnalyzeForEntryComponents"),rn=Function;function on(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),on(r,e)):e!==t&&e.push(r)}return e}function sn(t,e){t.forEach(t=>Array.isArray(t)?sn(t,e):e(t))}function an(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function un(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function cn(t,e,n){let r=hn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function ln(t,e){const n=hn(t,e);if(n>=0)return t[1|n]}function hn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const fn={},dn=/\n/gm,pn="__source",gn=l({provide:String,useValue:l});let vn;function mn(t){const e=vn;return vn=t,e}function yn(t,e=N.Default){if(void 0===vn)throw new Error("inject() must be called from an injection context");return null===vn?R(t,void 0,e):vn.get(t,e&N.Optional?null:void 0,e)}function bn(t,e=N.Default){return(j||yn)(v(t),e)}function _n(t){const e=[];for(let n=0;n<t.length;n++){const r=v(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=N.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(bn(t,n))}else e.push(bn(r))}return e}function wn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const In=wn(tn("Inject",t=>({token:t})),-1),Tn=wn(tn("Optional"),8),En=wn(tn("SkipSelf"),4);let On;function Cn(t){var e;return(null===(e=function(){if(void 0===On&&(On=null,B.trustedTypes))try{On=B.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return On}())||void 0===e?void 0:e.createHTML(t))||t}class Sn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class kn extends Sn{getTypeName(){return"HTML"}}class An extends Sn{getTypeName(){return"Style"}}class xn extends Sn{getTypeName(){return"Script"}}class Nn extends Sn{getTypeName(){return"URL"}}class jn extends Sn{getTypeName(){return"ResourceURL"}}function Pn(t){return t instanceof Sn?t.changingThisBreaksApplicationSecurity:t}function Rn(t,e){const n=Dn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Dn(t){return t instanceof Sn&&t.getTypeName()||null}function Mn(t){return new kn(t)}function Ln(t){return new An(t)}function Fn(t){return new xn(t)}function Un(t){return new Nn(t)}function Vn(t){return new jn(t)}class qn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Cn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Bn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Cn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Cn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Hn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,zn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Kn(t){return(t=String(t)).match(Hn)||t.match(zn)?t:"unsafe:"+t}function Wn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Gn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const $n=Wn("area,br,col,hr,img,wbr"),Qn=Wn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Yn=Wn("rp,rt"),Xn=Gn(Yn,Qn),Jn=Gn($n,Gn(Qn,Wn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Gn(Yn,Wn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Xn),Zn=Wn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),tr=Wn("srcset"),er=Gn(Zn,tr,Wn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),nr=Wn("script,style,template");class rr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Jn.hasOwnProperty(e))return this.sanitizedSomething=!0,!nr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!er.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Zn[o]&&(s=Kn(s)),tr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Kn(t.trim())).join(", ")),this.buf.push(" ",e,'="',sr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Jn.hasOwnProperty(e)&&!$n.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(sr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const ir=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,or=/([^\#-~ |!])/g;function sr(t){return t.replace(/&/g,"&amp;").replace(ir,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(or,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ar;function ur(t,e){let n=null;try{ar=ar||function(t){const e=new Bn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Cn(""),"text/html")}catch(t){return!1}}()?new qn(e):e}(t);let r=e?String(e):"";n=ar.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=ar.getInertBodyElement(r)}while(r!==o);return Cn((new rr).sanitizeChildren(cr(n)||n))}finally{if(n){const t=cr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function cr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var lr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function hr(t){const e=function(){const t=Ht();return t&&t[12]}();return e?e.sanitize(lr.URL,t)||"":Rn(t,"URL")?Pn(t):Kn(b(t))}function fr(t){return t.ngDebugContext}function dr(t){return t.ngOriginalError}function pr(t,...e){t.error(...e)}class gr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||pr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?fr(t)?fr(t):this._findContext(dr(t)):null}_findOriginalError(t){let e=dr(t);for(;e&&dr(e);)e=dr(e);return e}}function vr(t,e){t.__ngContext__=e}const mr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(B))();function yr(t){return t instanceof Function?t():t}var br=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function _r(t,e){return(void 0)(t,e)}function wr(t){const e=t[3];return pt(e)?e[3]:e}function Ir(t){return Er(t[13])}function Tr(t){return Er(t[4])}function Er(t){for(;null!==t&&!pt(t);)t=t[4];return t}function Or(t,e,n,r,i){if(null!=r){let o,s=!1;pt(r)?o=r:dt(r)&&(s=!0,r=r[0]);const a=xt(r);0===t&&null!==n?null==i?jr(e,n,a):Nr(e,n,a,i||null,!0):1===t&&null!==n?Nr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Rr(t,e);r&&function(t,e,n,r){kt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==xt(n)&&Or(e,t,r,o,i);for(let s=ft;s<n.length;s++){const i=n[s];Vr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Cr(t,e,n){return kt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Sr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Vt(i,-1)),n.splice(r,1)}function kr(t,e){if(t.length<=ft)return;const n=ft+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Sr(o,r),e>0&&(t[n-1][4]=r[4]);const s=un(t,ft+e);Vr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ar(t,e){if(!(256&e[2])){const n=e[11];kt(n)&&n.destroyNode&&Vr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return xr(t[1],t);for(;e;){let n=null;if(dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&xr(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&xr(e[1],e),n=e&&e[4]}e=n}}(e)}}function xr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ie)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):xt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&kt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&pt(e[3])){n!==e[3]&&Sr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Nr(t,e,n,r,i){kt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function jr(t,e,n){kt(t)?t.appendChild(e,n):e.appendChild(n)}function Pr(t,e,n,r,i){null!==r?Nr(t,e,n,r,i):jr(t,e,n)}function Rr(t,e){return kt(t)?t.parentNode(e):e.parentNode}function Dr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return jt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?jt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Pr(o,i,n[a],s,!1);else Pr(o,i,n,s,!1)}function Mr(t,e){if(null!==e){const n=e.type;if(3&n)return jt(e,t);if(4&n)return Fr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Mr(t,n);{const n=t[e.index];return pt(n)?Fr(-1,n):xt(n)}}if(32&n)return _r(e,t)()||xt(t[e.index]);{const n=Lr(t,e);return null!==n?Array.isArray(n)?n[0]:Mr(wr(t[16]),n):Mr(t,e.next)}}return null}function Lr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Fr(t,e){const n=ft+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Mr(t,r)}return e[7]}function Ur(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&vr(xt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Ur(t,e,n.child,r,i,o,!1),Or(e,t,i,a,o);else if(32&u){const s=_r(n,r);let u;for(;u=s();)Or(e,t,i,u,o);Or(e,t,i,a,o)}else 16&u?qr(t,e,r,n,i,o):Or(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Vr(t,e,n,r,i,o){Ur(n,r,t.firstChild,e,i,o,!1)}function qr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Or(e,t,i,a[u],o);else Ur(t,e,a,s[3],i,o,!0)}function Br(t,e,n){kt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Hr(t,e,n){kt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function zr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Kr="ng-template";function Wr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==zr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Gr(t){return 4===t.type&&t.value!==Kr}function $r(t,e,n){return e===(4!==t.type||n?t.value:Kr)}function Qr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ee(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!$r(t,u,n)||""===u&&1===e.length){if(Yr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Wr(t.attrs,c,n)){if(Yr(r))return!1;s=!0}continue}const l=Xr(8&r?"class":u,i,Gr(t),n);if(-1===l){if(Yr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==zr(e,c,0)||2&r&&c!==t){if(Yr(r))return!1;s=!0}}}}else{if(!s&&!Yr(r)&&!Yr(u))return!1;if(s&&Yr(u))continue;s=!1,r=u|1&r}}return Yr(r)||s}function Yr(t){return 0==(1&t)}function Xr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Jr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Qr(t,e[r],n))return!0;return!1}function Zr(t,e){return t?":not("+e.trim()+")":e}function ti(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Yr(s)||(e+=Zr(o,i),i=""),r=s,o=o||!Yr(r);n++}return""!==i&&(e+=Zr(o,i)),e}const ei={};function ni(t){ri(zt(),Ht(),fe()+t,Xt())}function ri(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&ve(e,r,n)}else{const r=t.preOrderHooks;null!==r&&me(e,r,0,n)}de(n)}function ii(t,e){return t<<17|e<<2}function oi(t){return t>>17&32767}function si(t){return 2|t}function ai(t){return(131068&t)>>2}function ui(t,e){return-131069&t|e<<2}function ci(t){return 1|t}function li(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];re(i),n.contentQueries(2,e[o],o)}}}function hi(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ut(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function fi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Gt(),s=Qt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),qt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=qt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return $t(o,!0),o}function di(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function pi(t,e,n){se(e);try{const r=t.viewQuery;null!==r&&zi(1,r,n);const i=t.template;null!==i&&mi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&li(t,e),t.staticViewQueries&&zi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ui(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,he()}}function gi(t,e,n,r){const i=e[2];if(256==(256&i))return;se(e);const o=Xt();try{Ut(e),qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&mi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&ve(e,n,null)}else{const n=t.preOrderHooks;null!==n&&me(e,n,0,null),ye(e,0)}if(function(t){for(let e=Ir(t);null!==e;e=Tr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Vt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Ir(t);null!==e;e=Tr(e))for(let t=ft;t<e.length;t++){const n=e[t],r=n[1];Lt(n)&&gi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&li(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&ve(e,n)}else{const n=t.contentHooks;null!==n&&me(e,n,1),ye(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)de(~r);else{const i=r,o=n[++t],s=n[++t];te(o,i),s(2,e[i])}}}finally{de(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Li(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&zi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&ve(e,n)}else{const n=t.viewHooks;null!==n&&me(e,n,2),ye(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Vt(e[3],-1))}finally{he()}}function vi(t,e,n,r){const i=e[10],o=!Xt(),s=Mt(e);try{o&&!s&&i.begin&&i.begin(),s&&pi(t,e,r),gi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function mi(t,e,n,r,i){const o=fe(),s=2&r;try{de(-1),s&&e.length>ht&&ri(t,e,ht,Xt()),n(r,i)}finally{de(o)}}function yi(t,e,n){if(gt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function bi(t,e,n){Bt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Re(n,e),vr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=yt(r);o&&Pi(e,n,r);const u=We(e,t,a,n);vr(u,e),null!==s&&Ri(0,a-i,u,r,0,s),o&&(Rt(n.index,e)[8]=u)}}(t,e,n,jt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=qt.lFrame.currentDirectiveIndex;try{de(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ee(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||ki(r,i)}}finally{de(-1),ee(s)}}(t,e,n))}function _i(t,e,n=jt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function wi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ii(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ii(t,e,n,r,i,o,s,a,u,c){const l=ht+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ei);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Ti(t,e,n,r){const i=Wi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Gi(t).push(r,i.length-1))}function Ei(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Oi(t,e,n,r,i,o,s,a){const u=jt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Qi(t,n,c,r,i),vt(e)&&function(t,e){const n=Rt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,kt(o)?o.setProperty(u,r,i):Oe(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ci(t,e,n,r){let i=!1;if(Bt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Jr(n,s.selectors,!1)&&(i||(i=[]),Fe(Re(n,e),t,s.type),yt(s)?(Ai(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ni(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=di(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ce(n.mergedAttrs,c.hostAttrs),ji(t,n,e,u,c),xi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Gr(e)?null:Di(n,i);o.push(c),s=Ei(n,u,s),a=Ei(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new y("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ce(n.mergedAttrs,n.attrs),i}function Si(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function ki(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ai(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function xi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yt(e)&&(n[""]=t)}}function Ni(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ji(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=bt(i.type)),s=new Ie(o,yt(i),null);t.blueprint[r]=s,n[r]=s,Si(t,e,0,r,di(t,n,i.hostVars,ei),i)}function Pi(t,e,n){const r=jt(e,t),i=wi(n),o=t[10],s=Vi(t,hi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Ri(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Di(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Mi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Li(t,e){const n=Rt(e,t);if(Lt(n)){const t=n[1];80&n[2]?gi(t,n,t.template,n[8]):n[5]>0&&Fi(n)}}function Fi(t){for(let n=Ir(t);null!==n;n=Tr(n))for(let t=ft;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];gi(t,e,t.template,e[8])}else e[5]>0&&Fi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Rt(e[n],t);Lt(r)&&r[5]>0&&Fi(r)}}function Ui(t,e){const n=Rt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),pi(r,n,n[8])}function Vi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function qi(t){for(;t;){t[2]|=64;const e=wr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Bi(t,e,n){const r=e[10];r.begin&&r.begin();try{gi(t,e,t.template,n)}catch(i){throw $i(e,i),i}finally{r.end&&r.end()}}function Hi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Dt(n),i=r[1];vi(i,r,i.template,n)}}(t[8])}function zi(t,e,n){re(0),e(t,n)}const Ki=(()=>Promise.resolve(null))();function Wi(t){return t[7]||(t[7]=[])}function Gi(t){return t.cleanup||(t.cleanup=[])}function $i(t,e){const n=t[9],r=n?n.get(gr,null):null;r&&r.handleError(e)}function Qi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Yi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=d(i,t):2==o&&(r=d(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Xi=new en("INJECTOR",-1);class Ji{get(t,e=fn){if(e===fn){const e=new Error(`NullInjectorError: No provider for ${f(t)}!`);throw e.name="NullInjectorError",e}return e}}const Zi=new en("Set Injector scope."),to={},eo={},no=[];let ro;function io(){return void 0===ro&&(ro=new Ji),ro}function oo(t,e=null,n=null,r){return new so(t,n,e||io(),r)}class so{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&sn(e,n=>this.processProvider(n,t,e)),sn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Xi,co(void 0,this));const o=this.records.get(Zi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:f(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=fn,n=N.Default){this.assertNotDestroyed();const r=mn(this);try{if(!(n&N.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof en)&&E(t);e=n&&this.injectableDefInScope(n)?co(ao(t),to):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&N.Self?io():this.parent).get(t,e=n&N.Optional&&e===fn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(f(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[pn]&&i.unshift(e[pn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=f(e);if(Array.isArray(e))i=e.map(f).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):f(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(dn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{mn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(f(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=v(t)))return!1;let r=C(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=C(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{sn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];sn(r,t=>this.processProvider(t,n,r||no))}}this.injectorDefTypes.add(o);const a=bt(o)||(()=>new o);this.records.set(o,co(a,to));const u=r.providers;if(null!=u&&!s){const e=t;sn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=ho(t=v(t))?t:v(t&&t.provide);const i=function(t,e,n){return lo(t)?co(void 0,t.useValue):co(uo(t),to)}(t);if(ho(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=co(void 0,to,!0),e.factory=()=>_n(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===to&&(e.value=eo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function ao(t){const e=E(t),n=null!==e?e.factory:bt(t);if(null!==n)return n;if(t instanceof en)throw new Error(`Token ${f(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${f(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[S]||t[A]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function uo(t,e,n){let r;if(ho(t)){const e=v(t);return bt(e)||ao(e)}if(lo(t))r=()=>v(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(..._n(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>bn(v(t.useExisting));else{const e=v(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return bt(e)||ao(e);r=()=>new e(..._n(t.deps))}var i;return r}function co(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function lo(t){return null!==t&&"object"==typeof t&&gn in t}function ho(t){return"function"==typeof t}const fo=function(t,e,n){return function(t,e=null,n=null,r){const i=oo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let po=(()=>{class t{static create(t,e){return Array.isArray(t)?fo(t,e,""):fo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=fn,t.NULL=new Ji,t.\u0275prov=I({token:t,providedIn:"any",factory:()=>bn(Xi)}),t.__NG_ELEMENT_ID__=-1,t})();function go(t,e){ge(Dt(t)[1],Wt())}function vo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(yt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=mo(t.inputs),e.declaredInputs=mo(t.declaredInputs),e.outputs=mo(t.outputs);const n=i.hostBindings;n&&_o(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&yo(t,o),s&&bo(t,s),h(t.inputs,i.inputs),h(t.declaredInputs,i.declaredInputs),h(t.outputs,i.outputs),yt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===vo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ce(i.hostAttrs,n=Ce(n,i.hostAttrs))}}(r)}function mo(t){return t===H?{}:t===K?[]:t}function yo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function bo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function _o(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let wo=null;function Io(){if(!wo){const t=B.Symbol;if(t&&t.iterator)wo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(wo=n)}}}return wo}class To{constructor(t){this.wrapped=t}static wrap(t){return new To(t)}static unwrap(t){return To.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof To}}function Eo(t){return!!Oo(t)&&(Array.isArray(t)||!(t instanceof Map)&&Io()in t)}function Oo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Co(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function So(t,e,n,r){const i=Ht();return Co(i,Zt(),e)&&(zt(),function(t,e,n,r,i,o){const s=jt(t,e);!function(t,e,n,r,i,o,s){if(null==o)kt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?b(o):s(o,r||"",i);kt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(pe(),i,t,e,n,r)),So}function ko(t,e,n,r){return Co(t,Zt(),n)?e+b(n)+r:ei}function Ao(t,e,n,r,i,o,s,a){const u=Ht(),c=zt(),l=t+ht,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=fi(e,t,4,s||null,Ft(c,a));Ci(e,n,l,Ft(c,u)),ge(e,l);const h=l.tViews=Ii(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];$t(h,!1);const f=u[11].createComment("");Dr(c,u,f,h),vr(f,u),Vi(u,u[l]=Mi(f,u,f,h)),mt(h)&&bi(c,u,h),null!=s&&_i(u,h,a)}function xo(t,e=N.Default){const n=Ht();return null===n?bn(t,e):qe(Wt(),n,v(t),e)}function No(t,e,n){const r=Ht();return Co(r,Zt(),e)&&Oi(zt(),pe(),r,t,e,r[11],n,!1),No}function jo(t,e,n,r,i){const o=i?"class":"style";Qi(t,n,e.inputs[o],o,r)}function Po(t,e,n,r){const i=Ht(),o=zt(),s=ht+t,a=i[11],u=i[s]=Cr(a,e,qt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=fi(e,t,2,i,Ft(a,o));return Ci(e,n,u,Ft(a,s)),null!==u.attrs&&Yi(u,u.attrs,!1),null!==u.mergedAttrs&&Yi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];$t(c,!0);const l=c.mergedAttrs;null!==l&&Te(a,u,l);const h=c.classes;null!==h&&Hr(a,u,h);const f=c.styles;null!==f&&Br(a,u,f),64!=(64&c.flags)&&Dr(o,i,u,c),0===qt.lFrame.elementDepthCount&&vr(u,i),qt.lFrame.elementDepthCount++,mt(c)&&(bi(o,i,c),yi(o,c,i)),null!==r&&_i(i,c)}function Ro(){let t=Wt();Qt()?Yt():(t=t.parent,$t(t,!1));const e=t;qt.lFrame.elementDepthCount--;const n=zt();n.firstCreatePass&&(ge(n,t),gt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&jo(n,e,Ht(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&jo(n,e,Ht(),e.stylesWithoutHost,!1)}function Do(t,e,n,r){Po(t,e,n,r),Ro()}function Mo(t,e,n){const r=Ht(),i=zt(),o=t+ht,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Ft(o,r),a=fi(e,t,8,"ng-container",s);return null!==s&&Yi(a,s,!0),Ci(e,n,a,Ft(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];$t(s,!0);const a=r[o]=r[11].createComment("");Dr(i,r,a,s),vr(a,r),mt(s)&&(bi(i,r,s),yi(i,s,r)),null!=n&&_i(r,s)}function Lo(){let t=Wt();const e=zt();Qt()?Yt():(t=t.parent,$t(t,!1)),e.firstCreatePass&&(ge(e,t),gt(t)&&e.queries.elementEnd(t))}function Fo(){return Ht()}function Uo(t){return!!t&&"function"==typeof t.then}function Vo(t){return!!t&&"function"==typeof t.subscribe}const qo=Vo;function Bo(t,e,n=!1,r){const i=Ht(),o=zt(),s=Wt();return function(t,e,n,r,i,o,s=!1,a){const u=mt(r),c=t.firstCreatePass&&Gi(t),l=Wi(e);let h=!0;if(3&r.type){const f=jt(r,e),d=a?a(f):H,p=d.target||f,g=l.length,v=a?t=>a(xt(t[r.index])).target:r.index;if(kt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=zo(r,e,0,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,v,g,g+1)}}else o=zo(r,e,0,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,v,g,s)}else o=zo(r,e,0,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Bo}function Ho(t,e,n,r){try{return!1!==n(r)}catch(i){return $i(t,i),!1}}function zo(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Rt(t.index,e):e;0==(32&e[2])&&qi(s);let a=Ho(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=Ho(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Ko(t=1){return function(t){return(qt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,qt.lFrame.contextLView))[8]}(t)}function Wo(t,e,n,r,i){const o=Ht(),s=ko(o,e,n,r);return s!==ei&&Oi(zt(),pe(),o,t,s,o[11],i,!1),Wo}function Go(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?oi(o):ai(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];$o(t[a],e)&&(u=!0,t[a+1]=r?ci(n):si(n)),a=r?oi(n):ai(n)}u&&(t[n+1]=r?si(o):ci(o))}function $o(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&hn(t,e)>=0}function Qo(t,e){return function(t,e,n,r){const i=Ht(),o=zt(),s=function(t){const e=qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[fe()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=Xo(n=Yo(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Yo(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==ai(r))return t[oi(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Yo(null,t,e,n[1],r),n=Xo(n,e.attrs,r),function(t,e,n,r){t[oi(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Xo(r,t[o].hostAttrs,true);return Xo(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=oi(s),u=ai(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||hn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=oi(t[a+1]);t[r+1]=ii(e,a),0!==e&&(t[e+1]=ui(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ii(a,0),0!==a&&(t[a+1]=ui(t[a+1],r)),a=r;else t[r+1]=ii(u,0),0===a?a=r:t[u+1]=ui(t[u+1],r),u=r;l&&(t[r+1]=si(t[r+1])),Go(t,c,r,!0),Go(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&hn(o,e)>=0&&(n[r+1]=ci(n[r+1]))}(e,c,t,r),s=ii(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==ei&&Co(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Zo(1==(1&c)?Jo(u,e,n,i,ai(c),s):void 0)||(Zo(o)||function(t){return 2==(2&t)}(c)&&(o=Jo(u,null,n,i,a,s)),function(t,e,n,r,i){const o=kt(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,Nt(fe(),n),i,o))}(o,o.data[fe()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=f(Pn(t))),t}(e),true,s)}(t,e),Qo}function Yo(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Xo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Xo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),cn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Jo(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===ei&&(l=c?z:void 0);let h=c?ln(l,r):u===r?l:void 0;if(o&&!Zo(h)&&(h=ln(e,r)),Zo(h)&&(a=h,s))return a;const f=t[i+1];i=s?oi(f):ai(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=ln(t,r))}return a}function Zo(t){return void 0!==t}function ts(t,e=""){const n=Ht(),r=zt(),i=t+ht,o=r.firstCreatePass?fi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return kt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Dr(r,n,s,o),$t(o,!1)}function es(t){return ns("",t,""),es}function ns(t,e,n){const r=Ht(),i=ko(r,t,e,n);return i!==ei&&function(t,e,n){const r=Nt(e,t);!function(t,e,n){kt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,fe(),i),ns}function rs(t,e,n){const r=Ht();return Co(r,Zt(),e)&&Oi(zt(),pe(),r,t,e,r[11],n,!0),rs}const is=void 0;var os=["en",[["a","p"],["AM","PM"],is],[["AM","PM"],is,is],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],is,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],is,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",is,"{1} 'at' {0}",is],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ss={};function as(t,e,n){"string"!=typeof e&&(n=e,e=t[fs.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ss[e]=t,n&&(ss[e][fs.ExtraData]=n)}function us(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=hs(e);if(n)return n;const r=e.split("-")[0];if(n=hs(r),n)return n;if("en"===r)return os;throw new Error(`Missing locale data for the locale "${t}".`)}function cs(t){return us(t)[fs.CurrencyCode]||null}function ls(t){return us(t)[fs.PluralCase]}function hs(t){return t in ss||(ss[t]=B.ng&&B.ng.common&&B.ng.common.locales&&B.ng.common.locales[t]),ss[t]}var fs=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ds="en-US";let ps=ds;function gs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(ps=t.toLowerCase().replace(/_/g,"-"))}function vs(t,e,n,r,i){if(t=v(t),Array.isArray(t))for(let o=0;o<t.length;o++)vs(t[o],e,n,r,i);else{const o=zt(),s=Ht();let a=ho(t)?t:v(t.provide),u=uo(t);const c=Wt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(ho(t)||!t.multi){const r=new Ie(u,i,xo),d=bs(a,e,i?l:l+f,h);-1===d?(Fe(Re(c,s),o,a),ms(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=bs(a,e,l+f,h),p=bs(a,e,l,l+f),g=d>=0&&n[d],v=p>=0&&n[p];if(i&&!v||!i&&!g){Fe(Re(c,s),o,a);const l=function(t,e,n,r,i){const o=new Ie(t,n,xo);return o.multi=[],o.index=e,o.componentProviders=0,ys(o,i,r&&!n),o}(i?ws:_s,n.length,i,r,u);!i&&v&&(n[p].providerFactory=l),ms(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else ms(o,t,d>-1?d:p,ys(n[i?p:d],u,!i&&r));!i&&r&&v&&n[p].componentProviders++}}}function ms(t,e,n,r){const i=ho(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ys(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function bs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function _s(t,e,n,r){return Is(this.multi,[])}function ws(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=We(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Is(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Is(i,o);return o}function Is(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ts(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=zt();if(r.firstCreatePass){const i=yt(t);vs(n,r.data,r.blueprint,i,!0),vs(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Es{}class Os{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${f(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Cs=(()=>{class t{}return t.NULL=new Os,t})();function Ss(...t){}function ks(t,e){return new xs(jt(t,e))}const As=function(){return ks(Wt(),Ht())};let xs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=As,t})();function Ns(t){return t instanceof xs?t.nativeElement:t}class js{}let Ps=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Rs(),t})();const Rs=function(){const t=Ht(),e=Rt(Wt().index,t);return function(t){return t[11]}(dt(e)?e:t)};let Ds=(()=>{class t{}return t.\u0275prov=I({token:t,providedIn:"root",factory:()=>null}),t})();class Ms{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ls=new Ms("11.2.14");class Fs{constructor(){}supports(t){return Eo(t)}create(t){return new Vs(t)}}const Us=(t,e)=>e;class Vs{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Us}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<zs(n,r,i)?e:n,s=zs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Eo(t))throw new Error(`Error trying to diff '${f(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Io()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new qs(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Hs),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Hs),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class qs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Bs{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Hs{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Bs,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ks{constructor(){}supports(t){return t instanceof Map||Oo(t)}create(){return new Ws}}class Ws{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Oo(t)))throw new Error(`Error trying to diff '${f(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Gs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Gs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $s(){return new Qs([new Fs])}let Qs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||$s()),deps:[[t,new En,new Tn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=I({token:t,providedIn:"root",factory:$s}),t})();function Ys(){return new Xs([new Ks])}let Xs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ys()),deps:[[t,new En,new Tn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=I({token:t,providedIn:"root",factory:Ys}),t})();function Js(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(xt(o)),pt(o))for(let t=ft;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Js(e[1],e,n,r)}const s=n.type;if(8&s)Js(t,e,n.child,r);else if(32&s){const t=_r(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Lr(e,n);if(Array.isArray(t))r.push(...t);else{const n=wr(e[16]);Js(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Zs{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Js(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(pt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(kr(t,n),un(e,n))}this._attachedToViewContainer=!1}Ar(this._lView[1],this._lView)}onDestroy(t){Ti(this._lView[1],this._lView,null,t)}markForCheck(){qi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Bi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Jt(!0);try{Bi(t,e,n)}finally{Jt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Vr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ta extends Zs{constructor(t){super(t),this._view=t}detectChanges(){Hi(this._view)}checkNoChanges(){!function(t){Jt(!0);try{Hi(t)}finally{Jt(!1)}}(this._view)}get context(){return null}}const ea=ra;let na=(()=>{class t{}return t.__NG_ELEMENT_ID__=ea,t.__ChangeDetectorRef__=!0,t})();function ra(t=!1){return function(t,e,n){if(!n&&vt(t)){const n=Rt(t.index,e);return new Zs(n,n)}return 47&t.type?new Zs(e[16],e):null}(Wt(),Ht(),t)}const ia=[new Ks],oa=new Qs([new Fs]),sa=new Xs(ia),aa=function(){return ha(Wt(),Ht())};let ua=(()=>{class t{}return t.__NG_ELEMENT_ID__=aa,t})();const ca=ua,la=class extends ca{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=hi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),pi(e,n,t),new Zs(n)}};function ha(t,e){return 4&t.type?new la(e,t,ks(t,e)):null}class fa{}class da{}const pa=function(){return _a(Wt(),Ht())};let ga=(()=>{class t{}return t.__NG_ELEMENT_ID__=pa,t})();const va=ga,ma=class extends va{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return ks(this._hostTNode,this._hostLView)}get injector(){return new Qe(this._hostTNode,this._hostLView)}get parentInjector(){const t=Le(this._hostTNode,this._hostLView);if(ke(t)){const e=xe(t,this._hostLView),n=Ae(t);return new Qe(e[1].data[n+8],e)}return new Qe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ya(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ft}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(fa,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(pt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ma(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ft+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ft?(e[4]=n[i],an(n,ft+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Fr(i,o),a=n[11],u=Rr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Vr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),an(ba(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ya(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=kr(this._lContainer,e);n&&(un(ba(this._lContainer),e),Ar(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=kr(this._lContainer,e);return n&&null!=un(ba(this._lContainer),e)?new Zs(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ya(t){return t[8]}function ba(t){return t[8]||(t[8]=[])}function _a(t,e){let n;const r=e[t.index];if(pt(r))n=r;else{let i;if(8&t.type)i=xt(r);else{const n=e[11];i=n.createComment("");const r=jt(t,e);Nr(n,Rr(n,r),i,function(t,e){return kt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Mi(r,e,i,t),Vi(e,n)}return new ma(n,t,e)}const wa={};class Ia extends Cs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ct(t);return new Oa(e,this.ngModule)}}function Ta(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ea=new en("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>mr});class Oa extends Es{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ti).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ta(this.componentDef.inputs)}get outputs(){return Ta(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,wa,i);return o!==wa||r===wa?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(js,At),s=i.get(Ds,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(kt(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Cr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:mr,clean:Ki,playerHandler:null,flags:0},f=Ii(0,null,null,1,0,null,null,null,null,null),d=hi(null,f,h,l,null,null,o,a,s,i);let p,g;se(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=fi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Yi(a,u,!0),null!==t&&(Te(i,t,u),null!==a.classes&&Hr(i,t,a.classes),null!==a.styles&&Br(i,t,a.styles)));const c=r.createRenderer(t,e),l=hi(n,wi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Fe(Re(a,n),s,e.type),Ai(s,a),Ni(a,n.length,1)),Vi(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)Te(a,c,["ng-version",Ls.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Yr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Te(a,c,t),e&&e.length>0&&Hr(a,c,e.join(" "))}if(g=Pt(f,ht),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Wt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ji(t,r,e,di(t,e,1,null),n));const i=We(e,t,r.directiveStart,r);vr(i,e);const o=jt(r,e);return o&&vr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Wt();e.contentQueries(1,s,t.directiveStart)}const a=Wt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(de(a.index),Si(n[1],a,0,a.directiveStart,a.directiveEnd,e),ki(e,s)),s}(t,this.componentDef,d,h,[go]),pi(f,d,null)}finally{he()}return new Ca(this.componentType,p,ks(g,d),d,g)}}class Ca extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new ta(r),this.componentType=t}get injector(){return new Qe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Sa=new Map;class ka extends fa{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ia(this);const n=lt(t),r=t[Y]||null;r&&gs(r),this._bootstrapComponents=yr(n.bootstrap),this._r3Injector=oo(t,e,[{provide:fa,useValue:this},{provide:Cs,useValue:this.componentFactoryResolver}],f(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=po.THROW_IF_NOT_FOUND,n=N.Default){return t===po||t===fa||t===Xi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Aa extends da{constructor(t){super(),this.moduleType=t,null!==lt(t)&&function(t){const e=new Set;!function t(n){const r=lt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${f(e)} vs ${f(e.name)}`)}(i,Sa.get(i),n),Sa.set(i,n));const o=yr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new ka(this.moduleType,t)}}function xa(t,e){const n=zt();let r;const i=t+ht;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new y("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=bt(r.type)),s=P(xo);try{const t=je(!1),e=o();return je(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Ht(),i,e),e}finally{P(s)}}function Na(t,e,n){const r=t+ht,i=Ht(),o=function(t,e){return t[e]}(i,r);return function(t,e){return To.isWrapped(e)&&(e=To.unwrap(e),t[qt.lFrame.bindingIndex]=ei),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?function(t,e,n,r,i,o){const s=e+n;return Co(t,s,i)?function(t,e,n){return t[e]=n}(t,s+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===ei?void 0:n}(t,s+1)}(i,function(){const t=qt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,o):o.transform(n))}function ja(t){return e=>{setTimeout(t,void 0,e)}}const Pa=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=ja(u),a&&(a=ja(a)),c&&(c=ja(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.a&&t.add(l),l}};function Ra(){return this._results[Io()]()}class Da{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Io(),n=Da.prototype;n[e]||(n[e]=Ra)}get changes(){return this._changes||(this._changes=new Pa)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=on(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ma{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ma(this.queryList)}setDirty(){this.queryList.setDirty()}}class La{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new La(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==$a(t,e).matches&&this.queries[e].setDirty()}}class Fa{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Ua{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Ua(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Va{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Va(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,qa(e,i)),this.matchTNodeWithReadOption(t,e,Ke(e,t,i,!1,!1))}else n===ua?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ke(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===xs||r===ga||r===ua&&4&e.type)this.addMatch(e.index,-2);else{const n=Ke(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function qa(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ba(t,e,n,r){return-1===n?function(t,e){return 11&t.type?ks(t,e):4&t.type?ha(t,e):null}(e,t):-2===n?function(t,e,n){return n===xs?ks(e,t):n===ua?ha(e,t):n===ga?_a(e,t):void 0}(t,e,r):We(t,t[1],n,e)}function Ha(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Ba(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function za(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Ha(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ft;t<s.length;t++){const e=s[t];e[17]===e[3]&&za(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];za(n[1],n,i,r)}}}}}return r}function Ka(t){const e=Ht(),n=zt(),r=ne();re(r+1);const i=$a(n,r);if(t.dirty&&Mt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?za(n,e,r,[]):Ha(n,e,i,r);t.reset(o,Ns),t.notifyOnChanges()}return!0}return!1}function Wa(t,e,n,r){const i=zt();if(i.firstCreatePass){const o=Wt();(function(t,e,n){null===t.queries&&(t.queries=new Ua),t.queries.track(new Va(e,n))})(i,new Fa(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Da(4==(4&n));Ti(t,e,r,r.destroy),null===e[19]&&(e[19]=new La),e[19].queries.push(new Ma(r))}(i,Ht(),n)}function Ga(){return t=Ht(),e=ne(),t[19].queries[e].queryList;var t,e}function $a(t,e){return t.queries.getByIndex(e)}function Qa(t=N.Default){const e=ra(!0);if(null!=e||t&N.Optional)return e;w("ChangeDetectorRef")}const Ya=new en("Application Initializer");let Xa=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Ss,this.reject=Ss,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Uo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(bn(Ya,8))},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t})();const Ja=new en("AppId"),Za={provide:Ja,useFactory:function(){return`${tu()}${tu()}${tu()}`},deps:[]};function tu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const eu=new en("Platform Initializer"),nu=new en("Platform ID"),ru=new en("appBootstrapListener");let iu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t})();const ou=new en("LocaleId"),su=new en("DefaultCurrencyCode");class au{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const uu=function(t){return new Aa(t)},cu=uu,lu=function(t){return Promise.resolve(uu(t))},hu=function(t){const e=uu(t),n=yr(lt(t).declarations).reduce((t,e)=>{const n=ct(e);return n&&t.push(new Oa(n)),t},[]);return new au(e,n)},fu=hu,du=function(t){return Promise.resolve(hu(t))};let pu=(()=>{class t{constructor(){this.compileModuleSync=cu,this.compileModuleAsync=lu,this.compileModuleAndAllComponentsSync=fu,this.compileModuleAndAllComponentsAsync=du}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t})();const gu=(()=>Promise.resolve(0))();function vu(t){"undefined"==typeof Zone?gu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class mu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pa(!1),this.onMicrotaskEmpty=new Pa(!1),this.onStable=new Pa(!1),this.onError=new Pa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=B.requestAnimationFrame,e=B.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(B,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,_u(t),bu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),_u(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return wu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Iu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return wu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Iu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,_u(t),bu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(mu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,yu,Ss,Ss);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const yu={};function bu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function _u(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function wu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Iu(t){t._nesting--,bu(t)}class Tu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pa,this.onMicrotaskEmpty=new Pa,this.onStable=new Pa,this.onError=new Pa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Eu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mu.assertNotInAngularZone(),vu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())vu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(bn(mu))},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t})(),Ou=(()=>{class t{constructor(){this._applications=new Map,Au.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Au.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t})();class Cu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Su(t){Au=t}let ku,Au=new Cu,xu=!0,Nu=!1;function ju(){return Nu=!0,xu}function Pu(){if(Nu)throw new Error("Cannot enable prod mode after platform setup.");xu=!1}const Ru=new en("AllowMultipleToken");class Du{constructor(t,e){this.name=t,this.token=e}}function Mu(t,e,n=[]){const r=`Platform: ${e}`,i=new en(r);return(e=[])=>{let o=Lu();if(!o||o.injector.get(Ru,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Zi,useValue:"platform"});!function(t){if(ku&&!ku.destroyed&&!ku.injector.get(Ru,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ku=t.get(Fu);const e=t.get(eu,null);e&&e.forEach(t=>t())}(po.create({providers:t,name:r}))}return function(t){const e=Lu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Lu(){return ku&&!ku.destroyed?ku:null}let Fu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Tu:("zone.js"===t?void 0:t)||new mu({enableLongStackTrace:ju(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:mu,useValue:n}];return n.run(()=>{const e=po.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(gr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{qu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Uo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Xa);return t.runInitializers(),t.donePromise.then(()=>(gs(i.injector.get(ou,ds)||ds),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Uu({},e);return function(t,e,n){const r=new Aa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Vu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${f(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(bn(po))},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t})();function Uu(t,e){return Array.isArray(e)?e.reduce(Uu,t):Object.assign(Object.assign({},t),e)}let Vu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),h=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{mu.assertNotInAngularZone(),vu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{mu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(l,h.pipe(t=>{return Object(u.a)()((e=c,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,a.b);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Es?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(fa),i=n.create(po.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Eu,null),a=s&&i.injector.get(Ou);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),qu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;qu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ru,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(bn(mu),bn(po),bn(gr),bn(Cs),bn(Xa))},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t})();function qu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Bu{}class Hu{}const zu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Ku=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||zu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Wu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Wu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(bn(pu),bn(Hu,8))},t.\u0275prov=I({token:t,factory:t.\u0275fac}),t})();function Wu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Gu=function(t){return null},$u=Mu(null,"core",[{provide:nu,useValue:"unknown"},{provide:Fu,deps:[po]},{provide:Ou,deps:[]},{provide:iu,deps:[]}]),Qu=[{provide:Vu,useClass:Vu,deps:[mu,po,gr,Cs,Xa]},{provide:Ea,deps:[mu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Xa,useClass:Xa,deps:[[new Tn,Ya]]},{provide:pu,useClass:pu,deps:[]},Za,{provide:Qs,useFactory:function(){return oa},deps:[]},{provide:Xs,useFactory:function(){return sa},deps:[]},{provide:ou,useFactory:function(t){return gs(t=t||"undefined"!=typeof $localize&&$localize.locale||ds),t},deps:[[new In(ou),new Tn,new En]]},{provide:su,useValue:"USD"}];let Yu=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(bn(Vu))},t.\u0275mod=it({type:t}),t.\u0275inj=T({providers:Qu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mCNh:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("SpAZ");function i(...t){return o(t)}function o(t){return 0===t.length?r.a:1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}}},mrSG:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return l}),n.d(e,"__generator",function(){return h}),n.d(e,"__createBinding",function(){return f}),n.d(e,"__exportStar",function(){return d}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return g}),n.d(e,"__spread",function(){return v}),n.d(e,"__spreadArrays",function(){return m}),n.d(e,"__spreadArray",function(){return y}),n.d(e,"__await",function(){return b}),n.d(e,"__asyncGenerator",function(){return _}),n.d(e,"__asyncDelegator",function(){return w}),n.d(e,"__asyncValues",function(){return I}),n.d(e,"__makeTemplateObject",function(){return T}),n.d(e,"__importStar",function(){return O}),n.d(e,"__importDefault",function(){return C}),n.d(e,"__classPrivateFieldGet",function(){return S}),n.d(e,"__classPrivateFieldSet",function(){return k});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var f=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function d(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||f(e,t,n)}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}function m(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}function b(t){return this instanceof b?(this.v=t,this):new b(t)}function _(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||a(t,e)})})}function a(t,e){try{(n=i[t](e)).value instanceof b?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:b(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function I(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function T(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var E=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&f(e,t,n);return E(e,t),e}function C(t){return t&&t.__esModule?t:{default:t}}function S(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function k(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},nbvr:function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function r(t,e,r){var i,o=new Promise(function(o,s){n(i=t[e].apply(t,r)).then(o,s)});return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then(function(t){if(t)return new l(t,i.request)})}function o(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})})}function s(t,e,n,i){i.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})})}function a(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})})}function u(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})})}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}function d(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function p(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then(function(t){if(t)return new l(t,e._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[h,c].forEach(function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[c,h].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise(function(i){n.iterateCursor(t,function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)})})})}),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new d(o.result,t.oldVersion,o.transaction))}),i.then(function(t){return new p(t)})},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.r(e),n.d(e,"LogLevel",function(){return s}),n.d(e,"Logger",function(){return h}),n.d(e,"setLogLevel",function(){return f}),n.d(e,"setUserLogHandler",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.r(e),n.d(e,"CONSTANTS",function(){return i}),n.d(e,"Deferred",function(){return d}),n.d(e,"ErrorFactory",function(){return N}),n.d(e,"FirebaseError",function(){return x}),n.d(e,"MAX_VALUE_MILLIS",function(){return st}),n.d(e,"RANDOM_FACTOR",function(){return at}),n.d(e,"Sha1",function(){return $}),n.d(e,"areCookiesEnabled",function(){return k}),n.d(e,"assert",function(){return o}),n.d(e,"assertionError",function(){return s}),n.d(e,"async",function(){return X}),n.d(e,"base64",function(){return u}),n.d(e,"base64Decode",function(){return l}),n.d(e,"base64Encode",function(){return c}),n.d(e,"calculateBackoffMillis",function(){return ut}),n.d(e,"contains",function(){return q}),n.d(e,"createMockUserToken",function(){return p}),n.d(e,"createSubscribe",function(){return Q}),n.d(e,"decode",function(){return M}),n.d(e,"deepCopy",function(){return h}),n.d(e,"deepExtend",function(){return f}),n.d(e,"errorPrefix",function(){return tt}),n.d(e,"extractQuerystring",function(){return G}),n.d(e,"getGlobal",function(){return A}),n.d(e,"getModularInstance",function(){return lt}),n.d(e,"getUA",function(){return g}),n.d(e,"isAdmin",function(){return V}),n.d(e,"isBrowser",function(){return y}),n.d(e,"isBrowserExtension",function(){return b}),n.d(e,"isElectron",function(){return w}),n.d(e,"isEmpty",function(){return H}),n.d(e,"isIE",function(){return I}),n.d(e,"isIndexedDBAvailable",function(){return C}),n.d(e,"isMobileCordova",function(){return v}),n.d(e,"isNode",function(){return m}),n.d(e,"isNodeSdk",function(){return E}),n.d(e,"isReactNative",function(){return _}),n.d(e,"isSafari",function(){return O}),n.d(e,"isUWP",function(){return T}),n.d(e,"isValidFormat",function(){return U}),n.d(e,"isValidTimestamp",function(){return L}),n.d(e,"issuedAtTime",function(){return F}),n.d(e,"jsonEval",function(){return R}),n.d(e,"map",function(){return z}),n.d(e,"ordinal",function(){return ct}),n.d(e,"querystring",function(){return K}),n.d(e,"querystringDecode",function(){return W}),n.d(e,"safeGet",function(){return B}),n.d(e,"stringLength",function(){return ot}),n.d(e,"stringToByteArray",function(){return it}),n.d(e,"stringify",function(){return D}),n.d(e,"validateArgCount",function(){return Z}),n.d(e,"validateCallback",function(){return nt}),n.d(e,"validateContextObject",function(){return rt}),n.d(e,"validateIndexedDBOpenable",function(){return S}),n.d(e,"validateNamespace",function(){return et});var r=n("mrSG"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){var e=a(t);return u.encodeByteArray(e,!0)},l=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function h(t){return f(void 0,t)}function f(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=f(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function p(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Object(r.__assign)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[u.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),u.encodeString(JSON.stringify(s),!1),""].join(".")}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function v(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function m(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function b(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function _(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function w(){return g().indexOf("Electron/")>=0}function I(){var t=g();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function T(){return g().indexOf("MSAppHost/")>=0}function E(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function O(){return!m()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C(){return"indexedDB"in self&&null!=indexedDB}function S(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}})}function k(){return!(!navigator||!navigator.cookieEnabled)}function A(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}var x=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,N.prototype.create),o}return Object(r.__extends)(e,t),e}(Error),N=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?j(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new x(i,a,r);return u},t}();function j(t,e){return t.replace(P,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var P=/\{\$([^}]+)}/g;function R(t){return JSON.parse(t)}function D(t){return JSON.stringify(t)}var M=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=R(l(o[0])||""),n=R(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},L=function(t){var e=M(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},F=function(t){var e=M(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},U=function(t){var e=M(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},V=function(t){var e=M(t).claims;return"object"==typeof e&&!0===e.admin};function q(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function B(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function H(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function z(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function K(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}function W(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("="),r=n[1];e[decodeURIComponent(n[0])]=decodeURIComponent(r)}}),e}function G(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var $=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function Q(t,e){var n=new Y(t,e);return n.subscribe.bind(n)}var Y=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=J),void 0===r.error&&(r.error=J),void 0===r.complete&&(r.complete=J);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function X(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}}function J(){}var Z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function tt(t,e){return t+" failed: "+e+" argument "}function et(t,e,n){if((!n||e)&&"string"!=typeof e)throw new Error(tt(t,"namespace")+"must be a valid firebase namespace.")}function nt(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(tt(t,e)+"must be a valid function.")}function rt(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(tt(t,e)+"must be a valid context object.")}var it=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},ot=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},st=144e5,at=.5;function ut(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(at*r*(Math.random()-.5)*2);return Math.min(st,r+i)}function ct(t){return Number.isFinite(t)?t+function(t){var e=(t=Math.abs(t))%100;if(e>=10&&e<=20)return"th";var n=t%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"}(t):""+t}function lt(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return C}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return y}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return m}),n.d(e,"f",function(){return E}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return v}),n.d(e,"j",function(){return I});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],v=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),m=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},y=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),_=new u.P("6.1.5");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&T("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const I=()=>{T("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},T=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function E(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&T("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const O={provide:class{},useFactory:w,deps:[y,u.A,[new u.B,b]]};let C=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:y,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Ub(u.C))},t.\u0275mod=u.Jb({type:t}),t.\u0275inj=u.Ib({providers:[O]}),t})()}).call(this,n("3UD+")(t))},t6oF:function(t,e,n){"use strict";var r=n("zIRd");(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function i(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e(function(t,e){i=t,o=e});return this.Qa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=o(t),s=r.next();!s.done;s=r.next())i(s.value).Qa(e,n)})},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e(function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).Qa(o(s.length-1),e),r=n.next()}while(!r.done)})},e});var s=s||{},a=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function h(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==f(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function v(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++y)}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function _(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:_).apply(null,arguments)}function I(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now;function E(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function O(t){return t}function C(t,e,n){this.code=A+t,this.message=e||x[t]||"",this.a=n||null}function S(t){var e=t&&t.code;return e?new C(e.substring(A.length),t.message,t.serverResponse):null}E(C,Error),C.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},C.prototype.toJSON=function(){return this.w()};var k,A="auth/",x={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function j(t){for(var e in N)if(N[e].id===t)return{firebaseEndpoint:(t=N[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function P(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function R(t){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function D(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function M(t,e){throw new D("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function L(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function F(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function U(){this.b=this.a=null}k=j("__EID__")?"__EID__":void 0,E(R,Error),R.prototype.name="CustomError",E(D,R),D.prototype.name="AssertionError",L.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new L(function(){return new B},function(t){t.reset()});function q(){var t=ye,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}U.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var H=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},K=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},W=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},G=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function $(t,e){return 0<=H(t,e)}function Q(t,e){var n;return(n=0<=(e=H(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function X(t){return Array.prototype.concat.apply([],arguments)}function J(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Z,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},et=/&/g,nt=/</g,rt=/>/g,it=/"/g,ot=/'/g,st=/\x00/g,at=/[\x00&<>"']/;function ut(t,e){return-1!=t.indexOf(e)}function ct(t,e){return t<e?-1:t>e?1:0}t:{var lt=a.navigator;if(lt){var ht=lt.userAgent;if(ht){Z=ht;break t}}Z=""}function ft(t){return ut(Z,t)}function dt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function pt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var vt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<vt.length;o++)n=vt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function yt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function bt(t,e){this.a=t===Tt&&e||"",this.b=It}function _t(t){return t instanceof bt&&t.constructor===bt&&t.b===It?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}bt.prototype.sa=!0,bt.prototype.ra=function(){return this.a},bt.prototype.toString=function(){return"Const{"+this.a+"}"};var wt,It={},Tt={};function Et(){if(void 0===wt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:O,createScript:O,createScriptURL:O})}catch(n){a.console&&a.console.error(n.message)}wt=t}else wt=t}return wt}function Ot(t,e){this.a=e===xt?t:""}function Ct(t){return t instanceof Ot&&t.constructor===Ot?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function St(t,e){var n=_t(t);if(!At.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Et();return new Ot(t=e?e.createScriptURL(t):t,xt)}(t=n.replace(kt,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof bt?_t(t):encodeURIComponent(String(t))}))}Ot.prototype.sa=!0,Ot.prototype.ra=function(){return this.a.toString()},Ot.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var kt=/%{(\w+)}/g,At=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,xt={};function Nt(t,e){this.a=e===Ft?t:""}function jt(t){return t instanceof Nt&&t.constructor===Nt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Nt.prototype.sa=!0,Nt.prototype.ra=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Pt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Rt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Dt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Mt(t){if(t instanceof Nt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t))t=new Nt(t,Ft);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Rt);t=e&&Pt.test(e[1])?new Nt(t,Ft):null}return t}function Lt(t){return t instanceof Nt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t)||(t="about:invalid#zClosurez"),new Nt(t,Ft))}var Ft={},Ut=new Nt("about:invalid#zClosurez",Ft);function Vt(t,e,n){this.a=n===qt?t:""}Vt.prototype.sa=!0,Vt.prototype.ra=function(){return this.a.toString()},Vt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var qt={};function Bt(t,e,n,r){return t=t instanceof Nt?t:Lt(t),e=e||a,n=n instanceof bt?_t(n):n||"",e.open(jt(t),n,r,void 0)}function Ht(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function zt(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(et,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(nt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(rt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(it,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ot,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function Kt(t){return Kt[" "](t),t}Kt[" "]=h;var Wt,Gt,$t=ft("Opera"),Qt=ft("Trident")||ft("MSIE"),Yt=ft("Edge"),Xt=Yt||Qt,Jt=ft("Gecko")&&!(ut(Z.toLowerCase(),"webkit")&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),Zt=ut(Z.toLowerCase(),"webkit")&&!ft("Edge");function te(){var t=a.document;return t?t.documentMode:void 0}t:{var ee="",ne=(Gt=Z,Jt?/rv:([^\);]+)(\)|;)/.exec(Gt):Yt?/Edge\/([\d\.]+)/.exec(Gt):Qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gt):Zt?/WebKit\/(\S+)/.exec(Gt):$t?/(?:Version)[ \/]?(\S+)/.exec(Gt):void 0);if(ne&&(ee=ne?ne[1]:""),Qt){var re=te();if(null!=re&&re>parseFloat(ee)){Wt=String(re);break t}}Wt=ee}var ie={};function oe(t){return function(t,e){var n=ie;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=tt(String(Wt)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ct(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ct(0==s[2].length,0==a[2].length)||ct(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var se=a.document&&Qt&&(te()||parseInt(Wt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Gt){}var ae=!Qt||9<=Number(se);function ue(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ce(t,e){dt(e,function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:fe.hasOwnProperty(n)?t.setAttribute(fe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var le,he,fe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function de(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||g(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(g(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}z(s?J(o):o,r)}}}function pe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ge(t){a.setTimeout(function(){throw t},0)}function ve(t,e){he||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);he=function(){t.then(be)}}else he=function(){var t=be;!p(a.setImmediate)||a.Window&&a.Window.prototype&&!ft("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(le||(le=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ft("Presto")&&(t=function(){var t=pe(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=w(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ft("Trident")&&!ft("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),le(t)):a.setImmediate(t)}}(),me||(he(),me=!0),ye.add(t,e)}var me=!1,ye=new U;function be(){for(var t;t=q();){try{t.a.call(t.b)}catch(e){ge(e)}F(V,t)}me=!1}function _e(t,e){if(this.a=we,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,function(t){Re(n,Ie,t)},function(t){if(!(t instanceof qe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}Re(n,Te,t)})}catch(r){Re(this,Te,r)}}var we=0,Ie=2,Te=3;function Ee(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ee.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Oe=new L(function(){return new Ee},function(t){t.reset()});function Ce(t,e,n){var r=Oe.get();return r.g=t,r.b=e,r.f=n,r}function Se(t){if(t instanceof _e)return t;var e=new _e(h);return Re(e,Ie,t),e}function ke(t){return new _e(function(e,n){n(t)})}function Ae(t,e,n){De(t,e,n,null)||ve(I(e,t))}function xe(t){return new _e(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ae(t[o],I(i,o,!0),I(i,o,!1));else e(r)})}function Ne(t,e){if(t.a==we)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==we&&1==r?Ne(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Le(n),Fe(n,i,Te,e)))}t.c=null}else Re(t,Te,e)}function je(t,e){t.b||t.a!=Ie&&t.a!=Te||Me(t),t.f?t.f.next=e:t.b=e,t.f=e}function Pe(t,e,n,r){var i=Ce(null,null,null);return i.a=new _e(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof qe?o(e):t(i)}catch(s){o(s)}}:o}),i.a.c=t,je(t,i),i.a}function Re(t,e,n){t.a==we&&(t===n&&(e=Te,n=new TypeError("Promise cannot resolve to itself")),t.a=1,De(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Me(t),e!=Te||n instanceof qe||function(t,e){t.g=!0,ve(function(){t.g&&Ve.call(null,e)})}(t,n)))}function De(t,e,n,r){if(t instanceof _e)return je(t,Ce(e||h,n||null,r)),!0;if(P(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(a){o(a)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Me(t){t.h||(t.h=!0,ve(t.gc,t))}function Le(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==Te&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ue(e,n,r);else try{e.c?e.g.call(e.f):Ue(e,n,r)}catch(i){Ve.call(null,i)}F(Oe,e)}function Ue(t,e,n){e==Ie?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}_e.prototype.then=function(t,e,n){return Pe(this,p(t)?t:null,p(e)?e:null,n)},_e.prototype.$goog_Thenable=!0,(t=_e.prototype).oa=function(t,e){return(t=Ce(t,t,e)).c=!0,je(this,t),this},t.o=function(t,e){return Pe(this,null,t,e)},t.cancel=function(t){if(this.a==we){var e=new qe(t);ve(function(){Ne(this,e)},this)}},t.$c=function(t){this.a=we,Re(this,Ie,t)},t.ad=function(t){this.a=we,Re(this,Te,t)},t.gc=function(){for(var t;t=Le(this);)Fe(this,t,this.a,this.i);this.h=!1};var Ve=ge;function qe(t){R.call(this,t)}function Be(){0!=He&&(ze[v(this)]=this),this.xa=this.xa,this.pa=this.pa}E(qe,R),qe.prototype.name="cancel";var He=0,ze={};function Ke(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=He)){var e=v(t);if(0!=He&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ze[e]}}Be.prototype.xa=!1,Be.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var We=Object.freeze||function(t){return t},Ge=!Qt||9<=Number(se),$e=Qt&&!oe("9"),Qe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",h,e),a.removeEventListener("test",h,e)}catch(n){}return t}();function Ye(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Xe(t,e){if(Ye.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Jt){t:{try{Kt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Je[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ye.prototype.preventDefault=function(){this.defaultPrevented=!0},E(Xe,Ye);var Je=We({2:"touch",3:"pen",4:"mouse"});Xe.prototype.preventDefault=function(){Xe.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,$e)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Xe.prototype.g=function(){return this.a};var Ze="closure_listenable_"+(1e6*Math.random()|0),tn=0;function en(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++tn,this.va=this.Pa=!1}function nn(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function rn(t){this.src=t,this.a={},this.b=0}function on(t,e){var n=e.type;n in t.a&&Q(t.a[n],e)&&(nn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function sn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}rn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=sn(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):((e=new en(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var an="closure_lm_"+(1e6*Math.random()|0),un={};function cn(t,e,n,r,i){if(r&&r.once)hn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else n=_n(n),t&&t[Ze]?In(t,e,n,g(r)?!!r.capture:!!r,i):ln(t,e,n,!1,r,i)}function ln(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=g(i)?!!i.capture:!!i,a=yn(t);if(a||(t[an]=a=new rn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=mn,e=Ge?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Qe||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=_n(n),t&&t[Ze]?Tn(t,e,n,g(r)?!!r.capture:!!r,i):ln(t,e,n,!0,r,i)}function fn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=_n(n),t&&t[Ze]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=sn(o=t.a[e],n,r,i))&&(nn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=yn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=sn(e,n,r,i)),(n=-1<t?e[t]:null)&&dn(n))}function dn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Ze])on(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yn(e))?(on(n,t),0==n.b&&(n.src=null,e[an]=null)):nn(t)}}}function pn(t){return t in un?un[t]:un[t]="on"+t}function gn(t,e,n,r){var i=!0;if((t=yn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=vn(o,r),i=i&&!1!==o)}return i}function vn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&dn(t),n.call(r,e)}function mn(t,e){if(t.va)return!0;if(!Ge){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Xe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=gn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=gn(r[i],t,!1,e),n=n&&o}return n}return vn(t,new Xe(e,this))}function yn(t){return(t=t[an])instanceof rn?t:null}var bn="__closure_events_fn_"+(1e9*Math.random()>>>0);function _n(t){return p(t)?t:(t[bn]||(t[bn]=function(e){return t.handleEvent(e)}),t[bn])}function wn(){Be.call(this),this.v=new rn(this),this.ac=this,this.gb=null}function In(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Tn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function En(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Va||s.src;s.Pa&&on(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function On(t,e,n){if(p(t))n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Cn(t){var e=null;return new _e(function(n,r){-1==(e=On(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).o(function(t){throw a.clearTimeout(e),t})}function Sn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function kn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function An(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof An)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Nn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Nn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Nn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}E(wn,Be),wn.prototype[Ze]=!0,wn.prototype.addEventListener=function(t,e,n,r){cn(this,t,e,n,r)},wn.prototype.removeEventListener=function(t,e,n,r){fn(this,t,e,n,r)},wn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new Ye(t,n);else if(t instanceof Ye)t.target=t.target||n;else{var i=t;mt(t=new Ye(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=En(s,r,!0,t)&&i}if(i=En(s=t.b=n,r,!0,t)&&i,i=En(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=En(s=t.b=e[o],r,!1,t)&&i;return i},wn.prototype.Da=function(){if(wn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)nn(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=An.prototype).W=function(){xn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return xn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Nn(this.b,t)?this.b[t]:e},t.set=function(t,e){Nn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var jn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Pn?(this.i=void 0!==e?e:t.i,Rn(this,t.c),this.l=t.l,this.a=t.a,Dn(this,t.g),this.f=t.f,Mn(this,er(t.b)),this.h=t.h):t&&(n=String(t).match(jn))?(this.i=!!e,Rn(this,n[1]||"",!0),this.l=qn(n[2]||""),this.a=qn(n[3]||"",!0),Dn(this,n[4]),this.f=qn(n[5]||"",!0),Mn(this,n[6]||"",!0),this.h=qn(n[7]||"")):(this.i=!!e,this.b=new Qn(null,this.i))}function Rn(t,e,n){t.c=n?qn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Dn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Mn(t,e,n){e instanceof Qn?(t.b=e,function(t,e){e&&!t.f&&(Yn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Jn(this,e),tr(this,n,t))},t)),t.f=e}(t.b,t.i)):(n||(e=Bn(e,Gn)),t.b=new Qn(e,t.i))}function Ln(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function Un(t){return t instanceof Pn?new Pn(t):new Pn(t,void 0)}function Vn(t,e,n,r){var i=new Pn(null,void 0);return t&&Rn(i,t),e&&(i.a=e),n&&Dn(i,n),r&&(i.f=r),i}function qn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Bn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Pn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Bn(e,zn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Bn(e,zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Bn(n,"/"==n.charAt(0)?Wn:Kn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Bn(n,$n)),t.join("")},Pn.prototype.resolve=function(t){var e=new Pn(this),n=!!t.c;n?Rn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Dn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ut(i,"./")||ut(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Mn(e,er(t.b)):n=!!t.h,n&&(e.h=t.h),e};var zn=/[#\/\?@]/g,Kn=/[#\?:]/g,Wn=/[#\?]/g,Gn=/[#\?@]/g,$n=/#/g;function Qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Yn(t){t.a||(t.a=new An,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Xn(t){var e=kn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Qn(null,void 0);t=Sn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?tr(n,i,o):n.add(i,o)}return n}function Jn(t,e){Yn(t),e=nr(t,e),Nn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Nn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&xn(t)))}function Zn(t,e){return Yn(t),e=nr(t,e),Nn(t.a.b,e)}function tr(t,e,n){Jn(t,e),0<n.length&&(t.c=null,t.a.set(nr(t,e),J(n)),t.b+=n.length)}function er(t){var e=new Qn;return e.c=t.c,t.a&&(e.a=new An(t.a),e.b=t.b),e}function nr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function rr(t){var e=[];return or(new ir,t,e),e.join("")}function ir(){}function or(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),or(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),ur(r,n),n.push(":"),or(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":ur(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Qn.prototype).add=function(t,e){Yn(this),this.c=null,t=nr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Yn(this),this.a.forEach(function(n,r){z(n,function(n){t.call(e,n,r,this)},this)},this)},t.Y=function(){Yn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){Yn(this);var e=[];if("string"==typeof t)Zn(this,t)&&(e=X(e,this.a.get(nr(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=X(e,t[n])}return e},t.set=function(t,e){return Yn(this),this.c=null,Zn(this,t=nr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var sr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ar=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ur(t,e){e.push('"',t.replace(ar,function(t){var e=sr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),sr[t]=e),e}),'"')}function cr(){var t=Ar();return Qt&&!!se&&11==se||/Edge\/\d+/.test(t)}function lr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function hr(t,e){e=e||a.window;var n="about:blank";t&&(n=jt(Mt(t)||Ut)),e.location.href=n}function fr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<fr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function dr(t){return!!((t=(t||Ar()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||a.window;try{t.close()}catch(e){}}function gr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Ar().toLowerCase(),r&&(e.target=r,ut(n,"crios/")&&(e.target="_blank")),Cr(Ar())==Er&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Nt?n:Mt(void 0!==n.href?n.href:String(n))||Ut,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ft("iPhone")&&!ft("iPod")&&!ft("iPad")||ft("iPad")||ft("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(yt(s=pe(document,"A"),"HTMLAnchorElement"),e=e instanceof Nt?e:Lt(e),s.href=jt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Bt("",r,n,s),t=jt(e),s&&(Xt&&ut(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+zt(t)+'">',t=new Vt(t=(r=Et())?r.createHTML(t):t,null,qt),r=s.document)&&(r.write(function(t){return t instanceof Vt&&t.constructor===Vt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Bt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mr=/^[^@]+@[^@]+$/;function yr(){var t=null;return new _e(function(e){"complete"==a.document.readyState?e():(t=function(){e()},hn(window,"load",t))}).o(function(e){throw fn(window,"load",t),e})}function br(t){return t=t||Ar(),!("file:"!==Rr()&&"ionic:"!==Rr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function _r(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function wr(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function Ir(){return r.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.default.INTERNAL.hasOwnProperty("node")?"Node":wr()?"Worker":"Browser"}function Tr(){var t=Ir();return"ReactNative"===t||"Node"===t}var Er="Firefox",Or="Chrome";function Cr(t){var e=t.toLowerCase();return ut(e,"opera/")||ut(e,"opr/")||ut(e,"opios/")?"Opera":ut(e,"iemobile")?"IEMobile":ut(e,"msie")||ut(e,"trident/")?"IE":ut(e,"edge/")?"Edge":ut(e,"firefox/")?Er:ut(e,"silk/")?"Silk":ut(e,"blackberry")?"Blackberry":ut(e,"webos")?"Webos":!ut(e,"safari/")||ut(e,"chrome/")||ut(e,"crios/")||ut(e,"android")?!ut(e,"chrome/")&&!ut(e,"crios/")||ut(e,"edge/")?ut(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Or:"Safari"}var Sr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function kr(t,e){e=e||[];var n,r=[],i={};for(n in Sr)i[Sr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Ir())?r=Cr(i=Ar()):"Worker"===r&&(r=Cr(i=Ar())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Ar(){return a.navigator&&a.navigator.userAgent||""}function xr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Nr(){try{var t=a.localStorage,e=Ur();if(t)return t.setItem(e,"1"),t.removeItem(e),!cr()||!!a.indexedDB}catch(n){return wr()&&!!a.indexedDB}return!1}function jr(){return(Pr()||"chrome-extension:"===Rr()||br())&&!Tr()&&Nr()&&!wr()}function Pr(){return"http:"===Rr()||"https:"===Rr()}function Rr(){return a.location&&a.location.protocol||null}function Dr(t){return!dr(t=t||Ar())&&Cr(t)!=Er}function Mr(t){return void 0===t?null:rr(t)}function Lr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function Ur(t){return t||Math.floor(1e9*Math.random()).toString()}function Vr(t){return"Safari"!=Cr(t=t||Ar())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function qr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Br(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Ar(),e=Ir(),this.b=dr(t)||"ReactNative"===e}function Hr(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function zr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Kr(){return!(!xr("fireauth.oauthhelper",a)&&!xr("fireauth.iframe",a))}Br.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Pr()&&"chrome-extension:"!==Rr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Wr,Gr={};function $r(t){Gr[t]||(Gr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Qr={};Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:2}),Wr=2==Qr.abcd}catch(Gt){Wr=!1}function Yr(t,e,n){Wr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Xr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Yr(t,n,e[n])}function Jr(t){var e={};return Xr(e,t),e}function Zr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Yr(e,n,Zr(t[n]));return e}function ti(t){var e=t&&(t[oi]?"phone":null);if(!(e&&t&&t[ii]))throw new C("internal-error","Internal assert: invalid MultiFactorInfo object");Yr(this,"uid",t[ii]),Yr(this,"displayName",t[ni]||null);var n=null;t[ri]&&(n=new Date(t[ri]).toUTCString()),Yr(this,"enrollmentTime",n),Yr(this,"factorId",e)}function ei(t){try{var e=new si(t)}catch(n){e=null}return e}ti.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ni="displayName",ri="enrolledAt",ii="mfaEnrollmentId",oi="phoneInfo";function si(t){ti.call(this,t),Yr(this,"phoneNumber",t[oi])}function ai(t){var e={},n=t[hi],r=t[di],i=t[pi];if(t=ei(t[fi]),!i||i!=ci&&i!=li&&!n||i==li&&!r||i==ui&&!t)throw Error("Invalid checkActionCode response!");i==li?(e[vi]=n||null,e[yi]=n||null,e[gi]=r):(e[vi]=r||null,e[yi]=r||null,e[gi]=n||null),e[mi]=t||null,Yr(this,_i,i),Yr(this,bi,Zr(e))}E(si,ti),si.prototype.w=function(){var t=si.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ui="REVERT_SECOND_FACTOR_ADDITION",ci="EMAIL_SIGNIN",li="VERIFY_AND_CHANGE_EMAIL",hi="email",fi="mfaInfo",di="newEmail",pi="requestType",gi="email",vi="fromEmail",mi="multiFactorInfo",yi="previousEmail",bi="data",_i="operation";function wi(t){var e=Fn(t=Un(t),Ii)||null,n=Fn(t,Ti)||null,r=Fn(t,Ci)||null;if(r=r&&ki[r]||null,!e||!n||!r)throw new C("argument-error",Ii+", "+Ti+"and "+Ci+" are required in a valid action code URL.");Xr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Ei)||null,languageCode:Fn(t,Oi)||null,tenantId:Fn(t,Si)||null})}var Ii="apiKey",Ti="oobCode",Ei="continueUrl",Oi="languageCode",Ci="mode",Si="tenantId",ki={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ui,signIn:ci,verifyAndChangeEmail:li,verifyEmail:"VERIFY_EMAIL"};function Ai(t){try{return new wi(t)}catch(e){return null}}function xi(t){var e=t[Di];if(void 0===e)throw new C("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new C("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ni];if(n&&"object"==typeof n){e=n[Fi];var r=n[Mi];if(n=n[Li],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new C("argument-error",Mi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new C("argument-error",Li+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new C("argument-error",Fi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new C("missing-android-pkg-name")}}else if(void 0!==n)throw new C("argument-error",Ni+" property must be a non null object when specified.");if(this.f=null,(e=t[Ri])&&"object"==typeof e){if("string"==typeof(e=e[Ui])&&e.length)this.f=e;else if(void 0!==e)throw new C("argument-error",Ui+" property must be a non empty string when specified.")}else if(void 0!==e)throw new C("argument-error",Ri+" property must be a non null object when specified.");if(void 0!==(e=t[Pi])&&"boolean"!=typeof e)throw new C("argument-error",Pi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[ji])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new C("argument-error",ji+" property must be a non empty string when specified.");this.i=t||null}var Ni="android",ji="dynamicLinkDomain",Pi="handleCodeInApp",Ri="iOS",Di="url",Mi="installApp",Li="minimumVersion",Fi="packageName",Ui="bundleId";function Vi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var qi=null;function Bi(t){var e=zi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Hi(t){try{return new Bi(t)}catch(e){return null}}function zi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=qi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!qi){qi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===qi[o]&&(qi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,function(t){e.push(t)}),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(u){}return null}Bi.prototype.T=function(){return this.f},Bi.prototype.l=function(){return this.c},Bi.prototype.toString=function(){return this.h};var Ki="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Wi=["client_id","response_type","scope","redirect_uri","state"],Gi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Wi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Wi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Wi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Ki},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function $i(t){for(var e in Gi)if(Gi[e].fa==t)return Gi[e];return null}function Qi(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[Xi];try{if(n)return e[n]?new e[n](t):new Zi(t);if(void 0!==t[Yi])return new Ji(t)}catch(r){}return null}var Yi="idToken",Xi="providerId";function Ji(t){var e=t[Xi];if(!e&&t[Yi]){var n=Hi(t[Yi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Yr(this,"providerId",e),Yr(this,"isNewUser",n)}function Zi(t){Ji.call(this,t),Yr(this,"profile",Zr((t=Fr(t.rawUserInfo||"{}"))||{}))}function to(t){if(Zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",t.screenName||null)}function io(t){var e=Un(t),n=Fn(e,"link"),r=Fn(Un(n),"link");return e=Fn(e,"deep_link_id"),Fn(Un(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new C("internal-error","Internal assert: no raw session string available");if(t&&e)throw new C("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?so:ao}E(Zi,Ji),E(to,Zi),E(eo,Zi),E(no,Zi),E(ro,Zi);var so="enroll",ao="signin";function uo(){}function co(t,e){return t.then(function(t){if(t[Ys]){var n=Hi(t[Ys]);if(!n||e!=n.i)throw new C("user-mismatch");return t}throw new C("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==A+"user-not-found"?new C("user-mismatch"):t})}function lo(t,e){if(!e)throw new C("internal-error","failed to construct a credential");this.a=e,Yr(this,"providerId",t),Yr(this,"signInMethod",t)}function ho(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new lo(t.providerId,t.pendingToken)}catch(e){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Yr(this,"idToken",e.idToken),e.accessToken&&Yr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Yr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new C("internal-error","failed to construct a credential");Yr(this,"accessToken",e.oauthToken),Yr(this,"secret",e.oauthTokenSecret)}Yr(this,"providerId",t),Yr(this,"signInMethod",n)}function go(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Xn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function vo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(n){}}return null}function mo(t,e){this.Qc=e||[],Xr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=($i(t)||{}).Ja||null,this.ob=null}function yo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new C("argument-error",'SAML provider IDs must be prefixed with "saml."');mo.call(this,t,[])}function bo(t){mo.call(this,t,Wi),this.a=[]}function _o(){bo.call(this,"facebook.com")}function wo(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function Io(){bo.call(this,"github.com")}function To(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new Io).credential({accessToken:e})}function Eo(){bo.call(this,"google.com"),this.Ca("profile")}function Oo(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new Eo).credential({idToken:n,accessToken:e})}function Co(){mo.call(this,"twitter.com",Ki)}function So(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new C("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function ko(t,e,n){this.a=t,this.f=e,Yr(this,"providerId","password"),Yr(this,"signInMethod",n===xo.EMAIL_LINK_SIGN_IN_METHOD?xo.EMAIL_LINK_SIGN_IN_METHOD:xo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ao(t){return t&&t.email&&t.password?new ko(t.email,t.password,t.signInMethod):null}function xo(){Xr(this,{providerId:"password",isOAuthProvider:!1})}function No(t,e){if(!(e=jo(e)))throw new C("argument-error","Invalid email link!");return new ko(t,e.code,xo.EMAIL_LINK_SIGN_IN_METHOD)}function jo(t){return(t=Ai(t=io(t)))&&t.operation===ci?t:null}function Po(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new C("internal-error");this.a=t,Yr(this,"providerId","phone"),this.fa="phone",Yr(this,"signInMethod","phone")}function Ro(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return z(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new Po(e)}return null}function Do(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Mo(t){try{this.a=t||r.default.auth()}catch(e){throw new C("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Xr(this,{providerId:"phone",isOAuthProvider:!1})}function Lo(t,e){if(!t)throw new C("missing-verification-id");if(!e)throw new C("missing-verification-code");return new Po({eb:t,cb:e})}function Fo(t){if(t.temporaryProof&&t.phoneNumber)return new Po({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Oo(o,n);case"facebook.com":return wo(n);case"github.com":return To(n);case"twitter.com":return So(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new lo(e,s):new po(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new bo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Uo(t){if(!t.isOAuthProvider)throw new C("invalid-oauth-provider")}function Vo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new C("invalid-auth-event");if(this.g&&this.a)throw new C("invalid-auth-event");if(this.g&&!this.f)throw new C("invalid-auth-event")}function qo(t){return(t=t||{}).type?new Vo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&S(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return Se(this.a?this.a:this.b)},oo.prototype.w=function(){return this.type==so?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ka=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},lo.prototype.ka=function(t){return ma(t,ho(this))},lo.prototype.b=function(t,e){var n=ho(this);return n.idToken=e,ya(t,n)},lo.prototype.c=function(t,e){return co(ba(t,ho(this)),e)},lo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ka=function(t){return ma(t,go(this))},po.prototype.b=function(t,e){var n=go(this);return n.idToken=e,ya(t,n)},po.prototype.c=function(t,e){return co(ba(t,go(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},mo.prototype.Ka=function(t){return this.Ib=gt(t),this},E(yo,mo),E(bo,mo),bo.prototype.Ca=function(t){return $(this.a,t)||this.a.push(t),this},bo.prototype.Qb=function(){return J(this.a)},bo.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new C("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},E(_o,bo),Yr(_o,"PROVIDER_ID","facebook.com"),Yr(_o,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(Io,bo),Yr(Io,"PROVIDER_ID","github.com"),Yr(Io,"GITHUB_SIGN_IN_METHOD","github.com"),E(Eo,bo),Yr(Eo,"PROVIDER_ID","google.com"),Yr(Eo,"GOOGLE_SIGN_IN_METHOD","google.com"),E(Co,mo),Yr(Co,"PROVIDER_ID","twitter.com"),Yr(Co,"TWITTER_SIGN_IN_METHOD","twitter.com"),ko.prototype.ka=function(t){return this.signInMethod==xo.EMAIL_LINK_SIGN_IN_METHOD?tu(t,Sa,{email:this.a,oobCode:this.f}):tu(t,Qa,{email:this.a,password:this.f})},ko.prototype.b=function(t,e){return this.signInMethod==xo.EMAIL_LINK_SIGN_IN_METHOD?tu(t,ka,{idToken:e,email:this.a,oobCode:this.f}):tu(t,qa,{idToken:e,email:this.a,password:this.f})},ko.prototype.c=function(t,e){return co(this.ka(t),e)},ko.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Xr(xo,{PROVIDER_ID:"password"}),Xr(xo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Xr(xo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Po.prototype.ka=function(t){return t.fb(Do(this))},Po.prototype.b=function(t,e){var n=Do(this);return n.idToken=e,tu(t,Xa,n)},Po.prototype.c=function(t,e){var n=Do(this);return n.operation="REAUTH",co(t=tu(t,Ja,n),e)},Po.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.fb=function(t,e){var n=this.a.a;return Se(e.verify()).then(function(r){if("string"!=typeof r)throw new C("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=g(t)?t.session:null,o=g(t)?t.phoneNumber:t;return(i&&i.type==so?i.Ha().then(function(t){return function(t,e){return tu(t,Ha,e).then(function(t){return t.phoneSessionInfo.sessionInfo})}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})}):i&&i.type==ao?i.Ha().then(function(e){return function(t,e){return tu(t,za,e).then(function(t){return t.phoneResponseInfo.sessionInfo})}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})}):function(t,e){return tu(t,Ua,e)}(n,{phoneNumber:o,recaptchaToken:r})).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new C("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Xr(Mo,{PROVIDER_ID:"phone"}),Xr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),Vo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Vo.prototype.T=function(){return this.h},Vo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ho,zo=null;function Ko(t){var e="unauthorized-domain",n=void 0,r=Un(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ht("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ht("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",C.call(this,e,n)}function Wo(t,e,n){C.call(this,t,n),(t=e||{}).Jb&&Yr(this,"email",t.Jb),t.ea&&Yr(this,"phoneNumber",t.ea),t.credential&&Yr(this,"credential",t.credential),t.Zb&&Yr(this,"tenantId",t.Zb)}function Go(t){if(t.code){var e=t.code||"";0==e.indexOf(A)&&(e=e.substring(A.length));var n={credential:Fo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new C(e,t.message||void 0);return new Wo(e,n,t.message)}return null}function $o(){}function Qo(){}function Yo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Xo(){}function Jo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.qc,this),this.a.onerror=w(this.Sb,this),this.a.onprogress=w(this.rc,this),this.a.ontimeout=w(this.vc,this)}function Zo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ts(t,e,n){this.reset(t,e,n,void 0,void 0)}function es(t){this.f=t,this.b=this.c=this.a=null}function ns(t,e){this.name=t,this.value=e}E(Ko,C),E(Wo,C),Wo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&mt(t,e),t},Wo.prototype.toJSON=function(){return this.w()},$o.prototype.c=null,E(Qo,$o),Qo.prototype.a=function(){var t=Yo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Qo.prototype.b=function(){var t={};return Yo(this)&&(t[0]=!0,t[1]=!0),t},Ho=new Qo,E(Xo,$o),Xo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Jo;throw Error("Unsupported browser")},Xo.prototype.b=function(){return{}},(t=Jo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Zo(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",Zo(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,Zo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ts.prototype.a=null,ts.prototype.reset=function(t,e,n,r,i){r||T(),delete this.a},ns.prototype.toString=function(){return this.name};var rs=new ns("SEVERE",1e3),is=new ns("WARNING",900),os=new ns("CONFIG",700),ss=new ns("FINE",500);function as(t){return t.c?t.c:t.a?as(t.a):(M("Root logger has no level set."),null)}es.prototype.log=function(t,e,n){if(t.value>=as(this).value)for(p(e)&&(e=e()),t=new ts(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var us={},cs=null;function ls(t){var e;if(cs||(cs=new es(""),us[""]=cs,cs.c=os),!(e=us[t])){e=new es(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ls(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,us[t]=e}return e}function hs(t,e){t&&t.log(ss,e,void 0)}function fs(t){this.f=t}function ds(t){wn.call(this),this.u=t,this.h=void 0,this.readyState=ps,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ls("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}E(fs,$o),fs.prototype.a=function(){return new ds(this.f)},fs.prototype.b=function(t){return function(){return t}}({}),E(ds,wn);var ps=0;function gs(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function vs(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ms(t)}function ms(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ys(t){wn.call(this),this.headers=new An,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=bs,this.u=this.S=!1}(t=ds.prototype).open=function(t,e){if(this.readyState!=ps)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ms(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,vs(this)),this.readyState=ps},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ms(this)),this.a&&(this.readyState=3,ms(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,gs(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?vs(this):ms(this),3==this.readyState&&gs(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,vs(this))},t.sc=function(t){this.a&&(this.response=t,vs(this))},t.Ua=function(t){var e=this.i;e&&e.log(is,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&vs(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(is,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(is,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),E(ys,wn);var bs="";ys.prototype.b=ls("goog.net.XhrIo");var _s=/^https?$/i,ws=["POST","PUT"];function Is(t){return"content-type"==t.toLowerCase()}function Ts(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Es(t),Cs(t)}function Es(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Os(t){if(t.c&&void 0!==s)if(t.C[1]&&4==ks(t)&&2==As(t))hs(t.b,xs(t,"Local request error detected and ignored"));else if(t.i&&4==ks(t))On(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==ks(t)){hs(t.b,xs(t,"Request complete")),t.c=!1;try{var e,n=As(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(jn)[1]||null;if(!o&&a.self&&a.self.location){var u=a.self.location.protocol;o=u.substr(0,u.length-1)}i=!_s.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<ks(t)?t.a.statusText:""}catch(l){hs(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+As(t)+"]",Es(t)}}finally{Cs(t)}}}function Cs(t,e){if(t.a){Ss(t);var n=t.a,r=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(rs,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function Ss(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function ks(t){return t.a?t.a.readyState:0}function As(t){try{return 2<ks(t)?t.a.status:-1}catch(e){return-1}}function xs(t,e){return e+" ["+t.R+" "+t.l+" "+As(t)+"]"}function Ns(t){var e=Bs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function js(t,e,n){t.a=!0,t.c=n,t.f=!e,Ms(t)}function Ps(t){if(t.a){if(!t.v)throw new Ls(t);t.v=!1}}function Rs(t,e,n,r){t.g.push([e,n,r]),t.a&&Ms(t)}function Ds(t){return G(t.g,function(t){return p(t[1])})}function Ms(t){if(t.h&&t.a&&Ds(t)){var e=t.h,n=Vs[e];n&&(a.clearTimeout(n.a),delete Vs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(P(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Ds(t)||(n=!0)}}t.c=e,r&&(u=w(t.m,t,!0),r=w(t.m,t,!1),e instanceof Ns?(Rs(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Us(e),Vs[e.a]=e,t.h=e.a)}function Ls(){R.call(this)}function Fs(){R.call(this)}function Us(t){this.a=a.setTimeout(w(this.c,this),0),this.b=t}(t=ys.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",hs(this.b,xs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(hs(this.b,xs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Cs(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Cs(this,!0)),ys.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Os(this):this.Jc())},t.Jc=function(){Os(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case bs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(rs,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return hs(this.b,"Can not get response: "+e.message),null}},Ns.prototype.cancel=function(t){if(this.a)this.c instanceof Ns&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Fs(this),Ps(this),js(this,!1,t))}},Ns.prototype.m=function(t,e){this.i=!1,js(this,t,e)},Ns.prototype.then=function(t,e,n){var r,i,o=new _e(function(t,e){r=t,i=e});return Rs(this,r,function(t){t instanceof Fs?o.cancel():i(t)}),o.then(t,e,n)},Ns.prototype.$goog_Thenable=!0,E(Ls,R),Ls.prototype.message="Deferred has already fired",Ls.prototype.name="AlreadyCalledError",E(Fs,R),Fs.prototype.message="Deferred was canceled",Fs.prototype.name="CanceledError",Us.prototype.c=function(){throw delete Vs[this.a],this.b};var Vs={};function qs(t){var e={},n=e.document||document,r=Ct(t).toString(),i=pe(document,"SCRIPT"),o={Wb:i,Ma:void 0},s=new Ns(o),u=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(u=window.setTimeout(function(){Hs(i,!0);var t=new Ws(Ks,"Timeout reached for loading script "+r);Ps(s),js(s,!1,t)},h),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Hs(i,e.xd||!1,u),Ps(s),js(s,!0,null))},i.onerror=function(){Hs(i,!0,u);var t=new Ws(zs,"Error while loading script "+r);Ps(s),js(s,!1,t)},mt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ce(i,o),function(t,e){yt(t,"HTMLScriptElement"),t.src=Ct(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=l(e.document):(null===c&&(c=l(a.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Bs(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Hs(t,!0,this.Ma)}}function Hs(t,e,n){null!=n&&a.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var zs=0,Ks=1;function Ws(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function Gs(t){this.f=t}function $s(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Xs,this.g=gt(t.secureTokenHeaders||Js),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Zs,this.a=gt(t.firebaseHeaders||ta),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Ir(),!(n=a.XMLHttpRequest||n&&r.default.INTERNAL.node&&r.default.INTERNAL.node.XMLHttpRequest)&&!wr())throw new C("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=wr()?new fs(self):Tr()?new Gs(n):new Xo,this.b=null}E(Ws,R),E(Gs,$o),Gs.prototype.a=function(){return new this.f},Gs.prototype.b=function(){return{}};var Qs,Ys="idToken",Xs=new Br(3e4,6e4),Js={"Content-Type":"application/x-www-form-urlencoded"},Zs=new Br(3e4,6e4),ta={"Content-Type":"application/json"};function ea(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function na(t,e){e&&(t.l=ra("https://securetoken.googleapis.com/v1/token",e),t.h=ra("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ra("https://identitytoolkit.googleapis.com/v2/",e))}function ra(t,e){return t=Un(t),e=Un(e.url),t.f=t.a+t.f,Rn(t,e.c),t.a=e.a,Dn(t,e.g),t.toString()}function ia(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function oa(t,e,n,r,i,o,s){(function(){var t=Ar();return!((t=Cr(t)!=Or?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Qt&&se&&!(9<se))})()||wr()?t=w(t.u,t):(Qs||(Qs=new _e(function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[aa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Rs(t,null,e,void 0)}(qs(St(sa,{onload:aa})),function(){e(Error("CORS_UNSUPPORTED"))}))}(t,e)})),t=w(t.s,t)),t(e,n,r,i,o,s)}$s.prototype.T=function(){return this.b},$s.prototype.u=function(t,e,n,r,i,o){if(wr()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new C("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ys(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout(function(){s.dispatchEvent("timeout")},o)}In(s,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return hs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)}),Tn(s,"ready",function(){u&&clearTimeout(u),Ke(this)}),Tn(s,"timeout",function(){u&&clearTimeout(u),Ke(this),e&&e(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ho.a(),t.C=function(t){return t.c||(t.c=t.b())}(t.D?t.D:Ho),t.a.onreadystatechange=w(t.Vb,t);try{hs(t.b,xs(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(s){return hs(t.b,xs(t,"Error opening Xhr: "+s.message)),void Ts(t,s)}e=r||"";var o=new An(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)z(t,e,void 0);else for(var n=kn(t),r=Sn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=Is,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!$(ws,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Ss(t),0<t.g&&(t.u=function(t){return Qt&&oe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),hs(t.b,xs(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=w(t.Ma,t)):t.s=On(t.Ma,t.g,t)),hs(t.b,xs(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){hs(t.b,xs(t,"Send error: "+s.message)),Ts(t,s)}}(s,t,n,r,i)};var sa=new bt(Tt,"https://apis.google.com/js/client.js?onload=%{onload}"),aa="__fcb"+Math.floor(1e6*Math.random()).toString();function ua(t){if("string"!=typeof(t=t.email)||!mr.test(t))throw new C("invalid-email")}function ca(t){"email"in t&&ua(t)}function la(t){if(!t[Ys]){if(t.mfaPendingCredential)throw new C("multi-factor-auth-required",null,gt(t));throw new C("internal-error")}}function ha(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new C("internal-error")}else{if(!t.sessionInfo)throw new C("missing-verification-id");if(!t.code)throw new C("missing-verification-code")}}$s.prototype.s=function(t,e,n,r,i){var o=this;Qs.then(function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).o(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},$s.prototype.zb=function(){return tu(this,Ba,{})},$s.prototype.Bb=function(t,e){return tu(this,Va,{idToken:t,email:e})},$s.prototype.Cb=function(t,e){return tu(this,qa,{idToken:t,password:e})};var fa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function da(t){if(!t.phoneVerificationInfo)throw new C("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new C("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new C("missing-verification-code")}function pa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new C("internal-error")}function ga(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Zn(t=new Qn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function va(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Go(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Go(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Go(t)):t.errorMessage&&(e=eu(t.errorMessage)),e)throw e;la(t)}function ma(t,e){return e.returnIdpCredential=!0,tu(t,Ka,e)}function ya(t,e){return e.returnIdpCredential=!0,tu(t,Ga,e)}function ba(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,tu(t,Wa,e)}function _a(t){if(!t.oobCode)throw new C("invalid-action-code")}(t=$s.prototype).Db=function(t,e){var n={idToken:t},r=[];return dt(fa,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),tu(this,Va,n)},t.vb=function(t,e){return mt(t={requestType:"PASSWORD_RESET",email:t},e),tu(this,Da,t)},t.wb=function(t,e){return mt(t={requestType:"EMAIL_SIGNIN",email:t},e),tu(this,ja,t)},t.ub=function(t,e){return mt(t={requestType:"VERIFY_EMAIL",idToken:t},e),tu(this,Pa,t)},t.Eb=function(t,e,n){return mt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),tu(this,Ra,t)},t.fb=function(t){return tu(this,Ya,t)},t.nb=function(t,e){return tu(this,Fa,{oobCode:t,newPassword:e})},t.Ra=function(t){return tu(this,Ia,{oobCode:t})},t.jb=function(t){return tu(this,wa,{oobCode:t})};var wa={endpoint:"setAccountInfo",A:_a,Z:"email",B:!0},Ia={endpoint:"resetPassword",A:_a,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new C("internal-error")},B:!0},Ta={endpoint:"signupNewUser",A:function(t){if(ua(t),!t.password)throw new C("weak-password")},G:la,V:!0,B:!0},Ea={endpoint:"createAuthUri",B:!0},Oa={endpoint:"deleteAccount",N:["idToken"]},Ca={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new C("internal-error")}},Sa={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ua,G:la,V:!0,B:!0},ka={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ua,G:la,V:!0},Aa={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:da,G:la,B:!0,Na:!0},xa={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:da,G:la,B:!0,Na:!0},Na={endpoint:"getAccountInfo"},ja={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new C("internal-error");ua(t)},Z:"email",B:!0},Pa={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new C("internal-error")},Z:"email",B:!0},Ra={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new C("internal-error")},Z:"email",B:!0},Da={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new C("internal-error");ua(t)},Z:"email",B:!0},Ma={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},La={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new C("internal-error")}},Fa={endpoint:"resetPassword",A:_a,Z:"email",B:!0},Ua={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Va={endpoint:"setAccountInfo",N:["idToken"],A:ca,V:!0},qa={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(ca(t),!t.password)throw new C("weak-password")},G:la,V:!0},Ba={endpoint:"signupNewUser",G:la,V:!0,B:!0},Ha={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new C("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new C("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new C("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new C("internal-error")},B:!0,Na:!0},za={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new C("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new C("internal-error")},B:!0,Na:!0},Ka={endpoint:"verifyAssertion",A:pa,Ya:ga,G:va,V:!0,B:!0},Wa={endpoint:"verifyAssertion",A:pa,Ya:ga,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new C("user-not-found");if(t.errorMessage)throw eu(t.errorMessage);la(t)},V:!0,B:!0},Ga={endpoint:"verifyAssertion",A:function(t){if(pa(t),!t.idToken)throw new C("internal-error")},Ya:ga,G:va,V:!0},$a={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new C("invalid-custom-token")},G:la,V:!0,B:!0},Qa={endpoint:"verifyPassword",A:function(t){if(ua(t),!t.password)throw new C("wrong-password")},G:la,V:!0,B:!0},Ya={endpoint:"verifyPhoneNumber",A:ha,G:la,B:!0},Xa={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new C("internal-error");ha(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Go(t);la(t)}},Ja={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ha,G:la,B:!0},Za={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ys]^!!t.refreshToken)throw new C("internal-error")},B:!0,Na:!0};function tu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return ke(new C("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return Se(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=Un(e+n);Ln(a,"key",t.c),s&&Ln(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Ln(a,c,i[c]);return new _e(function(e,n){oa(t,a.toString(),function(t){t?t.error?n(nu(t,o||{})):e(t):n(new C("network-request-failed"))},r,u?void 0:rr(Lr(i)),t.a,t.v.get())})}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)}).then(function(t){return r=t,e.Ya?e.Ya(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new C("internal-error");return r[e.Z]})}function eu(t){return nu({error:{errors:[{message:t}],code:400,message:t}})}function nu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new C(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",mt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new C(r[i],e);return!e&&t&&(e=Mr(t)),new C("internal-error",e)}function ru(t){this.b=t,this.a=null,this.rb=function(t){return(au||(au=new _e(function(t,e){function n(){qr(),xr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){qr(),e(Error("Network Error"))},timeout:ou.get()})}if(xr("gapi.iframes.Iframe"))t();else if(xr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){xr("gapi.load")?n():e(Error("Network Error"))},Se(qs(r=St(iu,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw au=null,t}))).then(function(){return new _e(function(e,n){xr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},su.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var iu=new bt(Tt,"https://apis.google.com/js/api.js?onload=%{onload}"),ou=new Br(3e4,6e4),su=new Br(5e3,15e3),au=null;function uu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Vn((t=Un(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Vn("https",this.l,null,"/__/auth/iframe"),this.a=t,Ln(this.a,"apiKey",this.h),Ln(this.a,"appName",this.i),this.b=null,this.c=[]}function cu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function lu(t){try{return r.default.app(t).auth().Ga()}catch(e){return[]}}function hu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function fu(t){var e=lr();return function(t){return tu(t,Ma,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Un(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Un(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:vr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Ko(lr())})}function du(t){return t.m||(t.m=yr().then(function(){if(!t.u){var e=t.c,n=t.i,r=lu(t.b),i=new uu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=J(r||[]),t.u=i.toString()}t.v=new ru(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then(function(){t.a.register("authEvent",e,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.v,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=qo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Se(n)}return n.status="ERROR",Se(n)})}(t)})),t.m}function pu(t){return t.l||(t.C=t.c?kr(t.c,lu(t.b)):null,t.l=new $s(t.g,j(t.i),t.C),t.f&&na(t.l,t.f)),t.l}function gu(t,e,n,r,i,o,s,a,u,c,l,h){return(t=new cu(t,e,n,r,i,h)).l=o,t.g=s,t.i=a,t.b=gt(u||null),t.f=c,t.yb(l).toString()}function vu(t){if(this.a=t||r.default.INTERNAL.reactNative&&r.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new C("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function mu(t){this.b=t,this.a={},this.f=w(this.c,this)}uu.prototype.toString=function(){return this.f?Ln(this.a,"v",this.f):Jn(this.a.b,"v"),this.b?Ln(this.a,"eid",this.b):Jn(this.a.b,"eid"),this.c.length?Ln(this.a,"fw",this.c.join(",")):Jn(this.a.b,"fw"),this.a.toString()},cu.prototype.yb=function(t){return this.h=t,this},cu.prototype.toString=function(){if(this.v){var t=Un(this.v.url);t=Vn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Vn("https",this.u,null,"/__/auth/handler");if(Ln(t,"apiKey",this.s),Ln(t,"appName",this.c),Ln(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=r.default.app(this.c).auth().la()}catch(u){n=null}for(var i in e.ob=n,Ln(t,"providerId",this.a.providerId),e=Lr((n=this.a).Ib))e[i]=e[i].toString();i=n.Qc,e=gt(e);for(var o=0;o<i.length;o++){var s=i[o];s in e&&delete e[s]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),pt(e)||Ln(t,"customParameters",Mr(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&Ln(t,"scopes",n.join(",")),this.l?Ln(t,"redirectUrl",this.l):Jn(t.b,"redirectUrl"),this.g?Ln(t,"eventId",this.g):Jn(t.b,"eventId"),this.i?Ln(t,"v",this.i):Jn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Fn(t,a)&&Ln(t,a,this.b[a]);return this.h?Ln(t,"tid",this.h):Jn(t.b,"tid"),this.f?Ln(t,"eid",this.f):Jn(t.b,"eid"),(a=lu(this.c)).length&&Ln(t,"fw",a.join(",")),t.toString()},(t=hu.prototype).Ob=function(t,e,n){var r=new C("popup-closed-by-user"),i=new C("web-storage-unsupported"),o=this,s=!1;return this.ma().then(function(){(function(t){var e={type:"webStorageSupport"};return du(t).then(function(){return function(t,e){return t.rb.then(function(){return new _e(function(n){t.a.send(e.type,e,n,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.v,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&pr(t),e(i),s=!0)})}).o(function(){}).then(function(){if(!s)return function(t){return new _e(function(e){return function n(){Cn(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!s)return Cn(n).then(function(){e(r)})})},t.Xb=function(){var t=Ar();return!Dr(t)&&!Vr(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,s,a){if(!t)return ke(new C("popup-blocked"));if(s&&!Dr())return this.ma().o(function(e){pr(t),i(e)}),r(),Se();this.a||(this.a=fu(pu(this)));var u=this;return this.a.then(function(){var e=u.ma().o(function(e){throw pr(t),i(e),e});return r(),e}).then(function(){Uo(n),s||hr(gu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Nb=function(t,e,n,r){this.a||(this.a=fu(pu(this)));var i=this;return this.a.then(function(){Uo(e),hr(gu(i.s,i.g,i.b,t,e,lr(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return du(this).then(function(){return t.v.rb}).o(function(){throw t.a=null,new C("network-request-failed")})},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){Y(this.h,function(e){return e==t})},(t=vu.prototype).get=function(t){return Se(this.a.getItem(t)).then(function(t){return t&&Fr(t)})},t.set=function(t,e){return Se(this.a.setItem(t,Mr(e)))},t.U=function(t){return Se(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var yu,bu=[];function _u(t,e,n){pt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function wu(t){this.a=t}function Iu(t){this.c=t,this.b=!1,this.a=[]}function Tu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return ke(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new _e(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout(function(){r(Error("unsupported_event"))},l),t.a.push(c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return Eu(t,c),e}).o(function(e){throw Eu(t,c),e})}function Eu(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),Y(t.a,function(t){return t==e})}}function Ou(){if(!Au())throw new C("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;wr()&&self?(this.v=function(){var t=wr()?self:null;if(z(bu,function(n){n.b==t&&(e=n)}),!e){var e=new mu(t);bu.push(e)}return e}(),_u(this.v,"keyChanged",function(e,n){return Ru(t).then(function(e){return 0<e.length&&z(t.a,function(t){t(e)}),{keyProcessed:$(e,n.key)}})}),_u(this.v,"ping",function(){return Se(["keyChanged"])})):function(){var t=a.navigator;return t&&t.serviceWorker?Se().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):Se(null)}().then(function(e){(t.h=e)&&(t.g=new Iu(new wu(e)),Tu(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&$(e[0].value,"keyChanged")&&(t.s=!0)}).o(function(){}))})}function Cu(t){return new _e(function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new _e(function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return Cu(t)}).then(function(t){e(t)}).o(function(t){n(t)})}})}function Su(t){return t.i||(t.i=Cu(t)),t.i}function ku(t,e){var n=0;return new _e(function r(i,o){Su(t).then(e).then(i).o(function(e){if(!(3<++n))return Su(t).then(function(e){return e.close(),t.i=void 0,r(i,o)}).o(function(t){o(t)});o(e)})})}function Au(){try{return!!a.indexedDB}catch(Gt){return!1}}function xu(t){return t.objectStore("firebaseLocalStorage")}function Nu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function ju(t){return new _e(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Pu(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Tu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):Se()}function Ru(t){return Su(t).then(function(t){var e=xu(Nu(t,!1));return e.getAll?ju(e.getAll()):new _e(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=fr(t.c,n),t.c=n}return r})}function Du(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Mu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Se().then(function(){if(Au()){var t=Ur(),r="__sak"+t;return yu||(yu=new Ou),(n=yu).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)}).then(function(){return n}).o(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.ca(function(t){z(e.a,function(e){e(t)})}),t})}function Lu(){this.a={},this.type="inMemory"}function Fu(){if(!function(){var t="Node"==Ir();if(!(t=Uu()||t&&r.default.INTERNAL.node&&r.default.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Ir())throw new C("internal-error","The LocalStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=Uu()||r.default.INTERNAL.node.localStorage,this.type="localStorage"}function Uu(){try{var t=a.localStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Vu(){this.type="nullStorage"}function qu(){if(!function(){var t="Node"==Ir();if(!(t=Bu()||t&&r.default.INTERNAL.node&&r.default.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Ir())throw new C("internal-error","The SessionStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=Bu()||r.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Bu(){try{var t=a.sessionStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Hu(){var t={};t.Browser=Wu,t.Node=Gu,t.ReactNative=$u,t.Worker=Qu,this.a=t[Ir()]}mu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];z(r,function(e){i.push(Se().then(function(){return e(t.origin,t.data.data)}))}),xe(i).then(function(r){var i=[];z(r,function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})}),z(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},wu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Iu.prototype.close=function(){for(;0<this.a.length;)Eu(this,this.a[0]);this.b=!0},(t=Ou.prototype).set=function(t,e){var n=this,r=!1;return ku(this,function(e){return ju((e=xu(Nu(e,!0))).get(t))}).then(function(i){return ku(n,function(o){if(o=xu(Nu(o,!0)),i)return i.value=e,ju(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,ju(o.add(s))})}).then(function(){return n.c[t]=e,Pu(n,t)}).oa(function(){r&&n.b--})},t.get=function(t){return ku(this,function(e){return ju(xu(Nu(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.U=function(t){var e=this,n=!1;return ku(this,function(r){return n=!0,e.b++,ju(xu(Nu(r,!0)).delete(t))}).then(function(){return delete e.c[t],Pu(e,t)}).oa(function(){n&&e.b--})},t.ca=function(t){0==this.a.length&&function(t){Du(t),function e(){t.f=setTimeout(function(){t.l=Ru(t).then(function(e){0<e.length&&z(t.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ia=function(t){Y(this.a,function(e){return e==t}),0==this.a.length&&Du(this)},(t=Mu.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.U=function(t){return this.b.then(function(e){return e.U(t)})},t.ca=function(t){this.a.push(t)},t.ia=function(t){Y(this.a,function(e){return e==t})},(t=Lu.prototype).get=function(t){return Se(this.a[t])},t.set=function(t,e){return this.a[t]=e,Se()},t.U=function(t){return delete this.a[t],Se()},t.ca=function(){},t.ia=function(){},(t=Fu.prototype).get=function(t){var e=this;return Se().then(function(){return Fr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Se().then(function(){var r=Mr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return Se().then(function(){e.a.removeItem(t)})},t.ca=function(t){a.window&&cn(a.window,"storage",t)},t.ia=function(t){a.window&&fn(a.window,"storage",t)},(t=Vu.prototype).get=function(){return Se(null)},t.set=function(){return Se()},t.U=function(){return Se()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return Se().then(function(){return Fr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Se().then(function(){var r=Mr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return Se().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var zu,Ku,Wu={F:Fu,bb:qu},Gu={F:Fu,bb:qu},$u={F:vu,bb:Vu},Qu={F:Fu,bb:Vu},Yu={rd:"local",NONE:"none",td:"session"};function Xu(){var t=!(Vr(Ar())||!_r()),e=Dr(),n=Nr();this.m=t,this.h=e,this.l=n,this.a={},zu||(zu=new Hu),t=zu;try{this.g=!cr()&&Kr()||!a.indexedDB?new t.a.F:new Mu(wr()?new Lu:new t.a.F)}catch(r){this.g=new Lu,this.h=!0}try{this.i=new t.a.bb}catch(r){this.i=new Lu}this.v=new Lu,this.f=w(this.Yb,this),this.b={}}function Ju(){return Ku||(Ku=new Xu),Ku}function Zu(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function tc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ec(t,e,n){return n=tc(e,n),"local"==e.F&&(t.b[n]=null),Zu(t,e.F).U(n)}function nc(t){t.c&&(clearInterval(t.c),t.c=null)}function rc(t){this.a=t,this.b=Ju()}(t=Xu.prototype).get=function(t,e){return Zu(this,t.F).get(tc(t,e))},t.set=function(t,e,n){var r=tc(t,n),i=this,o=Zu(this,t.F);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.F&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=tc(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),pt(this.a)&&(Zu(this,"local").ca(this.f),this.h||(cr()||!Kr())&&a.indexedDB||!this.l||function(t){nc(t),t.c=setInterval(function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Xe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=tc(t,e),this.a[t]&&(Y(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),pt(this.a)&&(Zu(this,"local").ia(this.f),nc(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Zu(this,"local").ia(this.f):nc(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.mb(e))},Qt&&se&&10==se&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else z(t,w(this.mb,this))},t.mb=function(t){this.a[t]&&z(this.a[t],function(t){t()})};var ic,oc={name:"authEvent",F:"local"};function sc(){this.a=Ju()}function ac(t,e){this.b=uc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===ic&&(ic=a.Int32Array?new Int32Array(gc):gc),this.reset()}E(ac,function(){this.b=-1});for(var uc=64,cc=uc-1,lc=[],hc=0;hc<cc;hc++)lc[hc]=0;var fc=X(128,lc);function dc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|ic[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function pc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(dc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(dc(t),i=0)}}t.c=i,t.g+=n}ac.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):J(this.h)};var gc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function vc(){ac.call(this,8,mc)}E(vc,ac);var mc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function yc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new sc,this.g=new rc(this.h),this.f=null,this.b=[],this.a=this.c=null}function bc(t){return new C("invalid-cordova-configuration",t)}function _c(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function wc(t){return t.f||(t.f=t.ma().then(function(){return new _e(function(e){t.Ea(function n(r){return e(r),t.Sa(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),Ic(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=Un(i),"firebaseError")||null))?S(o):null)?new Vo(r.c,r.b,null,null,o,null,r.T()):new Vo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}_c(t,i)})}var n=new Vo("unknown",null,null,null,new C("no-auth-event")),r=!1,i=Cn(500).then(function(){return Ic(t).then(function(){r||_c(t,n)})}),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(xr("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},zo||(zo=new Bo),function(t){var e=zo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=xr("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)})})),t.f}function Ic(t){var e=null;return function(t){return t.b.get(oc,t.a).then(function(t){return qo(t)})}(t.g).then(function(n){return e=n,ec((n=t.g).b,oc,n.a)}).then(function(){return e})}function Tc(t){this.a=t,this.b=Ju()}(t=yc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(br(void 0)?yr().then(function(){return new _e(function(t,e){var n=a.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):ke(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof xr("universalLinks.subscribe",a))throw bc("cordova-universal-links-plugin-fix is not installed");if(void 0===xr("BuildInfo.packageName",a))throw bc("cordova-plugin-buildinfo is not installed");if("function"!=typeof xr("cordova.plugins.browsertab.openUrl",a))throw bc("cordova-plugin-browsertab is not installed");if("function"!=typeof xr("cordova.InAppBrowser.open",a))throw bc("cordova-plugin-inappbrowser is not installed")},function(){throw new C("cordova-not-ready")})},t.Ob=function(t,e){return e(new C("operation-not-supported-in-this-environment")),Se()},t.Mb=function(){return ke(new C("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return ke(new C("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=Se().then(function(){return Uo(e),wc(i)}).then(function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Vo(e,r,null,o,new C("no-auth-event"),null,i),u=xr("BuildInfo.packageName",a);if("string"!=typeof u)throw new C("invalid-cordova-configuration");var c=xr("BuildInfo.displayName",a),l={};if(Ar().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!Ar().toLowerCase().match(/android/))return ke(new C("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new vc;pc(e,t),t=[];var n=8*e.g;pc(e,fc,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(dc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return W(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),l.sessionId=o;var h=gu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then(function(){var e=t.h;return t.C.a.set(oc,s.w(),e)}).then(function(){var e=xr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new C("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=xr("cordova.plugins.browsertab.openUrl",a)))throw new C("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=xr("cordova.InAppBrowser.open",a)))throw new C("invalid-cordova-configuration");e=Ar(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new _e(function(t,e){u=function(){var e=xr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){Hr()&&c()},o.addEventListener("resume",c=function(){s||(s=Cn(2e3).then(function(){e(new C("redirect-cancelled-by-user"))}))},!1),Ar().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).o(function(t){return Ic(i).then(function(){throw t})})}).oa(function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.Sa(u),i.c=null})},t.Ea=function(t){this.b.push(t),wc(this).o(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Vo("unknown",null,null,null,new C("no-auth-event")),t(e))})},t.Sa=function(t){Y(this.b,function(e){return e==t})};var Ec={name:"pendingRedirect",F:"session"};function Oc(t){return ec(t.b,Ec,t.a)}function Cc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=w(this.s,this),this.b=new qc,this.C=new Wc,this.g=new Tc(Uc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Sc(this.D,this.v,this.m,k,this.J)}function Sc(t,e,n,i,o){var s=r.default.SDK_VERSION||null;return br()?new yc(t,e,n,s,i,o):new hu(t,e,n,s,i,o)}function kc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o(function(n){throw t.a==e&&t.reset(),n})}function Ac(t){t.a.Xb()&&kc(t).o(function(e){var n=new Vo("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));Dc(e)&&t.s(n)}),t.a.Tb()||Bc(t.b)}function xc(t,e){$(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Ec,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?Oc(t.g).then(function(){kc(t).o(function(e){var n=new Vo("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));Dc(e)&&t.s(n)})}):Ac(t)}).o(function(){Ac(t)})}function Nc(t,e){Y(t.h,function(t){return t==e})}Cc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Sc(this.D,this.v,this.m,null,this.J),this.i={}},Cc.prototype.s=function(t){if(!t)throw new C("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Bc(this.b),e};var jc=new Br(2e3,1e4),Pc=new Br(3e4,6e4);function Rc(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function Dc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Mc(t,e,n,r,i){var o;return function(t){return t.b.set(Ec,"pending",t.a)}(t.g).then(function(){return t.a.Nb(e,n,r,i).o(function(e){if(Dc(e))throw new C("operation-not-supported-in-this-environment");return o=e,Oc(t.g).then(function(){throw o})}).then(function(){return t.a.$b()?new _e(function(){}):Oc(t.g).then(function(){return t.qa()}).then(function(){}).o(function(){})})})}function Lc(t,e,n,r,i){return t.a.Ob(r,function(t){e.na(n,null,t,i)},jc.get())}Cc.prototype.qa=function(){return this.b.qa()};var Fc={};function Uc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Vc(t,e,n,r){var i=Uc(e,n,r);return Fc[i]||(Fc[i]=new Cc(t,e,n,r)),Fc[i]}function qc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Bc(t){t.g||(t.g=!0,Kc(t,!1,null,null))}function Hc(t){t.g&&!t.i&&Kc(t,!1,null,null)}function zc(t,e){if(t.b=function(){return Se(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Kc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return ke(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):zc(t,n):zc(t,{user:null}),t.f=[],t.c=[]}function Wc(){}function Gc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function $c(t,e){this.a=e,Yr(this,"verificationId",t)}function Qc(t,e,n,r){return new Mo(t).fb(e,n).then(function(t){return new $c(t,r)})}function Yc(t){var e=zi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new C("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Xr(this,{token:t,expirationTime:zr(1e3*e.exp),authTime:zr(1e3*e.auth_time),issuedAtTime:zr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Xc(t,e,n){var r=e&&e[Zc];if(!r)throw new C("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;z(e[Jc]||[],function(t){(t=ei(t))&&i.b.push(t)}),Yr(this,"auth",this.a),Yr(this,"session",this.c),Yr(this,"hints",this.b)}qc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},qc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Kc(this,!0,null,t.a),Se()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then(function(e){Kc(t,a,e,null)}).o(function(e){Kc(t,a,null,e)})}(this,t,e):ke(new C("invalid-auth-event")):(Kc(this,!1,null,null),Se())}else ke(new C("invalid-auth-event"))},qc.prototype.qa=function(){var t=this;return new _e(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new C("timeout");t.a&&t.a.cancel(),t.a=Cn(Pc.get()).then(function(){t.b||(t.g=!0,Kc(t,!0,null,e))})}(t))})},Wc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Se()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then(function(t){e.na(r,t,null,n)}).o(function(t){e.na(r,null,t,n)})}(t,e):ke(new C("invalid-auth-event"))}else ke(new C("invalid-auth-event"))},$c.prototype.confirm=function(t){return t=Lo(this.verificationId,t),this.a(t)};var Jc="mfaInfo",Zc="mfaPendingCredential";function tl(t,e,n,r){C.call(this,"multi-factor-auth-required",r,e),this.b=new Xc(t,e,n),Yr(this,"resolver",this.b)}function el(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new tl(e,t.serverResponse,n,t.message)}catch(r){}return null}function nl(){}function rl(t){Yr(this,"factorId",t.fa),this.a=t}function il(t){if(rl.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new C("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ol(t,e){for(var n in Ye.call(this,t),e)this[n]=e[n]}function sl(t,e){this.a=t,this.b=[],this.c=w(this.yc,this),cn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&z(e.multiFactor.enrolledFactors,function(t){var e=null,r={};if(t){t.uid&&(r[ii]=t.uid),t.displayName&&(r[ni]=t.displayName),t.enrollmentTime&&(r[ri]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[oi]=t.phoneNumber);try{e=new si(r)}catch(i){}t=e}else t=null;t&&n.push(t)}),al(this,n)}function al(t,e){t.b=e,Yr(t,"enrolledFactors",e)}function ul(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function cl(t,e){t.stop(),t.b=Cn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then(function(){return function(){var t=a.document,e=null;return Hr()||!t?Se():new _e(function(n){e=function(){Hr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).o(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return t.h()}).then(function(){cl(t,!0)}).o(function(e){t.i(e)&&cl(t,!1)})}function ll(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function hl(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function fl(t,e){t.b=Hi(e[Ys]||""),t.a=e.refreshToken,hl(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function dl(t,e){this.a=t||null,this.b=e||null,Xr(this,{lastSignInTime:zr(e||null),creationTime:zr(t||null)})}function pl(t,e,n,r,i,o){Xr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function gl(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=r.default.SDK_VERSION?kr(r.default.SDK_VERSION):null;this.a=new $s(this.l,j(k),i),t.emulatorConfig&&na(this.a,t.emulatorConfig),this.b=new ll(this.a),Tl(this,e[Ys]),fl(this.b,e),Yr(this,"refreshToken",this.b.a),Cl(this,n||{}),wn.call(this),this.R=!1,this.s&&jr()&&(this.i=Vc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new ul(function(){return t.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0})}(this),this.aa=w(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){na(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){yl(o,t.f)},this.ba=null,this.O=new sl(this,n),Yr(this,"multiFactor",this.O)}function vl(t,e){t.ja&&fn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&cn(e,"languageCodeChanged",t.Oa)}function ml(t,e){t.X&&fn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&cn(e,"emulatorConfigChanged",t.Aa)}function yl(t,e){t.$=e,ia(t.a,r.default.SDK_VERSION?kr(r.default.SDK_VERSION,t.$):null)}function bl(t,e){t.ba&&fn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&cn(e,"frameworkChanged",t.Ba)}function _l(t){try{return r.default.app(t.m).auth()}catch(e){throw new C("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function wl(t){t.D||t.u.b||(t.u.start(),fn(t,"tokenChanged",t.aa),cn(t,"tokenChanged",t.aa))}function Il(t){fn(t,"tokenChanged",t.aa),t.u.stop()}function Tl(t,e){t.za=e,Yr(t,"_lat",e)}function El(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return xe(e).then(function(){return t})}function Ol(t){t.i&&!t.R&&(t.R=!0,xc(t.i,t))}function Cl(t,e){Xr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new dl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Sl(){}function kl(t){return Se().then(function(){if(t.D)throw new C("app-deleted")})}function Al(t){return W(t.providerData,function(t){return t.providerId})}function xl(t,e){e&&(Nl(t,e.providerId),t.providerData.push(e))}function Nl(t,e){Y(t.providerData,function(t){return t.providerId==e})}function jl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Yr(t,e,n)}function Pl(t,e){t!=e&&(Xr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Yr(t,"metadata",e.metadata?function(t){return new dl(t.a,t.b)}(e.metadata):new dl),z(e.providerData,function(e){xl(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Yr(t,"refreshToken",t.b.a),al(t.O,e.O.b))}function Rl(t){return t.I().then(function(e){var n=t.isAnonymous;return function(t,e){return tu(t.a,Na,{idToken:e}).then(w(t.Kc,t))}(t,e).then(function(){return n||jl(t,"isAnonymous",!1),e})})}function Dl(t,e){e[Ys]&&t.za!=e[Ys]&&(fl(t.b,e),t.dispatchEvent(new ol("tokenChanged")),Tl(t,e[Ys]),jl(t,"refreshToken",t.b.a))}function Ml(t,e){return Rl(t).then(function(){if($(Al(t),e))return El(t).then(function(){throw new C("provider-already-linked")})})}function Ll(t,e,n){return Jr({user:t,credential:Fo(e),additionalUserInfo:e=Qi(e),operationType:n})}function Fl(t,e){return Dl(t,e),t.reload().then(function(){return t})}function Ul(t,e,n,i,o){if(!jr())return ke(new C("operation-not-supported-in-this-environment"));if(t.h&&!o)return ke(t.h);var s=$i(n.providerId),a=Ur(t.uid+":::"),u=null;(!Dr()||_r())&&t.s&&n.isOAuthProvider&&(u=gu(t.s,t.l,t.m,e,n,null,a,r.default.SDK_VERSION||null,null,null,t.tenantId));var c=gr(u,s&&s.ua,s&&s.ta);return i=i().then(function(){if(ql(t),!o)return t.I().then(function(){})}).then(function(){return Rc(t.i,c,e,n,a,!!u,t.tenantId)}).then(function(){return new _e(function(n,r){t.na(e,null,new C("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Lc(t.i,t,e,c,a)})}).then(function(t){return c&&pr(c),t?Jr(t):null}).o(function(t){throw c&&pr(c),t}),Bl(t,i,o)}function Vl(t,e,n,r,i){if(!jr())return ke(new C("operation-not-supported-in-this-environment"));if(t.h&&!i)return ke(t.h);var o=null,s=Ur(t.uid+":::");return r=r().then(function(){if(ql(t),!i)return t.I().then(function(){})}).then(function(){return t.ga=s,El(t)}).then(function(e){return t.ha&&(e=(e=t.ha).b.set(Kl,t.w(),e.a)),e}).then(function(){return Mc(t.i,e,n,s,t.tenantId)}).o(function(e){if(o=e,t.ha)return Wl(t.ha);throw o}).then(function(){if(o)throw o}),Bl(t,r,i)}function ql(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new C("internal-error");throw new C("auth-domain-config-required")}}function Bl(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),ke(t.h)):e.o(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new ol("userInvalidated")),t.h=e),e})}(t,e,n);return t.J.push(r),r.oa(function(){Q(t.J,r)}),r.o(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=el(e.w(),_l(t),w(t.jc,t))),n||e})}function Hl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ys]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new gl(e,n,t);return t.providerData&&z(t.providerData,function(t){t&&xl(i,Jr(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function zl(t){this.a=t,this.b=Ju()}Xc.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then(function(t){var n=gt(e.f);return delete n[Jc],delete n[Zc],mt(n,t),e.g(n)})},E(tl,C),nl.prototype.sb=function(t,e,n){return e.type==so?function(t,e,n,r){return n.Ha().then(function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),mt(n,{phoneVerificationInfo:Do(t.a)}),tu(e,Aa,n)})}(this,t,e,n):function(t,e,n){return n.Ha().then(function(n){return mt(n={mfaPendingCredential:n},{phoneVerificationInfo:Do(t.a)}),tu(e,xa,n)})}(this,t,e)},E(rl,nl),E(il,rl),E(ol,Ye),(t=sl.prototype).yc=function(t){al(this,function(t){var e=[];return z(t.mfaInfo||[],function(t){(t=ei(t))&&e.push(t)}),e}(t.hd))},t.Rb=function(){return this.a.I().then(function(t){return new oo(t,null)})},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then(function(n){return t.sb(r,n,e)}).then(function(t){return Dl(n.a,t),n.a.reload()})},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then(function(t){return tu(r,Za,{idToken:t,mfaEnrollmentId:n})}).then(function(t){var r=K(e.b,function(t){return t.uid!=n});return al(e,r),Dl(e.a,t),e.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:W(this.b,function(t){return t.w()})}}},ul.prototype.start=function(){this.a=this.c,cl(this,!0)},ul.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ll.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},ll.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?ke(new C("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new _e(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?oa(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?r(nu(t)):t.access_token&&t.refresh_token?n(t):r(new C("internal-error")):r(new C("network-request-failed"))},"POST",Xn(e).toString(),t.g,t.m.get()):r(new C("internal-error"))})}(t.f,e).then(function(e){return t.b=Hi(e.access_token),t.a=e.refresh_token,hl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Se(null):Se({accessToken:this.b.toString(),refreshToken:this.a})},dl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(gl,wn),gl.prototype.wa=function(t){this.ya=t,ea(this.a,t)},gl.prototype.la=function(){return this.ya},gl.prototype.Ga=function(){return J(this.$)},gl.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Yr(gl.prototype,"providerId","firebase"),(t=gl.prototype).reload=function(){var t=this;return Bl(this,kl(this).then(function(){return Rl(t).then(function(){return El(t)}).then(Sl)}))},t.oc=function(t){return this.I(t).then(function(t){return new Yc(t)})},t.I=function(t){var e=this;return Bl(this,kl(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new C("internal-error");return t.accessToken!=e.za&&(Tl(e,t.accessToken),e.dispatchEvent(new ol("tokenChanged"))),jl(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new C("internal-error");Cl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?W(t,function(t){return new pl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)xl(this,e[n]);jl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ol("userReloaded",{hd:t}))},t.Lc=function(t){return $r("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Bl(this,t.c(this.a,this.uid).then(function(t){return Dl(e,t),n=Ll(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return $r("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Bl(this,Ml(this,t.providerId).then(function(){return e.I()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=Ll(e,t,"link"),Fl(e,t)}).then(function(){return n}))},t.Dc=function(t,e){var n=this;return Bl(this,Ml(this,"phone").then(function(){return Qc(_l(n),t,e,w(n.qb,n))}))},t.Mc=function(t,e){var n=this;return Bl(this,Se().then(function(){return Qc(_l(n),t,e,w(n.tb,n))}),!0)},t.Bb=function(t){var e=this;return Bl(this,this.I().then(function(n){return e.a.Bb(n,t)}).then(function(t){return Dl(e,t),e.reload()}))},t.ed=function(t){var e=this;return Bl(this,this.I().then(function(n){return t.b(e.a,n)}).then(function(t){return Dl(e,t),e.reload()}))},t.Cb=function(t){var e=this;return Bl(this,this.I().then(function(n){return e.a.Cb(n,t)}).then(function(t){return Dl(e,t),e.reload()}))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return kl(this);var e=this;return Bl(this,this.I().then(function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Dl(e,t),jl(e,"displayName",t.displayName||null),jl(e,"photoURL",t.photoUrl||null),z(e.providerData,function(t){"password"===t.providerId&&(Yr(t,"displayName",e.displayName),Yr(t,"photoURL",e.photoURL))}),El(e)}).then(Sl))},t.cd=function(t){var e=this;return Bl(this,Rl(this).then(function(n){return $(Al(e),t)?function(t,e,n){return tu(t,Ca,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return z(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),z(Al(e),function(t){n[t]||Nl(e,t)}),n[Mo.PROVIDER_ID]||Yr(e,"phoneNumber",null),El(e)}):El(e).then(function(){throw new C("no-such-provider")})}))},t.delete=function(){var t=this;return Bl(this,this.I().then(function(e){return tu(t.a,Oa,{idToken:e})}).then(function(){t.dispatchEvent(new ol("userDeleted"))})).then(function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");vl(t,null),ml(t,null),bl(t,null),t.J=[],t.D=!0,Il(t),Yr(t,"refreshToken",null),t.i&&Nc(t.i,t)})},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?w(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?w(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?w(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?w(this.Lb,this):null},t.Ec=function(t){var e=this;return Ul(this,"linkViaPopup",t,function(){return Ml(e,t.providerId).then(function(){return El(e)})},!1)},t.Nc=function(t){return Ul(this,"reauthViaPopup",t,function(){return Se()},!0)},t.Fc=function(t){var e=this;return Vl(this,"linkViaRedirect",t,function(){return Ml(e,t.providerId)},!1)},t.Oc=function(t){return Vl(this,"reauthViaRedirect",t,function(){return Se()},!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Bl(this,this.I().then(function(n){return ya(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})}).then(function(t){return o=Ll(i,t,"link"),Fl(i,t)}).then(function(){return o}))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Bl(this,Se().then(function(){return co(ba(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Ll(i,t,"reauthenticate"),Dl(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.ub=function(t){var e=this,n=null;return Bl(this,this.I().then(function(e){return n=e,void 0===t||pt(t)?{}:Vi(new xi(t))}).then(function(t){return e.a.ub(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.Eb=function(t,e){var n=this,r=null;return Bl(this,this.I().then(function(t){return r=t,void 0===e||pt(e)?{}:Vi(new xi(e))}).then(function(e){return n.a.Eb(r,t,e)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return Bl(this,t=co(Se(t),n.uid).then(function(t){return e=Ll(n,t,"reauthenticate"),Dl(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&mt(t,this.metadata.w()),z(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),mt(t,this.O.w()),t};var Kl={name:"redirectUser",F:"session"};function Wl(t){return ec(t.b,Kl,t.a)}function Gl(t){this.a=t,this.b=Ju(),this.c=null,this.f=function(t){var e=Yl("local"),n=Yl("session"),r=Yl("none");return function(t,e,n){var r=tc(e,n),i=Zu(t,e.F);return t.get(e,n).then(function(o){var s=null;try{s=Fr(a.localStorage.getItem(r))}catch(u){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Ql,t.a).then(function(t){return t?Yl(t):e})})})}).then(function(e){return t.c=e,$l(t,e.F)}).o(function(){t.c||(t.c=e)})}(this),this.b.addListener(Yl("local"),this.a,w(this.g,this))}function $l(t,e){var n,r=[];for(n in Yu)Yu[n]!==e&&r.push(ec(t.b,Yl(Yu[n]),t.a));return r.push(ec(t.b,Ql,t.a)),function(t){return new _e(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Ae(t[a],I(o,a),s);else e(i)})}(r)}Gl.prototype.g=function(){var t=this,e=Yl("local");th(this,function(){return Se().then(function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null}).then(function(n){if(n)return $l(t,"local").then(function(){t.c=e})})})};var Ql={name:"persistence",F:"session"};function Yl(t){return{name:"authUser",F:t}}function Xl(t,e){return th(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Jl(t){return th(t,function(){return ec(t.b,t.c,t.a)})}function Zl(t,e,n){return th(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Hl(t||{})})})}function th(t,e){return t.f=t.f.then(e,e),t.f}function eh(t){if(this.l=!1,Yr(this,"settings",new Gc),Yr(this,"app",t),!ch(this).options||!ch(this).options.apiKey)throw new C("invalid-api-key");t=r.default.SDK_VERSION?kr(r.default.SDK_VERSION):null,this.a=new $s(ch(this).options&&ch(this).options.apiKey,j(k),t),this.R=[],this.s=[],this.O=[],this.hb=r.default.INTERNAL.createSubscribe(w(this.zc,this)),this.X=void 0,this.bc=r.default.INTERNAL.createSubscribe(w(this.Ac,this)),ah(this,null),this.i=new Gl(ch(this).options.apiKey+":"+ch(this).name),this.D=new zl(ch(this).options.apiKey+":"+ch(this).name),this.$=dh(this,function(t){var e=ch(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Kl,t.a).then(function(t){return t&&e&&(t.authDomain=e),Hl(t||{})})}(t.D,ch(t).options.authDomain).then(function(e){return(t.m=e)&&(e.ha=t.D),Wl(t.D)});return dh(t,e)}(t).then(function(){return Zl(t.i,e,t.P)}).then(function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Xl(t.i,e).then(function(){return e})}).o(function(n){return"auth/network-request-failed"==n.code?e:Jl(t.i)})):null}).then(function(e){ah(t,e||null)});return dh(t,n)}(this)),this.h=dh(this,function(t){return t.$.then(function(){return sh(t)}).o(function(){}).then(function(){if(!t.l)return t.ja()}).o(function(){}).then(function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Yl("local"),e.a,t.ja)}})}(this)),this.ba=!1,this.ja=w(this.Zc,this),this.Ba=w(this.da,this),this.ya=w(this.mc,this),this.za=w(this.wc,this),this.Aa=w(this.xc,this),this.b=null,function(t){var e=ch(t).options.authDomain,n=ch(t).options.apiKey;e&&jr()&&(t.Oa=t.$.then(function(){if(!t.l){if(t.b=Vc(e,n,ch(t).name,t.P),xc(t.b,t),lh(t)&&Ol(lh(t)),t.m){Ol(t.m);var r=t.m;r.wa(t.la()),vl(r,t),yl(r=t.m,t.J),bl(r,t),na((r=t.m).a,t.P),ml(r,t),t.m=null}return t.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Gc,this),this.u=0,wn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=Un(this.P.url);t=Jr({protocol:t.c,host:t.a,port:t.g,options:Jr({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function nh(t){Ye.call(this,"languageCodeChanged"),this.h=t}function rh(t){Ye.call(this,"emulatorConfigChanged"),this.c=t}function ih(t){Ye.call(this,"frameworkChanged"),this.f=t}function oh(t){return t.Oa||ke(new C("auth-domain-config-required"))}function sh(t){if(!jr())return ke(new C("operation-not-supported-in-this-environment"));var e=oh(t).then(function(){return t.b.qa()}).then(function(t){return t?Jr(t):null});return dh(t,e)}function ah(t,e){lh(t)&&(function(t,e){Y(t.S,function(t){return t==e})}(lh(t),t.Ba),fn(lh(t),"tokenChanged",t.ya),fn(lh(t),"userDeleted",t.za),fn(lh(t),"userInvalidated",t.Aa),Il(lh(t))),e&&(e.S.push(t.Ba),cn(e,"tokenChanged",t.ya),cn(e,"userDeleted",t.za),cn(e,"userInvalidated",t.Aa),0<t.u&&wl(e)),Yr(t,"currentUser",e),e&&(e.wa(t.la()),vl(e,t),yl(e,t.J),bl(e,t),na(e.a,t.P),ml(e,t))}function uh(t,e){var n=null,r=null;return dh(t,e.then(function(e){return n=Fo(e),r=Qi(e),function(t,e){var n={};return n.apiKey=ch(t).options.apiKey,n.authDomain=ch(t).options.authDomain,n.appName=ch(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then(function(){return function(t,e,n,r){var i=new gl(t,e);return n&&(i.ha=n),r&&yl(i,r),i.reload().then(function(){return i})}(n,e,t.D,t.Ga())}).then(function(e){return lh(t)&&e.uid==lh(t).uid?(Pl(lh(t),e),t.da(e)):(ah(t,e),Ol(e),t.da(e))}).then(function(){fh(t)})}(t,e)},function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=el(e.w(),t,w(t.kc,t))),n||e}).then(function(){return Jr({user:lh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function ch(t){return t.app}function lh(t){return t.currentUser}function hh(t){return lh(t)&&lh(t)._lat||null}function fh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](hh(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](hh(t))}}function dh(t,e){return t.R.push(e),e.oa(function(){Q(t.R,e)}),e}function ph(){}function gh(){this.a={},this.b=1e12}Gl.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new C("invalid-persistence-type"),n=new C("unsupported-persistence-type");t:{for(r in Yu)if(Yu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Ir()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Au()&&"none"!==t)throw n;break;default:if(!Nr()&&"none"!==t)throw n}}(t),th(this,function(){return t!=n.c.F?n.b.get(n.c,n.a).then(function(r){return e=r,$l(n,t)}).then(function(){if(n.c=Yl(t),e)return n.b.set(n.c,e,n.a)}):Se()})},E(eh,wn),E(nh,Ye),E(rh,Ye),E(ih,Ye),(t=eh.prototype).xb=function(t){return dh(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,ea(this.a,this.aa),this.dispatchEvent(new nh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new C("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&yr().then(function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)})})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,na(this.a,this.P),this.dispatchEvent(new rh(this.P))}},t.Gc=function(t){this.J.push(t),ia(this.a,r.default.SDK_VERSION?kr(r.default.SDK_VERSION,this.J):null),this.dispatchEvent(new ih(this.J))},t.Ga=function(){return J(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:ch(this).options.apiKey,authDomain:ch(this).options.authDomain,appName:ch(this).name,currentUser:lh(this)&&lh(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?w(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return uh(i,ma(i.a,o))})},t.Xc=function(t){if(!jr())return ke(new C("operation-not-supported-in-this-environment"));var e=this,n=$i(t.providerId),i=Ur(),o=null;(!Dr()||_r())&&ch(this).options.authDomain&&t.isOAuthProvider&&(o=gu(ch(this).options.authDomain,ch(this).options.apiKey,ch(this).name,"signInViaPopup",t,null,i,r.default.SDK_VERSION||null,null,null,this.T(),this.P));var s=gr(o,n&&n.ua,n&&n.ta);return dh(this,n=oh(this).then(function(n){return Rc(n,s,"signInViaPopup",t,i,!!o,e.T())}).then(function(){return new _e(function(t,n){e.na("signInViaPopup",null,new C("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=i,e.c=Lc(e.b,e,"signInViaPopup",s,i)})}).then(function(t){return s&&pr(s),t?Jr(t):null}).o(function(t){throw s&&pr(s),t}))},t.Yc=function(t){if(!jr())return ke(new C("operation-not-supported-in-this-environment"));var e=this;return dh(this,oh(this).then(function(){return function(t){return th(t,function(){return t.b.set(Ql,t.c.F,t.a)})}(e.i)}).then(function(){return Mc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.qa=function(){var t=this;return sh(this).then(function(e){return t.b&&Hc(t.b.b),e}).o(function(e){throw t.b&&Hc(t.b.b),e})},t.dd=function(t){if(!t)return ke(new C("null-user"));if(this.S!=t.tenantId)return ke(new C("tenant-id-mismatch"));var e=this,n={};n.apiKey=ch(this).options.apiKey,n.authDomain=ch(this).options.authDomain,n.appName=ch(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Ys]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new gl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&yl(e,r),Pl(e,t),e}(t,n,e.D,e.Ga());return dh(this,this.h.then(function(){if(ch(e).options.apiKey!=t.l)return r.reload()}).then(function(){return lh(e)&&t.uid==lh(e).uid?(Pl(lh(e),t),e.da(t)):(ah(e,r),Ol(r),e.da(r))}).then(function(){fh(e)}))},t.Ab=function(){var t=this;return dh(this,this.h.then(function(){return t.b&&Hc(t.b.b),lh(t)?(ah(t,null),Jl(t.i).then(function(){fh(t)})):Se()}))},t.Zc=function(){var t=this;return Zl(this.i,ch(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=lh(t)&&e){n=lh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Pl(lh(t),e),lh(t).I();(lh(t)||e)&&(ah(t,e),e&&(Ol(e),e.ha=t.D),t.b&&xc(t.b,t),fh(t))}})},t.da=function(t){return Xl(this.i,t)},t.mc=function(){fh(this),this.da(lh(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then(function(){return uh(e,Se(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(lh(e))})},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),dh(t,t.h.then(function(){!t.l&&$(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(hh(t)))}))}(this,function(){t.next(lh(e))})},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(lh(r)):"function"==typeof t.next&&t.next(lh(r))}),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(lh(r)):"function"==typeof t.next&&t.next(lh(r))}),this.bc(t,e,n)},t.nc=function(t){var e=this;return dh(this,this.h.then(function(){return lh(e)?lh(e).I(t).then(function(t){return{accessToken:t}}):null}))},t.Tc=function(t){var e=this;return this.h.then(function(){return uh(e,tu(e.a,$a,{token:t}))}).then(function(t){var n=t.user;return jl(n,"isAnonymous",!1),e.da(n),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return uh(n,tu(n.a,Qa,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return uh(n,tu(n.a,Ta,{email:t,password:e}))})},t.$a=function(t){var e=this;return this.h.then(function(){return uh(e,t.ka(e.a))})},t.Sc=function(t){return $r("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then(function(){var e=lh(t);if(e&&e.isAnonymous){var n=Jr({providerId:null,isNewUser:!1});return Jr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return uh(t,t.a.zb()).then(function(e){var n=e.user;return jl(n,"isAnonymous",!0),t.da(n),e})})},t.getUid=function(){return lh(this)&&lh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&lh(this)&&wl(lh(this))},t.Pc=function(t){var e=this;z(this.s,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&lh(this)&&Il(lh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),dh(this,this.h.then(function(){e.l||$(e.s,t)&&t(hh(e))}))},t.removeAuthTokenListener=function(t){Y(this.s,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Yl("local"),t.a,this.ja),this.b&&(Nc(this.b,this),Hc(this.b.b)),Promise.resolve()},t.hc=function(t){return dh(this,function(t,e){return tu(t,Ea,{identifier:e,continueUri:Pr()?lr():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.a,t))},t.Bc=function(t){return!!jo(t)},t.wb=function(t,e){var n=this;return dh(this,Se().then(function(){var t=new xi(e);if(!t.c)throw new C("argument-error",Pi+" must be true when sending sign in link to email");return Vi(t)}).then(function(e){return n.a.wb(t,e)}).then(function(){}))},t.jd=function(t){return this.Ra(t).then(function(t){return t.data.email})},t.nb=function(t,e){return dh(this,this.a.nb(t,e).then(function(){}))},t.Ra=function(t){return dh(this,this.a.Ra(t).then(function(t){return new ai(t)}))},t.jb=function(t){return dh(this,this.a.jb(t).then(function(){}))},t.vb=function(t,e){var n=this;return dh(this,Se().then(function(){return void 0===e||pt(e)?{}:Vi(new xi(e))}).then(function(e){return n.a.vb(t,e)}).then(function(){}))},t.Wc=function(t,e){return dh(this,Qc(this,t,e,w(this.$a,this)))},t.Vc=function(t,e){var n=this;return dh(this,Se().then(function(){var r=e||lr(),i=No(t,r);if(!(r=jo(r)))throw new C("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new C("tenant-id-mismatch");return n.$a(i)}))},ph.prototype.render=function(){},ph.prototype.reset=function(){},ph.prototype.getResponse=function(){},ph.prototype.execute=function(){};var vh=null;function mh(t,e){return(e=yh(e))&&t.a[e]||null}function yh(t){return(t=void 0===t?1e12:t)?t.toString():null}function bh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ue(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():cn(this.f,"click",this.i)}function _h(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function wh(){}function Ih(){}gh.prototype.render=function(t,e){return this.a[this.b.toString()]=new bh(t,e),this.b++},gh.prototype.reset=function(t){var e=mh(this,t);t=yh(t),e&&t&&(e.delete(),delete this.a[t])},gh.prototype.getResponse=function(t){return(t=mh(this,t))?t.getResponse():null},gh.prototype.execute=function(t){(t=mh(this,t))&&t.execute()},bh.prototype.getResponse=function(){return _h(this),this.b},bh.prototype.execute=function(){_h(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()},6e4)},500))},bh.prototype.delete=function(){_h(this),this.g=!0,clearTimeout(this.a),this.a=null,fn(this.f,"click",this.i)},Yr(wh,"FACTOR_ID","phone"),Ih.prototype.g=function(){return vh||(vh=new gh),Se(vh)},Ih.prototype.c=function(){};var Th=null;function Eh(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Oh=new bt(Tt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ch=new Br(3e4,6e4);Eh.prototype.g=function(t){var e=this;return new _e(function(n,r){var i=setTimeout(function(){r(new C("network-request-failed"))},Ch.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new C("internal-error"));delete a[e.a]},Se(qs(St(Oh,{onload:e.a,hl:t||""}))).o(function(){clearTimeout(i),r(new C("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(a.grecaptcha))})},Eh.prototype.c=function(){this.b--};var Sh=null;function kh(t,e,n,r,i,o,s){if(Yr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s?(Th||(Th=new Ih),s=Th):(Sh||(Sh=new Eh),s=Sh),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Nh])throw new C("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[jh],!a.document)throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ue(e)||!this.i&&ue(e).hasChildNodes())throw new C("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new $s(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ah];this.a[Ah]=function(t){if(Ph(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=xr(c,a);"function"==typeof e&&e(t)}};var l=this.a[xh];this.a[xh]=function(){if(Ph(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=xr(l,a);"function"==typeof t&&t()}}}var Ah="callback",xh="expired-callback",Nh="sitekey",jh="size";function Ph(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Rh(t,e){return t.h.push(e),e.oa(function(){Q(t.h,e)}),e}function Dh(t){if(t.D)throw new C("internal-error","RecaptchaVerifier instance has been destroyed.")}function Mh(t,e,n){var i=!1;try{this.b=n||r.default.app()}catch(a){throw new C("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new C("invalid-api-key");n=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(a){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}s=r.default.SDK_VERSION?kr(r.default.SDK_VERSION,s):null,kh.call(this,n,t,e,function(){try{var t=o.b.auth().la()}catch(e){t=null}return t},s,j(k),i)}function Lh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new C("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Fh.length)throw new C("internal-error","Argument validator received an unsupported number of arguments.");n=Fh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new C("argument-error",t+" failed: "+r)}(t=kh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Rh(this,Se().then(function(){if(Pr()&&!wr())return yr();throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.u())}).then(function(e){return t.g=e,tu(t.s,La,{})}).then(function(e){t.a[Nh]=e.recaptchaSiteKey}).o(function(e){throw t.f=null,e}))},t.render=function(){Dh(this);var t=this;return Rh(this,this.Ia().then(function(){if(null===t.c){var e=t.v;if(!t.i){var n=ue(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ae&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',zt(s.name),'"'),s.type){o.push(' type="',zt(s.type),'"');var a={};mt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=pe(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ce(o,s)),2<r.length&&de(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Dh(this);var t=this;return Rh(this,this.render().then(function(e){return new _e(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,function(t){return t==e})}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){Dh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Dh(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ue(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},E(Mh,kh);var Fh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Uh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Vh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function qh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:g}}function Bh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Hh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function zh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.ka||t&&e.providerId!==t)}}}function Kh(t,e){return g(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Wh(t){return g(t)&&"string"==typeof t.uid}function Gh(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function $h(t,e){for(var n in e){var r=e[n].name;t[r]=Xh(r,t[n],e[n].j)}}function Qh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:I(function(t){return this[t]},n),set:I(function(t,e,n,r){Lh(t,[n],[r],!0),this[e]=r},r,n,e[n].kb),enumerable:!0})}}function Yh(t,e,n,r){t[e]=Xh(e,n,r)}function Xh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Lh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}$h(eh.prototype,{jb:{name:"applyActionCode",j:[Uh("code")]},Ra:{name:"checkActionCode",j:[Uh("code")]},nb:{name:"confirmPasswordReset",j:[Uh("code"),Uh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Uh("email"),Uh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Uh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Uh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Gh(qh(),Bh(),"nextOrObserver"),Bh("opt_error",!0),Bh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Gh(qh(),Bh(),"nextOrObserver"),Bh("opt_error",!0),Bh("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Uh("email"),Gh(qh("opt_actionCodeSettings",!0),Hh(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Uh("email"),qh("actionCodeSettings")]},xb:{name:"setPersistence",j:[Uh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[zh()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[zh()]},Tc:{name:"signInWithCustomToken",j:[Uh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Uh("email"),Uh("password")]},Vc:{name:"signInWithEmailLink",j:[Uh("email"),Uh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Gh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof gl)}},Hh(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Uh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Uh("url"),qh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Uh("code")]}}),Qh(eh.prototype,{lc:{name:"languageCode",kb:Gh(Uh(),Hh(),"languageCode")},ti:{name:"tenantId",kb:Gh(Uh(),Hh(),"tenantId")}}),(eh.Persistence=Yu).LOCAL="local",eh.Persistence.SESSION="session",eh.Persistence.NONE="none",$h(gl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Vh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Vh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[zh()]},qb:{name:"linkWithCredential",j:[zh()]},Dc:{name:"linkWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[zh()]},tb:{name:"reauthenticateWithCredential",j:[zh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Gh(qh("opt_actionCodeSettings",!0),Hh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Uh(null,!0)]},cd:{name:"unlink",j:[Uh("provider")]},Bb:{name:"updateEmail",j:[Uh("email")]},Cb:{name:"updatePassword",j:[Uh("password")]},ed:{name:"updatePhoneNumber",j:[zh("phone")]},Db:{name:"updateProfile",j:[qh("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Uh("email"),Gh(qh("opt_actionCodeSettings",!0),Hh(null,!0),"opt_actionCodeSettings",!0)]}}),$h(gh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$h(ph.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$h(_e.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Qh(Gc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Vh("appVerificationDisabledForTesting")}}),$h($c.prototype,{confirm:{name:"confirm",j:[Uh("verificationCode")]}}),Yh(uo,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[vo,Ao,Ro,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Gh(Uh(),qh(),"json")]),Yh(xo,"credential",function(t,e){return new ko(t,e)},[Uh("email"),Uh("password")]),$h(ko.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),$h(_o.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(_o,"credential",wo,[Gh(Uh(),qh(),"token")]),Yh(xo,"credentialWithLink",No,[Uh("email"),Uh("emailLink")]),$h(Io.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(Io,"credential",To,[Gh(Uh(),qh(),"token")]),$h(Eo.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(Eo,"credential",Oo,[Gh(Uh(),Gh(qh(),Hh()),"idToken"),Gh(Uh(),Hh(),"accessToken",!0)]),$h(Co.prototype,{Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(Co,"credential",So,[Gh(Uh(),qh(),"token"),Uh("secret",!0)]),$h(bo.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},credential:{name:"credential",j:[Gh(Uh(),Gh(qh(),Hh()),"optionsOrIdToken"),Gh(Uh(),Hh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),$h(po.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),$h(lo.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Yh(Mo,"credential",Lo,[Uh("verificationId"),Uh("verificationCode")]),$h(Mo.prototype,{fb:{name:"verifyPhoneNumber",j:[Gh(Uh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Kh(t.session,so)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Kh(t.session,ao)&&Wh(t.multiFactorHint):t.session&&t.multiFactorUid?Kh(t.session,ao)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),$h(Po.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),$h(C.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),$h(Wo.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),$h(Ko.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),$h(tl.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),$h(Xc.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),$h(sl.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Uh("displayName",!0)]},bd:{name:"unenroll",j:[Gh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Wh},Uh(),"multiFactorInfoIdentifier")]}}),$h(Mh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Yh(wi,"parseLink",Ai,[Uh("link")]),Yh(wh,"assertion",function(t){return new il(t)},[zh("phone")]),function(){if(void 0===r.default||!r.default.INTERNAL||!r.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ci,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ui,VERIFY_AND_CHANGE_EMAIL:li,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:eh,AuthCredential:uo,Error:C};Yh(t,"EmailAuthProvider",xo,[]),Yh(t,"FacebookAuthProvider",_o,[]),Yh(t,"GithubAuthProvider",Io,[]),Yh(t,"GoogleAuthProvider",Eo,[]),Yh(t,"TwitterAuthProvider",Co,[]),Yh(t,"OAuthProvider",bo,[Uh("providerId")]),Yh(t,"SAMLAuthProvider",yo,[Uh("providerId")]),Yh(t,"PhoneAuthProvider",Mo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof eh)}}]),Yh(t,"RecaptchaVerifier",Mh,[Gh(Uh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),qh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof r.default.app.App)}}]),Yh(t,"ActionCodeURL",wi,[]),Yh(t,"PhoneMultiFactorGenerator",wh,[]),r.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new eh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),r.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:w((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:w(t.nc,t),addAuthTokenListener:w(t.cc,t),removeAuthTokenListener:w(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.default.registerVersion("@firebase/auth","0.16.6"),r.default.INTERNAL.extendNamespace({User:gl})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return v});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function v(t,e=0){return function(n){return n.lift(new m(t,e))}}class m{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";n.r(e),n.d(e,"firebase",function(){return _});var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.ErrorFactory("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Logger("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.deepCopy)(t),this.container=new a.ComponentContainer(e.name),this._addComponent(new a.Component("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.contains)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.Component(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.setUserLogHandler)(t,e)},apps:null,SDK_VERSION:"8.6.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.contains)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.deepExtend)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.__assign)(Object(o.__assign)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.deepExtend)(e,t)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.isBrowser)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.isNode)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=v;!function(t,e){t.INTERNAL.registerComponent(new a.Component("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.22",void 0),t.registerVersion("fire-js","")}(_),e.default=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Hb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Ub)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(s))},t.\u0275prov=Object(r.Hb)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l(Object(r.Ub)(s))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Hb)({factory:m,token:t,providedIn:"root"}),t})();function m(t){const e=Object(r.Ub)(s).location;return new b(Object(r.Ub)(a),e&&e.origin||"")}const y=new r.r("appBaseHref");let b=(()=>{class t extends v{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(a),r.Ub(y,8))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends v{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(a),r.Ub(y,8))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(T(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,T(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(v),r.Ub(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Hb)({factory:I,token:t,providedIn:"root"}),t})();function I(){return new w(Object(r.Ub)(v),Object(r.Ub)(a))}function T(t){return t.replace(/\/index.html$/,"")}var E=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),O=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),C=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),S=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),k=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function A(t,e){return D(Object(r.kb)(t)[r.ab.DateFormat],e)}function x(t,e){return D(Object(r.kb)(t)[r.ab.TimeFormat],e)}function N(t,e){return D(Object(r.kb)(t)[r.ab.DateTimeFormat],e)}function j(t,e){const n=Object(r.kb)(t),i=n[r.ab.NumberSymbols][e];if(void 0===i){if(e===k.CurrencyDecimal)return n[r.ab.NumberSymbols][k.Decimal];if(e===k.CurrencyGroup)return n[r.ab.NumberSymbols][k.Group]}return i}const P=r.nb;function R(t){if(!t[r.ab.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.ab.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function D(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function M(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const L=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,F={},U=/((?:[^GyYMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var V=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),q=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),B=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function H(t,e,n,r){let i=function(t){if(nt(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[e,n=1,r=1]=t.split("-").map(t=>+t);return z(e,n-1,r)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let n;if(n=t.match(L))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),c=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,u,c),e}(n)}const e=new Date(t);if(!nt(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=K(n,e)||e;let o,s=[];for(;e;){if(o=U.exec(e),!o){s.push(e);break}{s=s.concat(o.slice(1));const t=s.pop();if(!t)break;e=t}}let a=i.getTimezoneOffset();r&&(a=et(r,a),i=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(et(e,r)-r))}(i,r));let u="";return s.forEach(t=>{const e=function(t){if(tt[t])return tt[t];let e;switch(t){case"G":case"GG":case"GGG":e=Q(B.Eras,C.Abbreviated);break;case"GGGG":e=Q(B.Eras,C.Wide);break;case"GGGGG":e=Q(B.Eras,C.Narrow);break;case"y":e=$(q.FullYear,1,0,!1,!0);break;case"yy":e=$(q.FullYear,2,0,!0,!0);break;case"yyy":e=$(q.FullYear,3,0,!1,!0);break;case"yyyy":e=$(q.FullYear,4,0,!1,!0);break;case"Y":e=Z(1);break;case"YY":e=Z(2,!0);break;case"YYY":e=Z(3);break;case"YYYY":e=Z(4);break;case"M":case"L":e=$(q.Month,1,1);break;case"MM":case"LL":e=$(q.Month,2,1);break;case"MMM":e=Q(B.Months,C.Abbreviated);break;case"MMMM":e=Q(B.Months,C.Wide);break;case"MMMMM":e=Q(B.Months,C.Narrow);break;case"LLL":e=Q(B.Months,C.Abbreviated,O.Standalone);break;case"LLLL":e=Q(B.Months,C.Wide,O.Standalone);break;case"LLLLL":e=Q(B.Months,C.Narrow,O.Standalone);break;case"w":e=J(1);break;case"ww":e=J(2);break;case"W":e=J(1,!0);break;case"d":e=$(q.Date,1);break;case"dd":e=$(q.Date,2);break;case"E":case"EE":case"EEE":e=Q(B.Days,C.Abbreviated);break;case"EEEE":e=Q(B.Days,C.Wide);break;case"EEEEE":e=Q(B.Days,C.Narrow);break;case"EEEEEE":e=Q(B.Days,C.Short);break;case"a":case"aa":case"aaa":e=Q(B.DayPeriods,C.Abbreviated);break;case"aaaa":e=Q(B.DayPeriods,C.Wide);break;case"aaaaa":e=Q(B.DayPeriods,C.Narrow);break;case"b":case"bb":case"bbb":e=Q(B.DayPeriods,C.Abbreviated,O.Standalone,!0);break;case"bbbb":e=Q(B.DayPeriods,C.Wide,O.Standalone,!0);break;case"bbbbb":e=Q(B.DayPeriods,C.Narrow,O.Standalone,!0);break;case"B":case"BB":case"BBB":e=Q(B.DayPeriods,C.Abbreviated,O.Format,!0);break;case"BBBB":e=Q(B.DayPeriods,C.Wide,O.Format,!0);break;case"BBBBB":e=Q(B.DayPeriods,C.Narrow,O.Format,!0);break;case"h":e=$(q.Hours,1,-12);break;case"hh":e=$(q.Hours,2,-12);break;case"H":e=$(q.Hours,1);break;case"HH":e=$(q.Hours,2);break;case"m":e=$(q.Minutes,1);break;case"mm":e=$(q.Minutes,2);break;case"s":e=$(q.Seconds,1);break;case"ss":e=$(q.Seconds,2);break;case"S":e=$(q.FractionalSeconds,1);break;case"SS":e=$(q.FractionalSeconds,2);break;case"SSS":e=$(q.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Y(V.Short);break;case"ZZZZZ":e=Y(V.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Y(V.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Y(V.Long);break;default:return null}return tt[t]=e,e}(t);u+=e?e(i,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function z(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function K(t,e){const n=function(t){return Object(r.kb)(t)[r.ab.LocaleId]}(t);if(F[n]=F[n]||{},F[n][e])return F[n][e];let i="";switch(e){case"shortDate":i=A(t,S.Short);break;case"mediumDate":i=A(t,S.Medium);break;case"longDate":i=A(t,S.Long);break;case"fullDate":i=A(t,S.Full);break;case"shortTime":i=x(t,S.Short);break;case"mediumTime":i=x(t,S.Medium);break;case"longTime":i=x(t,S.Long);break;case"fullTime":i=x(t,S.Full);break;case"short":const e=K(t,"shortTime"),n=K(t,"shortDate");i=W(N(t,S.Short),[e,n]);break;case"medium":const r=K(t,"mediumTime"),o=K(t,"mediumDate");i=W(N(t,S.Medium),[r,o]);break;case"long":const s=K(t,"longTime"),a=K(t,"longDate");i=W(N(t,S.Long),[s,a]);break;case"full":const u=K(t,"fullTime"),c=K(t,"fullDate");i=W(N(t,S.Full),[u,c])}return i&&(F[n][e]=i),i}function W(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function G(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.substr(s.length-e)),o+s}function $(t,e,n=0,r=!1,i=!1){return function(o,s){let a=function(t,e){switch(t){case q.FullYear:return e.getFullYear();case q.Month:return e.getMonth();case q.Date:return e.getDate();case q.Hours:return e.getHours();case q.Minutes:return e.getMinutes();case q.Seconds:return e.getSeconds();case q.FractionalSeconds:return e.getMilliseconds();case q.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||a>-n)&&(a+=n),t===q.Hours)0===a&&-12===n&&(a=12);else if(t===q.FractionalSeconds)return u=e,G(a,3).substr(0,u);var u;const c=j(s,k.MinusSign);return G(a,e,c,r,i)}}function Q(t,e,n=O.Format,i=!1){return function(o,s){return function(t,e,n,i,o,s){switch(n){case B.Months:return function(t,e,n){const i=Object(r.kb)(t),o=D([i[r.ab.MonthsFormat],i[r.ab.MonthsStandalone]],e);return D(o,n)}(e,o,i)[t.getMonth()];case B.Days:return function(t,e,n){const i=Object(r.kb)(t),o=D([i[r.ab.DaysFormat],i[r.ab.DaysStandalone]],e);return D(o,n)}(e,o,i)[t.getDay()];case B.DayPeriods:const a=t.getHours(),u=t.getMinutes();if(s){const t=function(t){const e=Object(r.kb)(t);return R(e),(e[r.ab.ExtraData][2]||[]).map(t=>"string"==typeof t?M(t):[M(t[0]),M(t[1])])}(e),n=function(t,e,n){const i=Object(r.kb)(t);R(i);const o=D([i[r.ab.ExtraData][0],i[r.ab.ExtraData][1]],e)||[];return D(o,n)||[]}(e,o,i),s=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,r=a>=e.hours&&u>=e.minutes,i=a<n.hours||a===n.hours&&u<n.minutes;if(e.hours<n.hours){if(r&&i)return!0}else if(r||i)return!0}else if(t.hours===a&&t.minutes===u)return!0;return!1});if(-1!==s)return n[s]}return function(t,e,n){const i=Object(r.kb)(t),o=D([i[r.ab.DayPeriodsFormat],i[r.ab.DayPeriodsStandalone]],e);return D(o,n)}(e,o,i)[a<12?0:1];case B.Eras:return function(t,e){return D(Object(r.kb)(t)[r.ab.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(o,s,t,e,n,i)}}function Y(t){return function(e,n,r){const i=-1*r,o=j(n,k.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case V.Short:return(i>=0?"+":"")+G(s,2,o)+G(Math.abs(i%60),2,o);case V.ShortGMT:return"GMT"+(i>=0?"+":"")+G(s,1,o);case V.Long:return"GMT"+(i>=0?"+":"")+G(s,2,o)+":"+G(Math.abs(i%60),2,o);case V.Extended:return 0===r?"Z":(i>=0?"+":"")+G(s,2,o)+":"+G(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}function X(t){return z(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function J(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=X(n),e=function(t){const e=z(t,0,1).getDay();return z(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),r=t.getTime()-e.getTime();i=1+Math.round(r/6048e5)}return G(i,t,j(r,k.MinusSign))}}function Z(t,e=!1){return function(n,r){return G(X(n).getFullYear(),t,j(r,k.MinusSign),e)}}const tt={};function et(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function nt(t){return t instanceof Date&&!isNaN(t.valueOf())}class rt{}let it=(()=>{class t extends rt{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(P(e||this.locale)(t)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(r.v))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();function ot(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class st{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let at=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new st(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new ut(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new ut(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.Q),r.Lb(r.L),r.Lb(r.t))},t.\u0275dir=r.Gb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class ut{constructor(t,e){this.record=t,this.view=e}}let ct=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new lt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ht("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ht("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.Q),r.Lb(r.L))},t.\u0275dir=r.Gb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class lt{constructor(){this.$implicit=null,this.ngIf=null}}function ht(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.wb)(e)}'.`)}let ft=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",i,o){if(null==e||""===e||e!=e)return null;try{return H(e,n,o||this.locale,i)}catch(s){throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.wb)(t)}'`)}(t,s.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.v))},t.\u0275pipe=r.Kb({name:"date",type:t,pure:!0}),t})(),dt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:[{provide:rt,useClass:it}]}),t})();function pt(t){return"server"===t}let gt=(()=>{class t{}return t.\u0275prov=Object(r.Hb)({token:t,providedIn:"root",factory:()=>new vt(Object(r.Ub)(s),window)}),t})();class vt{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=mt(this.window.history)||mt(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function mt(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class yt extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new yt,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=_t||(_t=document.querySelector("base"),_t)?_t.getAttribute("href"):null;return null==e?null:(n=e,bt||(bt=document.createElement("a")),bt.setAttribute("href",n),"/"===bt.pathname.charAt(0)?bt.pathname:"/"+bt.pathname);var n}resetBaseElement(){_t=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return ot(document.cookie,t)}}let bt,_t=null;const wt=new r.r("TRANSITION_ID"),It=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[wt,s,r.s],multi:!0}];class Tt{static init(){Object(r.X)(new Tt)}addToWindow(t){r.pb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.pb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.pb.getAllAngularRootElements=()=>t.getAllRootElements(),r.pb.frameworkStabilizers||(r.pb.frameworkStabilizers=[]),r.pb.frameworkStabilizers.push(t=>{const e=r.pb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const Et=new r.r("EventManagerPlugins");let Ot=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(Et),r.Ub(r.A))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();class Ct{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let St=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),kt=(()=>{class t extends St{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(At),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(At))}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();function At(t){o().remove(t)}const xt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Nt=/%COMP%/g;function jt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?jt(t,i,n):(i=i.replace(Nt,t),n.push(i))}return n}function Pt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Rt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Dt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Mt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new Lt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=jt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(Ot),r.Ub(kt),r.Ub(r.c))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();class Dt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(xt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=xt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=xt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Pt(n)):this.eventManager.addEventListener(t,e,Pt(n))}}class Mt extends Dt{constructor(t,e,n,r){super(t),this.component=n;const i=jt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Nt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Nt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Lt extends Dt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=jt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Ft=(()=>{class t extends Ct{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const Ut=["alt","control","meta","shift"],Vt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Bt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Ht=(()=>{class t extends Ct{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(Ut.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&qt.hasOwnProperty(e)&&(e=qt[e]))}return Vt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Ut.forEach(r=>{r!=n&&(0,Bt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const zt=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){yt.makeCurrent(),Tt.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.vb)(document),document},deps:[]}],Kt=Object(r.S)(r.W,"browser",zt),Wt=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:Et,useClass:Ft,multi:!0,deps:[s,r.A,r.C]},{provide:Et,useClass:Ht,multi:!0,deps:[s]},[],{provide:Rt,useClass:Rt,deps:[Ot,kt,r.c]},{provide:r.F,useExisting:Rt},{provide:St,useExisting:kt},{provide:kt,useClass:kt,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:Ot,useClass:Ot,deps:[Et,r.A]},[]];let Gt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:wt,useExisting:r.c},It]}}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(t,12))},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:Wt,imports:[dt,r.f]}),t})();"undefined"!=typeof window&&window;var $t=n("Cfvw"),Qt=n("LRne"),Yt=n("XNiG"),Xt=n("9ppp");class Jt extends Yt.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Xt.a;return this._value}next(t){super.next(this._value=t)}}var Zt=n("z+Ro"),te=n("DH7j"),ee=n("7o/Q");class ne extends ee.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class re extends ee.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var ie=n("SeVD"),oe=n("HDdC");function se(t,e,n,r,i=new re(t,n,r)){if(!i.closed)return e instanceof oe.a?e.subscribe(i):Object(ie.a)(e)(i)}var ae=n("yCtX");const ue={};class ce{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new le(t,this.resultSelector))}}class le extends ne{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(ue),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(se(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===ue?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const he=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var fe=n("bHdf");function de(...t){return Object(fe.a)(1)(Object(Qt.a)(...t))}var pe=n("EY2u");function ge(t){return new oe.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object($t.a)(n):Object(pe.b)()).subscribe(e)})}var ve=n("EQ5u"),me=n("lJxs"),ye=n("zx2A");function be(t,e){return"function"==typeof e?n=>n.pipe(be((n,r)=>Object($t.a)(t(n,r)).pipe(Object(me.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new _e(t))}class _e{constructor(t){this.project=t}call(t,e){return e.subscribe(new we(t,this.project))}}class we extends ye.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new ye.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(ye.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Ie=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Te(t){return e=>0===t?Object(pe.b)():e.lift(new Ee(t))}class Ee{constructor(t){if(this.total=t,this.total<0)throw new Ie}call(t,e){return e.subscribe(new Oe(t,this.total))}}class Oe extends ee.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Ce(...t){const e=t[t.length-1];return Object(Zt.a)(e)?(t.pop(),n=>de(t,n,e)):e=>de(t,e)}function Se(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ke(t,e,n))}}class ke{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Ae(t,this.accumulator,this.seed,this.hasSeed))}}class Ae extends ee.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function xe(t,e){return function(n){return n.lift(new Ne(t,e))}}class Ne{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new je(t,this.predicate,this.thisArg))}}class je extends ee.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function Pe(t){return function(e){const n=new Re(t),r=e.lift(n);return n.caught=r}}class Re{constructor(t){this.selector=t}call(t,e){return e.subscribe(new De(t,this.selector,this.caught))}}class De extends ye.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new ye.a(this);this.add(r);const i=Object(ye.c)(n,r);i!==r&&this.add(i)}}}var Me=n("5+tZ");function Le(t,e){return Object(Me.a)(t,e,1)}function Fe(t){return function(e){return 0===t?Object(pe.b)():e.lift(new Ue(t))}}class Ue{constructor(t){if(this.total=t,this.total<0)throw new Ie}call(t,e){return e.subscribe(new Ve(t,this.total))}}class Ve extends ee.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function qe(t=ze){return e=>e.lift(new Be(t))}class Be{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new He(t,this.errorFactory))}}class He extends ee.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(pb){t=pb}this.destination.error(t)}}}function ze(){return new he}function Ke(t=null){return e=>e.lift(new We(t))}class We{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Ge(t,this.defaultValue))}}class Ge extends ee.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var $e=n("SpAZ");function Qe(t,e){const n=arguments.length>=2;return r=>r.pipe(t?xe((e,n)=>t(e,n,r)):$e.a,Te(1),n?Ke(e):qe(()=>new he))}var Ye=n("vkgz"),Xe=n("x+ZX"),Je=n("quSY");class Ze{constructor(t){this.callback=t}call(t,e){return e.subscribe(new tn(t,this.callback))}}class tn extends ee.a{constructor(t,e){super(t),this.add(new Je.a(e))}}class en{constructor(t,e){this.id=t,this.url=e}}class nn extends en{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class rn extends en{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class on extends en{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class sn extends en{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class an extends en{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class un extends en{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cn extends en{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ln extends en{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hn extends en{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fn{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class dn{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class pn{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gn{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vn{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mn{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yn{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const bn="primary";class _n{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function wn(t){return new _n(t)}function In(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Tn(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function En(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!On(t[i],e[i]))return!1;return!0}function On(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Cn(t){return Array.prototype.concat.apply([],t)}function Sn(t){return t.length>0?t[t.length-1]:null}function kn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function An(t){return Object(r.rb)(t)?t:Object(r.sb)(t)?Object($t.a)(Promise.resolve(t)):Object(Qt.a)(t)}function xn(t,e,n){return n?function(t,e){return En(t,e)}(t.queryParams,e.queryParams)&&Nn(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>On(t[n],e[n]))}(t.queryParams,e.queryParams)&&jn(t.root,e.root)}function Nn(t,e){if(!Ln(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Nn(t.children[n],e.children[n]))return!1}return!0}function jn(t,e){return Pn(t,e,e.segments)}function Pn(t,e,n){if(t.segments.length>n.length)return!!Ln(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Ln(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!jn(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Ln(t.segments,r)&&!!t.children.primary&&Pn(t.children.primary,e,i)}}class Rn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wn(this.queryParams)),this._queryParamMap}toString(){return Vn.serialize(this)}}class Dn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,kn(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qn(this)}}class Mn{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=wn(this.parameters)),this._parameterMap}toString(){return $n(this)}}function Ln(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Fn{}class Un{parse(t){const e=new Zn(t);return new Rn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Bn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${zn(e)}=${zn(t)}`).join("&"):`${zn(e)}=${zn(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Vn=new Un;function qn(t){return t.segments.map(t=>$n(t)).join("/")}function Bn(t,e){if(!t.hasChildren())return qn(t);if(e){const e=t.children.primary?Bn(t.children.primary,!1):"",n=[];return kn(t.children,(t,e)=>{e!==bn&&n.push(`${e}:${Bn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return kn(t.children,(t,r)=>{r===bn&&(n=n.concat(e(t,r)))}),kn(t.children,(t,r)=>{r!==bn&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===bn?[Bn(t.children.primary,!1)]:[`${n}:${Bn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${qn(t)}/${e[0]}`:`${qn(t)}/(${e.join("//")})`}}function Hn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function zn(t){return Hn(t).replace(/%3B/gi,";")}function Kn(t){return Hn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wn(t){return decodeURIComponent(t)}function Gn(t){return Wn(t.replace(/\+/g,"%20"))}function $n(t){return`${Kn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Kn(t)}=${Kn(e[t])}`).join("")}`;var e}const Qn=/^[^\/()?;=#]+/;function Yn(t){const e=t.match(Qn);return e?e[0]:""}const Xn=/^[^=?&#]+/,Jn=/^[^?&#]+/;class Zn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Dn([],{}):new Dn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Dn(t,e)),n}parseSegment(){const t=Yn(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Mn(Wn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Yn(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Yn(this.remaining);t&&(n=t,this.capture(n))}t[Wn(e)]=Wn(n)}parseQueryParam(t){const e=function(t){const e=t.match(Xn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Jn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Gn(e),i=Gn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Yn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=bn);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Dn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class tr{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=er(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=er(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=nr(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return nr(t,this._root).map(t=>t.value)}}function er(t,e){if(t===e.value)return e;for(const n of e.children){const e=er(t,n);if(e)return e}return null}function nr(t,e){if(t===e.value)return[e];for(const n of e.children){const r=nr(t,n);if(r.length)return r.unshift(e),r}return[]}class rr{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function ir(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class or extends tr{constructor(t,e){super(t),this.snapshot=e,hr(this,t)}toString(){return this.snapshot.toString()}}function sr(t,e){const n=function(t,e){const n=new cr([],{},{},"",{},bn,e,null,t.root,-1,{});return new lr("",new rr(n,[]))}(t,e),r=new Jt([new Mn("",{})]),i=new Jt({}),o=new Jt({}),s=new Jt({}),a=new Jt(""),u=new ar(r,i,s,a,o,bn,e,n.root);return u.snapshot=n.root,new or(new rr(u,[]),n)}class ar{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(me.a)(t=>wn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(me.a)(t=>wn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ur(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class cr{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=wn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lr extends tr{constructor(t,e){super(e),this.url=t,hr(this,e)}toString(){return fr(this._root)}}function hr(t,e){e.value._routerState=t,e.children.forEach(e=>hr(t,e))}function fr(t){const e=t.children.length>0?` { ${t.children.map(fr).join(", ")} } `:"";return`${t.value}${e}`}function dr(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,En(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),En(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!En(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),En(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function pr(t,e){return En(t.params,e.params)&&function(t,e){return Ln(t,e)&&t.every((t,n)=>En(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||pr(t.parent,e.parent))}function gr(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return gr(t,e,r);return gr(t,e)})}(t,e,n);return new rr(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return vr(e,t),t}}const n=new ar(new Jt((r=e.value).url),new Jt(r.params),new Jt(r.queryParams),new Jt(r.fragment),new Jt(r.data),r.outlet,r.component,r),i=e.children.map(e=>gr(t,e));return new rr(n,i)}var r}function vr(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)vr(t.children[n],e.children[n])}function mr(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function yr(t){return"object"==typeof t&&null!=t&&t.outlets}function br(t,e,n,r,i){let o={};return r&&kn(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Rn(n.root===t?e:_r(n.root,t,e),o,i)}function _r(t,e,n){const r={};return kn(t.children,(t,i)=>{r[i]=t===e?n:_r(t,e,n)}),new Dn(t.segments,r)}class wr{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&mr(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(yr);if(r&&r!==Sn(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ir{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Tr(t,e,n){if(t||(t=new Dn([],{})),0===t.segments.length&&t.hasChildren())return Er(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(yr(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!kr(a,u,e))return o;r+=2}else{if(!kr(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Dn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Dn(t.segments.slice(r.pathIndex),t.children),Er(e,0,i)}return r.match&&0===i.length?new Dn(t.segments,{}):r.match&&!t.hasChildren()?Or(t,e,n):r.match?Er(t,0,i):Or(t,e,n)}function Er(t,e,n){if(0===n.length)return new Dn(t.segments,{});{const r=function(t){return yr(t[0])?t[0].outlets:{[bn]:t}}(n),i={};return kn(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Tr(t.children[r],e,n))}),kn(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Dn(t.segments,i)}}function Or(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(yr(o)){const t=Cr(o.outlets);return new Dn(r,t)}if(0===i&&mr(n[0])){r.push(new Mn(t.segments[e].path,Sr(n[0]))),i++;continue}const s=yr(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&mr(a)?(r.push(new Mn(s,Sr(a))),i+=2):(r.push(new Mn(s,{})),i++)}return new Dn(r,{})}function Cr(t){const e={};return kn(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Or(new Dn([],{}),0,t))}),e}function Sr(t){const e={};return kn(t,(t,n)=>e[n]=`${t}`),e}function kr(t,e,n){return t==n.path&&En(e,n.parameters)}class Ar{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),dr(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=ir(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),kn(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=ir(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=ir(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new mn(t.value.snapshot))}),t.children.length&&this.forwardEvent(new gn(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(dr(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),xr(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function xr(t){dr(t.value),t.children.forEach(xr)}class Nr{constructor(t,e){this.routes=t,this.module=e}}function jr(t){return"function"==typeof t}function Pr(t){return t instanceof Rn}const Rr=Symbol("INITIAL_VALUE");function Dr(){return be(t=>function(...t){let e,n;return Object(Zt.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(te.a)(t[0])&&(t=t[0]),Object(ae.a)(t,n).lift(new ce(e))}(t.map(t=>t.pipe(Te(1),Ce(Rr)))).pipe(Se((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Rr)return t;if(r===Rr&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Pr(r))return r}return t},t)},Rr),xe(t=>t!==Rr),Object(me.a)(t=>Pr(t)?t:!0===t),Te(1)))}let Mr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Fb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Mb(0,"router-outlet")},directives:function(){return[xi]},encapsulation:2}),t})();function Lr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Fr(r,Ur(e,r))}}function Fr(t,e){t.children&&Lr(t.children,e)}function Ur(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Vr(t){const e=t.children&&t.children.map(Vr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==bn&&(n.component=Mr),n}function qr(t){return t.outlet||bn}function Br(t,e){const n=t.filter(t=>qr(t)===e);return n.push(...t.filter(t=>qr(t)!==e)),n}const Hr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function zr(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Hr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Tn)(n,t,e);if(!i)return Object.assign({},Hr);const o={};kn(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Kr(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Wr(t,e,n)&&qr(n)!==bn)}(t,n,r)){const i=new Dn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&qr(o)!==bn){const n=new Dn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[qr(o)]=n}return i}(t,e,r,new Dn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Wr(t,e,n))}(t,n,r)){const o=new Dn(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Wr(t,n,a)&&!i[qr(a)]){const n=new Dn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[qr(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Dn(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Wr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Gr(t,e,n,r){return!!(qr(t)===r||r!==bn&&Wr(e,n,t))&&("**"===t.path||zr(e,t,n).matched)}function $r(t,e,n){return 0===e.length&&!t.children[n]}class Qr{constructor(t){this.segmentGroup=t||null}}class Yr{constructor(t){this.urlTree=t}}function Xr(t){return new oe.a(e=>e.error(new Qr(t)))}function Jr(t){return new oe.a(e=>e.error(new Yr(t)))}function Zr(t){return new oe.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class ti{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=Kr(this.urlTree.root,[],[],this.config).segmentGroup,e=new Dn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,bn).pipe(Object(me.a)(t=>this.createUrlTree(ei(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Pe(t=>{if(t instanceof Yr)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Qr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,bn).pipe(Object(me.a)(e=>this.createUrlTree(ei(e),t.queryParams,t.fragment))).pipe(Pe(t=>{if(t instanceof Qr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Dn([],{[bn]:t}):t;return new Rn(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(me.a)(t=>new Dn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object($t.a)(r).pipe(Le(r=>{const i=n.children[r],o=Br(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(me.a)(t=>({segment:t,outlet:r})))}),Se((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?xe((e,n)=>t(e,n,r)):$e.a,Fe(1),n?Ke(e):qe(()=>new he))}())}expandSegment(t,e,n,r,i,o){return Object($t.a)(n).pipe(Le(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Pe(t=>{if(t instanceof Qr)return Object(Qt.a)(null);throw t}))),Qe(t=>!!t),Pe((t,n)=>{if(t instanceof he||"EmptyError"===t.name){if($r(e,r,i))return Object(Qt.a)(new Dn([],{}));throw new Qr(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Gr(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Xr(e):Xr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Jr(i):this.lineralizeSegments(n,i).pipe(Object(Me.a)(n=>{const i=new Dn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=zr(e,r,i);if(!s)return Xr(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Jr(l):this.lineralizeSegments(r,l).pipe(Object(Me.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(Qt.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(me.a)(t=>(n._loadedConfig=t,new Dn(r,{})))):Object(Qt.a)(new Dn(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=zr(e,n,r);if(!o)return Xr(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(Me.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Kr(e,s,u,o),l=new Dn(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(me.a)(t=>new Dn(s,t)));if(0===o.length&&0===c.length)return Object(Qt.a)(new Dn(s,{}));const h=qr(n)===i;return this.expandSegment(r,l,o,c,h?bn:i,!0).pipe(Object(me.a)(t=>new Dn(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Qt.a)(new Nr(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Qt.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Me.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(me.a)(t=>(e._loadedConfig=t,t))):function(t){return new oe.a(e=>e.error(In(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Qt.a)(new Nr([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(Qt.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&jr(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!jr(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return An(o)});return Object(Qt.a)(i).pipe(Dr(),Object(Ye.a)(t=>{if(!Pr(t))return;const e=In(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(me.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Qt.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Zr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Rn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return kn(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return kn(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Dn(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function ei(t){const e={};for(const n of Object.keys(t.children)){const r=ei(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Dn(t.segments.concat(e.segments),e.children)}return t}(new Dn(t.segments,e))}class ni{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ri{constructor(t,e){this.component=t,this.route=e}}function ii(t,e,n){const r=t._root;return si(r,e?e._root:null,n,[r.value])}function oi(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function si(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=ir(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Ln(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ln(t.url,e.url)||!En(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pr(t,e)||!En(t.queryParams,e.queryParams);case"paramsChange":default:return!pr(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ni(r)):(o.data=s.data,o._resolvedData=s._resolvedData),si(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ri(a.outlet.component,s))}else s&&ai(e,a,i),i.canActivateChecks.push(new ni(r)),si(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),kn(o,(t,e)=>ai(t,n.getContext(e),i)),i}function ai(t,e,n){const r=ir(t),i=t.value;kn(r,(t,r)=>{ai(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new ri(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class ui{}function ci(t){return new oe.a(e=>e.error(t))}class li{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Kr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,bn);if(null===e)return null;const n=new cr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},bn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new rr(n,e),i=new lr(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=ur(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=Br(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=fi(n);return r.sort((t,e)=>t.value.outlet===bn?-1:e.value.outlet===bn?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return $r(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Gr(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Sn(n).parameters:{};i=new cr(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,gi(t),qr(t),t.component,t,di(e),pi(e)+n.length,vi(t))}else{const r=zr(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new cr(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,gi(t),qr(t),t.component,t,di(e),pi(e)+o.length,vi(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Kr(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new rr(i,t)]}if(0===a.length&&0===c.length)return[new rr(i,[])];const l=qr(t)===r,h=this.processSegment(a,u,c,l?bn:r);return null===h?null:[new rr(i,h)]}}function hi(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function fi(t){const e=[],n=new Set;for(const r of t){if(!hi(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=fi(r.children);e.push(new rr(r.value,t))}return e.filter(t=>!n.has(t))}function di(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function pi(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function gi(t){return t.data||{}}function vi(t){return t.resolve||{}}function mi(t){return be(e=>{const n=t(e);return n?Object($t.a)(n).pipe(Object(me.a)(()=>e)):Object(Qt.a)(e)})}class yi extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const bi=new r.r("ROUTES");class _i{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(me.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Nr(Cn(i.injector.get(bi,void 0,r.q.Self|r.q.Optional)).map(Vr),i)}),Pe(t=>{throw e._loader$=void 0,t}));return e._loader$=new ve.a(n,()=>new Yt.a).pipe(Object(Xe.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object($t.a)(this.loader.load(t)):An(t()).pipe(Object(Me.a)(t=>t instanceof r.w?Object(Qt.a)(t):Object($t.a)(this.compiler.compileModuleAsync(t))))}}class wi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ii,this.attachRef=null}}class Ii{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new wi,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Ti{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Ei(t){throw t}function Oi(t,e,n){return e.parse("/")}function Ci(t,e){return Object(Qt.a)(null)}let Si=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new Yt.a,this.errorHandler=Ei,this.malformedUriErrorHandler=Oi,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ci,afterPreactivation:Ci},this.urlHandlingStrategy=new Ti,this.routeReuseStrategy=new yi,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Rn(new Dn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new _i(s,a,t=>this.triggerEvent(new fn(t)),t=>this.triggerEvent(new dn(t))),this.routerState=sr(this.currentUrlTree,this.rootComponentType),this.transitions=new Jt({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(xe(t=>0!==t.id),Object(me.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),be(t=>{let n=!1,r=!1;return Object(Qt.a)(t).pipe(Object(Ye.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),be(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Qt.a)(t).pipe(be(t=>{const n=this.transitions.getValue();return e.next(new nn(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?pe.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,be(t=>function(t,e,n,r,i){return new ti(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(me.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(Ye.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(Me.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new li(t,e,n,r,i,o).recognize();return null===s?ci(new ui):Object(Qt.a)(s)}catch(pb){return ci(pb)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(me.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(Ye.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new an(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new nn(n,this.serializeUrl(r),i,o);e.next(a);const u=sr(r,this.rootComponentType).snapshot;return Object(Qt.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),pe.a}),mi(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Ye.a)(t=>{const e=new un(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(me.a)(t=>Object.assign(Object.assign({},t),{guards:ii(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(Me.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(Qt.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object($t.a)(t).pipe(Object(Me.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Qt.a)(!0);const s=o.map(o=>{const s=oi(o,e,i);let a;if(function(t){return t&&jr(t.canDeactivate)}(s))a=An(s.canDeactivate(t,e,n,r));else{if(!jr(s))throw new Error("Invalid CanDeactivate guard");a=An(s(t,e,n,r))}return a.pipe(Qe())});return Object(Qt.a)(s).pipe(Dr())}(t.component,t.route,n,e,r)),Qe(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Me.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object($t.a)(e).pipe(Le(e=>de(function(t,e){return null!==t&&e&&e(new pn(t)),Object(Qt.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new vn(t)),Object(Qt.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>ge(()=>{const i=e.guards.map(i=>{const o=oi(i,e.node,n);let s;if(function(t){return t&&jr(t.canActivateChild)}(o))s=An(o.canActivateChild(r,t));else{if(!jr(o))throw new Error("Invalid CanActivateChild guard");s=An(o(r,t))}return s.pipe(Qe())});return Object(Qt.a)(i).pipe(Dr())}));return Object(Qt.a)(i).pipe(Dr())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Qt.a)(!0);const i=r.map(r=>ge(()=>{const i=oi(r,e,n);let o;if(function(t){return t&&jr(t.canActivate)}(i))o=An(i.canActivate(e,t));else{if(!jr(i))throw new Error("Invalid CanActivate guard");o=An(i(e,t))}return o.pipe(Qe())}));return Object(Qt.a)(i).pipe(Dr())}(t,e.route,n))),Qe(t=>!0!==t,!0))}(r,o,t,e):Object(Qt.a)(n)),Object(me.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(Ye.a)(t=>{if(Pr(t.guardsResult)){const e=In(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new cn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),xe(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new on(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),mi(t=>{if(t.guards.canActivateChecks.length)return Object(Qt.a)(t).pipe(Object(Ye.a)(t=>{const e=new ln(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),be(t=>{let n=!1;return Object(Qt.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(Me.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(Qt.a)(t);let o=0;return Object($t.a)(n).pipe(Le(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Qt.a)({});const o={};return Object($t.a)(i).pipe(Object(Me.a)(i=>function(t,e,n,r){const i=oi(t,e,r);return An(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(Ye.a)(t=>{o[i]=t}))),Fe(1),Object(Me.a)(()=>Object.keys(o).length===i.length?Object(Qt.a)(o):pe.a))}(t._resolve,t,e,r).pipe(Object(me.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),ur(t,n).resolve),null)))}(t.route,e,r,i)),Object(Ye.a)(()=>o++),Fe(1),Object(Me.a)(e=>o===n.length?Object(Qt.a)(t):pe.a))})),Object(Ye.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new on(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(Ye.a)(t=>{const e=new hn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),mi(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(me.a)(t=>{const e=function(t,e,n){const r=gr(t,e._root,n?n._root:void 0);return new or(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(Ye.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(me.a)(t=>(new Ar(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(Ye.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new on(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Ze(i))),Pe(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Pr(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new on(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new sn(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Pl){t.reject(Pl)}}var i;return pe.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Lr(t),this.config=t.map(Vr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return br(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new wr(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return kn(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new wr(n,e,r)}(n);if(o.toRoot())return br(e.root,new Dn([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Ir(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Ir(t,t===e.root,0)}const r=mr(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Ir(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Er(s.segmentGroup,s.index,o.commands):Tr(s.segmentGroup,s.index,o.commands);return br(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Pr(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(pb){e=this.malformedUriErrorHandler(pb,this.urlSerializer,t)}return e}isActive(t,e){if(Pr(t))return xn(this.currentUrlTree,t,e);const n=this.parseUrl(t);return xn(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new rn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(r.N),r.Ub(Fn),r.Ub(Ii),r.Ub(w),r.Ub(r.s),r.Ub(r.x),r.Ub(r.i),r.Ub(void 0))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),ki=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new Yt.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Ai(this.skipLocationChange),replaceUrl:Ai(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ai(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(Si),r.Lb(ar),r.Vb("tabindex"),r.Lb(r.E),r.Lb(r.l))},t.\u0275dir=r.Gb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Xb("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.zb]}),t})();function Ai(t){return""===t||!!t}let xi=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||bn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Ni(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(Ii),r.Lb(r.Q),r.Lb(r.j),r.Vb("name"),r.Lb(r.h))},t.\u0275dir=r.Gb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Ni{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===ar?this.route:t===Ii?this.childContexts:this.parent.get(t,e)}}class ji{}class Pi{preload(t,e){return Object(Qt.a)(null)}}let Ri=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new _i(e,n,e=>t.triggerEvent(new fn(e)),e=>t.triggerEvent(new dn(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(xe(t=>t instanceof rn),Le(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object($t.a)(n).pipe(Object(fe.a)(),Object(me.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(Qt.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(Me.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(Si),r.Ub(r.x),r.Ub(r.i),r.Ub(r.s),r.Ub(ji))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),Di=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof nn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof rn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof yn&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new yn(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(Si),r.Ub(gt),r.Ub(void 0))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const Mi=new r.r("ROUTER_CONFIGURATION"),Li=new r.r("ROUTER_FORROOT_GUARD"),Fi=[w,{provide:Fn,useClass:Un},{provide:Si,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new Si(null,t,e,n,r,i,s,Cn(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[Fn,Ii,w,r.s,r.x,r.i,bi,Mi,[class{},new r.B],[class{},new r.B]]},Ii,{provide:ar,useFactory:function(t){return t.routerState.root},deps:[Si]},{provide:r.x,useClass:r.K},Ri,Pi,class{preload(t,e){return e().pipe(Pe(()=>Object(Qt.a)(null)))}},{provide:Mi,useValue:{enableTracing:!1}}];function Ui(){return new r.z("Router",Si)}let Vi=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Fi,zi(e),{provide:Li,useFactory:Hi,deps:[[Si,new r.B,new r.J]]},{provide:Mi,useValue:n||{}},{provide:v,useFactory:Bi,deps:[a,[new r.p(y),new r.B],Mi]},{provide:Di,useFactory:qi,deps:[Si,gt,Mi]},{provide:ji,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Pi},{provide:r.z,multi:!0,useFactory:Ui},[Ki,{provide:r.d,multi:!0,useFactory:Wi,deps:[Ki]},{provide:$i,useFactory:Gi,deps:[Ki]},{provide:r.b,multi:!0,useExisting:$i}]]}}static forChild(e){return{ngModule:t,providers:[zi(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(Li,8),r.Ub(Si,8))},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({}),t})();function qi(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Di(t,e,n)}function Bi(t,e,n={}){return n.useHash?new _(t,e):new b(t,e)}function Hi(t){return"guarded"}function zi(t){return[{provide:r.a,multi:!0,useValue:t},{provide:bi,multi:!0,useValue:t}]}let Ki=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new Yt.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Si),r=this.injector.get(Mi);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(Qt.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Mi),n=this.injector.get(Ri),i=this.injector.get(Di),o=this.injector.get(Si),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(r.s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();function Wi(t){return t.appInitializer.bind(t)}function Gi(t){return t.bootstrapListener.bind(t)}const $i=new r.r("Router Initializer");var Qi=n("zIRd"),Yi=(n("t6oF"),n("6Uf2"),n("qOnz")),Xi=n("q/0M"),Ji=function(t,e){return(Ji=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Zi(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var to,eo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},no=no||{},ro=eo||self;function io(){}function oo(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function so(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ao="closure_uid_"+(1e9*Math.random()>>>0),uo=0;function co(t,e,n){return t.call.apply(t.bind,arguments)}function lo(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ho(t,e,n){return(ho=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?co:lo).apply(null,arguments)}function fo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function po(){return Date.now()}function go(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function vo(){this.j=this.j,this.i=this.i}vo.prototype.j=!1,vo.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,ao)&&t[ao]||(t[ao]=++uo)}(this)},vo.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var mo=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},yo=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function bo(t){return Array.prototype.concat.apply([],arguments)}function _o(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function wo(t){return/^[\s\xa0]*$/.test(t)}var Io,To=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Eo(t,e){return-1!=t.indexOf(e)}function Oo(t,e){return t<e?-1:t>e?1:0}t:{var Co=ro.navigator;if(Co){var So=Co.userAgent;if(So){Io=So;break t}}Io=""}function ko(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ao(t){var e={};for(var n in t)e[n]=t[n];return e}var xo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function No(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<xo.length;o++)n=xo[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function jo(t){return jo[" "](t),t}jo[" "]=io;var Po,Ro,Do=Eo(Io,"Opera"),Mo=Eo(Io,"Trident")||Eo(Io,"MSIE"),Lo=Eo(Io,"Edge"),Fo=Lo||Mo,Uo=Eo(Io,"Gecko")&&!(Eo(Io.toLowerCase(),"webkit")&&!Eo(Io,"Edge"))&&!(Eo(Io,"Trident")||Eo(Io,"MSIE"))&&!Eo(Io,"Edge"),Vo=Eo(Io.toLowerCase(),"webkit")&&!Eo(Io,"Edge");function qo(){var t=ro.document;return t?t.documentMode:void 0}t:{var Bo="",Ho=(Ro=Io,Uo?/rv:([^\);]+)(\)|;)/.exec(Ro):Lo?/Edge\/([\d\.]+)/.exec(Ro):Mo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ro):Vo?/WebKit\/(\S+)/.exec(Ro):Do?/(?:Version)[ \/]?(\S+)/.exec(Ro):void 0);if(Ho&&(Bo=Ho?Ho[1]:""),Mo){var zo=qo();if(null!=zo&&zo>parseFloat(Bo)){Po=String(zo);break t}}Po=Bo}var Ko={};function Wo(t){return function(t,e){var n=Ko;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=To(String(Po)).split("."),r=To(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Oo(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Oo(0==s[2].length,0==a[2].length)||Oo(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Go=ro.document&&Mo&&(qo()||parseInt(Po,10))||void 0,$o=!Mo||9<=Number(Go),Qo=Mo&&!Wo("9"),Yo=function(){if(!ro.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ro.addEventListener("test",io,e),ro.removeEventListener("test",io,e)}catch(n){}return t}();function Xo(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Jo(t,e){if(Xo.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Uo){t:{try{jo(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Zo[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Xo.prototype.b=function(){this.defaultPrevented=!0},go(Jo,Xo);var Zo={2:"touch",3:"pen",4:"mouse"};Jo.prototype.b=function(){Jo.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Qo)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ts="closure_listenable_"+(1e6*Math.random()|0),es=0;function ns(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++es,this.Y=this.Z=!1}function rs(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function is(t){this.src=t,this.a={},this.b=0}function os(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=mo(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(rs(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ss(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}is.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ss(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ns(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var as="closure_lm_"+(1e6*Math.random()|0),us={};function cs(t,e,n,r,i){if(r&&r.once)return hs(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)cs(t,e[o],n,r,i);return null}return n=bs(n),t&&t[ts]?t.va(e,n,so(r)?!!r.capture:!!r,i):ls(t,e,n,!1,r,i)}function ls(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=so(i)?!!i.capture:!!i;if(s&&!$o)return null;var a=ms(t);if(a||(t[as]=a=new is(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=vs,e=$o?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Yo||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ps(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function hs(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)hs(t,e[o],n,r,i);return null}return n=bs(n),t&&t[ts]?t.wa(e,n,so(r)?!!r.capture:!!r,i):ls(t,e,n,!0,r,i)}function fs(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)fs(t,e[o],n,r,i);else r=so(r)?!!r.capture:!!r,n=bs(n),t&&t[ts]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=ss(o=t.a[e],n,r,i))&&(rs(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=ms(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ss(e,n,r,i)),(n=-1<t?e[t]:null)&&ds(n))}function ds(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ts])os(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ps(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ms(e))?(os(n,t),0==n.b&&(n.src=null,e[as]=null)):rs(t)}}}function ps(t){return t in us?us[t]:us[t]="on"+t}function gs(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ds(t),n.call(r,e)}function vs(t,e){if(t.Y)return!0;if(!$o){if(!e)t:{e=["window","event"];for(var n=ro,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return gs(t,e=new Jo(e,this))}return gs(t,new Jo(e,this))}function ms(t){return(t=t[as])instanceof is?t:null}var ys="__closure_events_fn_"+(1e9*Math.random()>>>0);function bs(t){return"function"==typeof t?t:(t[ys]||(t[ys]=function(e){return t.handleEvent(e)}),t[ys])}function _s(){vo.call(this),this.c=new is(this),this.J=this,this.C=null}function ws(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Xo(e,t);else if(e instanceof Xo)e.target=e.target||t;else{var i=e;No(e=new Xo(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Is(s,r,!0,e)&&i}if(i=Is(s=e.a=t,r,!0,e)&&i,i=Is(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Is(s=e.a=n[o],r,!1,e)&&i}function Is(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&os(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}go(_s,vo),_s.prototype[ts]=!0,(to=_s.prototype).addEventListener=function(t,e,n,r){cs(this,t,e,n,r)},to.removeEventListener=function(t,e,n,r){fs(this,t,e,n,r)},to.G=function(){if(_s.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)rs(n[r]);delete e.a[t],e.b--}}this.C=null},to.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},to.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ts=ro.JSON.stringify;function Es(){this.b=this.a=null}var Os,Cs=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new ks},function(t){t.reset()});function Ss(){var t=js,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ks(){this.next=this.b=this.a=null}function As(t){ro.setTimeout(function(){throw t},0)}function xs(t,e){Os||function(){var t=ro.Promise.resolve(void 0);Os=function(){t.then(Ps)}}(),Ns||(Os(),Ns=!0),js.add(t,e)}Es.prototype.add=function(t,e){var n=Cs.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ks.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ks.prototype.reset=function(){this.next=this.b=this.a=null};var Ns=!1,js=new Es;function Ps(){for(var t;t=Ss();){try{t.a.call(t.b)}catch(n){As(n)}var e=Cs;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Ns=!1}function Rs(t,e){_s.call(this),this.b=t||1,this.a=e||ro,this.f=ho(this.Za,this),this.g=po()}function Ds(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ms(t,e,n){if("function"==typeof t)n&&(t=ho(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ho(t.handleEvent,t)}return 2147483647<Number(e)?-1:ro.setTimeout(t,e||0)}function Ls(t){t.a=Ms(function(){t.a=null,t.c&&(t.c=!1,Ls(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}go(Rs,_s),(to=Rs.prototype).aa=!1,to.M=null,to.Za=function(){if(this.aa){var t=po()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ws(this,"tick"),this.aa&&(Ds(this),this.start()))}},to.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=po())},to.G=function(){Rs.X.G.call(this),Ds(this),delete this.a};var Fs=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Ji(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ls(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(ro.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(vo);function Us(t){vo.call(this),this.b=t,this.a={}}go(Us,vo);var Vs=[];function qs(t,e,n,r){Array.isArray(n)||(n&&(Vs[0]=n.toString()),n=Vs);for(var i=0;i<n.length;i++){var o=cs(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Bs(t){ko(t.a,function(t,e){this.a.hasOwnProperty(e)&&ds(t)},t),t.a={}}function Hs(){this.a=!0}function zs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ts(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Us.prototype.G=function(){Us.X.G.call(this),Bs(this)},Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Hs.prototype.info=function(){};var Ks={},Ws=null;function Gs(){return Ws=Ws||new _s}function $s(t){Xo.call(this,Ks.Fa,t)}function Qs(t){var e=Gs();ws(e,new $s(e,t))}function Ys(t,e){Xo.call(this,Ks.STAT_EVENT,t),this.stat=e}function Xs(t){var e=Gs();ws(e,new Ys(e,t))}function Js(t){Xo.call(this,Ks.Ga,t)}function Zs(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ro.setTimeout(function(){t()},e)}Ks.Fa="serverreachability",go($s,Xo),Ks.STAT_EVENT="statevent",go(Ys,Xo),Ks.Ga="timingevent",go(Js,Xo);var ta={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ea={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function na(){}function ra(){}na.prototype.a=null;var ia,oa={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function sa(){Xo.call(this,"d")}function aa(){Xo.call(this,"c")}function ua(){}function ca(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Us(this),this.P=la,this.R=new Rs(t=Fo?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}go(sa,Xo),go(aa,Xo),go(ua,na),ia=new ua;var la=45e3,ha={},fa={};function da(t,e,n){t.H=1,t.i=Da(Aa(e)),t.j=n,t.I=!0,pa(t,null)}function pa(t,e){t.u=po(),ma(t),t.l=Aa(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),$a(n.b,"t",r),t.D=0,t.a=Bu(t.g,t.g.C?e:null),0<t.O&&(t.F=new Fs(ho(t.Ca,t,t.a),t.O)),qs(t.J,t.a,"readystatechange",t.Xa),e=t.B?Ao(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Qs(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function ga(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=va(t,n);if(i==fa){4==e&&(t.h=4,Xs(14),r=!1),zs(t.c,t.f,null,"[Incomplete Response]");break}if(i==ha){t.h=4,Xs(15),zs(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}zs(t.c,t.f,i,null),Ia(t,i)}4==e&&0==n.length&&(t.h=1,Xs(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ru(e),e.F=!0,Xs(11))):(zs(t.c,t.f,n,"[Invalid Chunked Response]"),wa(t),_a(t))}function va(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?fa:(n=Number(e.substring(n,r)),isNaN(n)?ha:(r+=1)+n>e.length?fa:(e=e.substr(r,n),t.D=r+n,e))}function ma(t){t.T=po()+t.P,ya(t,t.P)}function ya(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Zs(ho(t.Va,t),e)}function ba(t){t.o&&(ro.clearTimeout(t.o),t.o=null)}function _a(t){0==t.g.v||t.A||Lu(t.g,t)}function wa(t){ba(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ds(t.R),Bs(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ia(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||eu(n.b,t)))if(n.I=t.N,!t.C&&eu(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(xy){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Mu(n),Ou(n)}Pu(n),Xs(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Zs(ho(n.Sa,n),6e3));if(1>=tu(n.b)&&n.ea){try{n.ea()}catch(xy){}n.ea=void 0}}else Uu(n,11)}else if((t.C||n.a==t)&&Mu(n),!wo(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Eo(l,"spdy")||Eo(l,"quic")||Eo(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(nu(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Ra(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=po()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=qu(u,u.C?u.ga:null,u.fa),d.C){ru(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(ba(p),ma(p)),u.a=d}else ju(u);0<n.g.length&&ku(n)}else"stop"!=i[0]&&"close"!=i[0]||Uu(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Uu(n,7):Eu(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Qs(4)}catch(xy){}}function Ta(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(oo(t)||"string"==typeof t)yo(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(oo(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(oo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ea(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ea)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Oa(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ca(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ca(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ca(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(to=ca.prototype).setTimeout=function(t){this.P=t},to.Xa=function(t){t=t.target;var e=this.F;e&&3==_u(t)?e.f():this.Ca(t)},to.Ca=function(t){try{if(t==this.a)t:{var e=_u(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Fo&&!this.a.$())){this.A||4!=e||7==n||Qs(8==n||0>=r?3:2),ba(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wo(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Xs(12),wa(this),_a(this);break t}zs(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ia(this,u)}this.I?(ga(this,e,o),Fo&&this.b&&3==e&&(qs(this.J,this.R,"tick",this.Wa),this.R.start())):(zs(this.c,this.f,o,null),Ia(this,o)),4==e&&wa(this),this.b&&!this.A&&(4==e?Lu(this.g,this):(this.b=!1,ma(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Xs(12)):(this.h=0,Xs(13)),wa(this),_a(this)}}}catch(c){}},to.Wa=function(){if(this.a){var t=_u(this.a),e=this.a.$();this.D<e.length&&(ba(this),ga(this,t,e),this.b&&4!=t&&ma(this))}},to.cancel=function(){this.A=!0,wa(this)},to.Va=function(){this.o=null;var t=po();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Qs(3),Xs(17)),wa(this),this.h=2,_a(this)):ya(this,this.T-t)},(to=Ea.prototype).K=function(){Oa(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},to.L=function(){return Oa(this),this.a.concat()},to.get=function(t,e){return Ca(this.b,t)?this.b[t]:e},to.set=function(t,e){Ca(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},to.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Sa=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ka(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ka){this.a=void 0!==e?e:t.a,xa(this,t.f),this.j=t.j,Na(this,t.c),ja(this,t.h),this.g=t.g,e=t.b;var n=new za;n.c=e.c,e.a&&(n.a=new Ea(e.a),n.b=e.b),Pa(this,n),this.i=t.i}else t&&(n=String(t).match(Sa))?(this.a=!!e,xa(this,n[1]||"",!0),this.j=Ma(n[2]||""),Na(this,n[3]||"",!0),ja(this,n[4]),this.g=Ma(n[5]||"",!0),Pa(this,n[6]||"",!0),this.i=Ma(n[7]||"")):(this.a=!!e,this.b=new za(null,this.a))}function Aa(t){return new ka(t)}function xa(t,e,n){t.f=n?Ma(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Na(t,e,n){t.c=n?Ma(e,!0):e}function ja(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Pa(t,e,n){e instanceof za?(t.b=e,function(t,e){e&&!t.f&&(Ka(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Wa(this,e),$a(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=La(e,Ba)),t.b=new za(e,t.a))}function Ra(t,e,n){t.b.set(e,n)}function Da(t){return Ra(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^po()).toString(36)),t}function Ma(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function La(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Fa),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Fa(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ka.prototype.toString=function(){var t=[],e=this.f;e&&t.push(La(e,Ua,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(La(e,Ua,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(La(n,"/"==n.charAt(0)?qa:Va,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",La(n,Ha)),t.join("")};var Ua=/[#\/\?@]/g,Va=/[#\?:]/g,qa=/[#\?]/g,Ba=/[#\?@]/g,Ha=/#/g;function za(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ka(t){t.a||(t.a=new Ea,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Wa(t,e){Ka(t),e=Qa(t,e),Ca(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ca((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Oa(t)))}function Ga(t,e){return Ka(t),e=Qa(t,e),Ca(t.a.b,e)}function $a(t,e,n){Wa(t,e),0<n.length&&(t.c=null,t.a.set(Qa(t,e),_o(n)),t.b+=n.length)}function Qa(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(to=za.prototype).add=function(t,e){Ka(this),this.c=null,t=Qa(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},to.forEach=function(t,e){Ka(this),this.a.forEach(function(n,r){yo(n,function(n){t.call(e,n,r,this)},this)},this)},to.L=function(){Ka(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},to.K=function(t){Ka(this);var e=[];if("string"==typeof t)Ga(this,t)&&(e=bo(e,this.a.get(Qa(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=bo(e,t[n])}return e},to.set=function(t,e){return Ka(this),this.c=null,Ga(this,t=Qa(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},to.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},to.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Ya=function(){return function(t,e){this.b=t,this.a=e}}();function Xa(t){this.g=t||Ja,t=ro.PerformanceNavigationTiming?0<(t=ro.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ro.ia&&ro.ia.ya&&ro.ia.ya()&&ro.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Ja=10;function Za(t){return!!t.b||!!t.a&&t.a.size>=t.f}function tu(t){return t.b?1:t.a?t.a.size:0}function eu(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function nu(t,e){t.a?t.a.add(e):t.b=e}function ru(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function iu(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Zi(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return _o(t.c)}function ou(){}function su(){this.a=new ou}function au(t,e,n){var r=n||"";try{Ta(t,function(t,n){var i=t;so(t)&&(i=Ts(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(pb){throw e.push(r+"type="+encodeURIComponent("_badmap")),pb}}function uu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Xa.prototype.cancel=function(){var t,e;if(this.c=iu(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Zi(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},ou.prototype.stringify=function(t){return ro.JSON.stringify(t,void 0)},ou.prototype.parse=function(t){return ro.JSON.parse(t,void 0)};var cu=ro.JSON.parse;function lu(t){_s.call(this),this.headers=new Ea,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=hu,this.D=this.F=!1}go(lu,_s);var hu="",fu=/^https?$/i,du=["POST","PUT"];function pu(t){return"content-type"==t.toLowerCase()}function gu(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,vu(t),yu(t)}function vu(t){t.u||(t.u=!0,ws(t,"complete"),ws(t,"error"))}function mu(t){if(t.b&&void 0!==no&&(!t.s[1]||4!=_u(t)||2!=t.W()))if(t.l&&4==_u(t))Ms(t.za,0,t);else if(ws(t,"readystatechange"),4==_u(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Sa)[1]||null;if(!o&&ro.self&&ro.self.location){var s=ro.self.location.protocol;o=s.substr(0,s.length-1)}i=!fu.test(o?o.toLowerCase():"")}e=i}if(e)ws(t,"complete"),ws(t,"success");else{t.h=6;try{var a=2<_u(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",vu(t)}}finally{yu(t)}}}function yu(t,e){if(t.a){bu(t);var n=t.a,r=t.s[0]?io:null;t.a=null,t.s=null,e||ws(t,"ready");try{n.onreadystatechange=r}catch(pb){}}}function bu(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(ro.clearTimeout(t.m),t.m=null)}function _u(t){return t.a?t.a.readyState:0}function wu(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ko(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ra(t,e,n))}function Iu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Tu(t){this.pa=0,this.g=[],this.c=new Hs,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Iu("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Iu("baseRetryDelayMs",5e3,t),this.Ra=Iu("retryDelaySeedMs",1e4,t),this.Ma=Iu("forwardChannelMaxRetries",2,t),this.ma=Iu("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Xa(t&&t.concurrentRequestLimit),this.ka=new su,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Eu(t){if(Cu(t),3==t.v){var e=t.R++,n=Aa(t.B);Ra(n,"SID",t.J),Ra(n,"RID",e),Ra(n,"TYPE","terminate"),xu(t,n),(e=new ca(t,t.c,e,void 0)).H=2,e.i=Da(Aa(n)),n=!1,ro.navigator&&ro.navigator.sendBeacon&&(n=ro.navigator.sendBeacon(e.i.toString(),"")),!n&&ro.Image&&((new Image).src=e.i,n=!0),n||(e.a=Bu(e.g,null),e.a.ba(e.i)),e.u=po(),ma(e)}Vu(t)}function Ou(t){t.a&&(Ru(t),t.a.cancel(),t.a=null)}function Cu(t){Ou(t),t.j&&(ro.clearTimeout(t.j),t.j=null),Mu(t),t.b.cancel(),t.h&&("number"==typeof t.h&&ro.clearTimeout(t.h),t.h=null)}function Su(t,e){t.g.push(new Ya(t.Oa++,e)),3==t.v&&ku(t)}function ku(t){Za(t.b)||t.h||(t.h=!0,xs(t.Ba,t),t.u=0)}function Au(t,e){var n;n=e?e.f:t.R++;var r=Aa(t.B);Ra(r,"SID",t.J),Ra(r,"RID",n),Ra(r,"AID",t.P),xu(t,r),t.i&&t.l&&wu(r,t.i,t.l),n=new ca(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Nu(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),nu(t.b,n),da(n,r,e)}function xu(t,e){t.f&&Ta({},function(t,n){Ra(e,n,t)})}function Nu(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ho(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{au(l,s,"req"+c+"_")}catch(bc){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function ju(t){t.a||t.j||(t.T=1,xs(t.Aa,t),t.o=0)}function Pu(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Zs(ho(t.Aa,t),Fu(t,t.o)),t.o++,0))}function Ru(t){null!=t.s&&(ro.clearTimeout(t.s),t.s=null)}function Du(t){t.a=new ca(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Aa(t.la);Ra(e,"RID","rpc"),Ra(e,"SID",t.J),Ra(e,"CI",t.H?"0":"1"),Ra(e,"AID",t.P),xu(t,e),Ra(e,"TYPE","xmlhttp"),t.i&&t.l&&wu(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Da(Aa(e)),n.j=null,n.I=!0,pa(n,t)}function Mu(t){null!=t.m&&(ro.clearTimeout(t.m),t.m=null)}function Lu(t,e){var n=null;if(t.a==e){Mu(t),Ru(t),t.a=null;var r=2}else{if(!eu(t.b,e))return;n=e.s,ru(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=po()-e.u;var i=t.u;ws(r=Gs(),new Js(r,n,e,i)),ku(t)}else ju(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(tu(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Zs(ho(t.Ba,t,e),Fu(t,t.u)),t.u++,0)))}(t,e)||2==r&&Pu(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Uu(t,5);break;case 4:Uu(t,10);break;case 3:Uu(t,6);break;default:Uu(t,2)}}function Fu(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Uu(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=ho(t.Ya,t);n||(n=new ka("//www.google.com/images/cleardot.gif"),ro.location&&"http"==ro.location.protocol||xa(n,"https"),Da(n)),function(t,e){var n=new Hs;if(ro.Image){var r=new Image;r.onload=fo(uu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=fo(uu,n,r,"TestLoadImage: error",!1,e),r.onabort=fo(uu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=fo(uu,n,r,"TestLoadImage: timeout",!1,e),ro.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Xs(2);t.v=0,t.f&&t.f.ra(e),Vu(t),Cu(t)}function Vu(t){t.v=0,t.I=-1,t.f&&(0==iu(t.b).length&&0==t.g.length||(t.b.c.length=0,_o(t.g),t.g.length=0),t.f.qa())}function qu(t,e,n){var r=function(t){return t instanceof ka?Aa(t):new ka(t,void 0)}(n);if(""!=r.c)e&&Na(r,e+"."+r.c),ja(r,r.h);else{var i=ro.location;r=function(t,e,n,r){var i=new ka(null,void 0);return t&&xa(i,t),e&&Na(i,e),n&&ja(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&ko(t.V,function(t,e){Ra(r,e,t)}),n=t.na,(e=t.A)&&n&&Ra(r,e,n),Ra(r,"VER",t.ha),xu(t,r),r}function Bu(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new lu(t.Na)).F=t.C,e}function Hu(){}function zu(){if(Mo&&!(10<=Number(Go)))throw Error("Environmental error: no available transport.")}function Ku(t,e){_s.call(this),this.a=new Tu(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!wo(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!wo(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new $u(this)}function Wu(t){sa.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Gu(){aa.call(this),this.status=1}function $u(t){this.a=t}(to=lu.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:ia),this.a.onreadystatechange=ho(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void gu(this,o)}t=n||"";var i=new Ea(this.headers);r&&Ta(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=pu,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=ro.FormData&&t instanceof ro.FormData,!(0<=mo(du,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{bu(this),0<this.o&&((this.D=function(t){return Mo&&Wo(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ho(this.xa,this)):this.m=Ms(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){gu(this,o)}},to.xa=function(){void 0!==no&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ws(this,"timeout"),this.abort(8))},to.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ws(this,"complete"),ws(this,"abort"),yu(this))},to.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),yu(this,!0)),lu.X.G.call(this)},to.za=function(){this.j||(this.A||this.l||this.g?mu(this):this.Ua())},to.Ua=function(){mu(this)},to.W=function(){try{return 2<_u(this)?this.a.status:-1}catch(Ro){return-1}},to.$=function(){try{return this.a?this.a.responseText:""}catch(Ro){return""}},to.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),cu(e)}},to.ua=function(){return this.h},to.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(to=Tu.prototype).ha=8,to.v=1,to.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ca(this,this.c,t,void 0),r=this.l;if(this.O&&(r?No(r=Ao(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Nu(this,n,e),Ra(i=Aa(this.B),"RID",t),Ra(i,"CVER",22),this.A&&Ra(i,"X-HTTP-Session-Id",this.A),xu(this,i),this.i&&r&&wu(i,this.i,r),nu(this.b,n),this.Ia&&Ra(i,"TYPE","init"),this.da?(Ra(i,"$req",e),Ra(i,"SID","null"),n.U=!0,da(n,i,null)):da(n,i,e),this.v=2}}else 3==this.v&&(t?Au(this,t):0==this.g.length||Za(this.b)||Au(this))},to.Aa=function(){if(this.j=null,Du(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Zs(ho(this.Ta,this),t)}},to.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Xs(10),Ou(this),Du(this))},to.Sa=function(){null!=this.m&&(this.m=null,Ou(this),Pu(this),Xs(19))},to.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Xs(2)):(this.c.info("Failed to ping google.com"),Xs(1))},(to=Hu.prototype).ta=function(){},to.sa=function(){},to.ra=function(){},to.qa=function(){},to.Ja=function(){},zu.prototype.a=function(t,e){return new Ku(t,e)},go(Ku,_s),Ku.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Xs(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=qu(t,null,t.fa),ku(t)},Ku.prototype.close=function(){Eu(this.a)},Ku.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Su(this.a,e)}else this.l?((e={}).__data__=Ts(t),Su(this.a,e)):Su(this.a,t)},Ku.prototype.G=function(){this.a.f=null,delete this.f,Eu(this.a),delete this.a,Ku.X.G.call(this)},go(Wu,sa),go(Gu,aa),go($u,Hu),$u.prototype.ta=function(){ws(this.a,"a")},$u.prototype.sa=function(t){ws(this.a,new Wu(t))},$u.prototype.ra=function(t){ws(this.a,new Gu(t))},$u.prototype.qa=function(){ws(this.a,"b")},zu.prototype.createWebChannel=zu.prototype.a,Ku.prototype.send=Ku.prototype.h,Ku.prototype.open=Ku.prototype.g,Ku.prototype.close=Ku.prototype.close,ta.NO_ERROR=0,ta.TIMEOUT=8,ta.HTTP_ERROR=6,ea.COMPLETE="complete",ra.EventType=oa,oa.OPEN="a",oa.CLOSE="b",oa.ERROR="c",oa.MESSAGE="d",_s.prototype.listen=_s.prototype.va,lu.prototype.listenOnce=lu.prototype.wa,lu.prototype.getLastError=lu.prototype.Qa,lu.prototype.getLastErrorCode=lu.prototype.ua,lu.prototype.getStatus=lu.prototype.W,lu.prototype.getResponseJson=lu.prototype.Pa,lu.prototype.getResponseText=lu.prototype.$,lu.prototype.send=lu.prototype.ba;var Qu=ta,Yu=ea,Xu=Ks,Ju=ra,Zu=lu,tc=n("mrSG"),ec=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();ec.o=-1;var nc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},rc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(tc.__extends)(e,t),e}(Error),ic=new Xi.Logger("@firebase/firestore");function oc(){return ic.logLevel}function sc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ic.logLevel<=Xi.LogLevel.DEBUG){var r=e.map(cc);ic.debug.apply(ic,Object(tc.__spreadArray)(["Firestore (8.6.3): "+t],r))}}function ac(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ic.logLevel<=Xi.LogLevel.ERROR){var r=e.map(cc);ic.error.apply(ic,Object(tc.__spreadArray)(["Firestore (8.6.3): "+t],r))}}function uc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ic.logLevel<=Xi.LogLevel.WARN){var r=e.map(cc);ic.warn.apply(ic,Object(tc.__spreadArray)(["Firestore (8.6.3): "+t],r))}}function cc(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(pb){return t}}function lc(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.3) INTERNAL ASSERTION FAILED: "+t;throw ac(e),new Error(e)}function hc(t,e){t||lc()}function fc(t,e){return t}function dc(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var pc=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=dc(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function gc(t,e){return t<e?-1:t>e?1:0}function vc(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function mc(t){return t+"\0"}var yc=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new rc(nc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new rc(nc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new rc(nc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new rc(nc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?gc(this.nanoseconds,t.nanoseconds):gc(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),bc=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new yc(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function _c(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wc(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ic(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Tc=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&lc(),void 0===n?n=t.length-e:n>t.length-e&&lc(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ec=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(tc.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new rc(nc.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Tc),Oc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Cc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(tc.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Oc.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new rc(nc.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new rc(nc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new rc(nc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new rc(nc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Tc),Sc=function(){function t(t){this.fields=t,t.sort(Cc.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return vc(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),kc=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return gc(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();kc.EMPTY_BYTE_STRING=new kc("");var Ac=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xc(t){if(hc(!!t),"string"==typeof t){var e=0,n=Ac.exec(t);if(hc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Nc(t.seconds),nanos:Nc(t.nanos)}}function Nc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function jc(t){return"string"==typeof t?kc.fromBase64String(t):kc.fromUint8Array(t)}function Pc(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Rc(t){var e=t.mapValue.fields.__previous_value__;return Pc(e)?Rc(e):e}function Dc(t){var e=xc(t.mapValue.fields.__local_write_time__.timestampValue);return new yc(e.seconds,e.nanos)}function Mc(t){return null==t}function Lc(t){return 0===t&&1/t==-1/0}function Fc(t){return"number"==typeof t&&Number.isInteger(t)&&!Lc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Uc=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Ec.fromString(e))},t.fromName=function(e){return new t(Ec.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Ec.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Ec.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Ec(e.slice()))},t}();function Vc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Pc(t)?4:10:lc()}function qc(t,e){var n=Vc(t);if(n!==Vc(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Dc(t).isEqual(Dc(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=xc(t.timestampValue),r=xc(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return jc(t.bytesValue).isEqual(jc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Nc(t.geoPointValue.latitude)===Nc(e.geoPointValue.latitude)&&Nc(t.geoPointValue.longitude)===Nc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Nc(t.integerValue)===Nc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Nc(t.doubleValue),r=Nc(e.doubleValue);return n===r?Lc(n)===Lc(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return vc(t.arrayValue.values||[],e.arrayValue.values||[],qc);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(_c(n)!==_c(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!qc(n[i],r[i])))return!1;return!0}(t,e);default:return lc()}}function Bc(t,e){return void 0!==(t.values||[]).find(function(t){return qc(t,e)})}function Hc(t,e){var n=Vc(t),r=Vc(e);if(n!==r)return gc(n,r);switch(n){case 0:return 0;case 1:return gc(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Nc(t.integerValue||t.doubleValue),r=Nc(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return zc(t.timestampValue,e.timestampValue);case 4:return zc(Dc(t),Dc(e));case 5:return gc(t.stringValue,e.stringValue);case 6:return function(t,e){var n=jc(t),r=jc(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=gc(n[i],r[i]);if(0!==o)return o}return gc(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=gc(Nc(t.latitude),Nc(e.latitude));return 0!==n?n:gc(Nc(t.longitude),Nc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Hc(n[i],r[i]);if(o)return o}return gc(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=gc(r[s],o[s]);if(0!==a)return a;var u=Hc(n[r[s]],i[o[s]]);if(0!==u)return u}return gc(r.length,o.length)}(t.mapValue,e.mapValue);default:throw lc()}}function zc(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return gc(t,e);var n=xc(t),r=xc(e),i=gc(n.seconds,r.seconds);return 0!==i?i:gc(n.nanos,r.nanos)}function Kc(t){return Wc(t)}function Wc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=xc(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?jc(t.bytesValue).toBase64():"referenceValue"in t?Uc.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Wc(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Wc(t.fields[o])}return e+"}"}(t.mapValue):lc();var e}function Gc(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function $c(t){return!!t&&"integerValue"in t}function Qc(t){return!!t&&"arrayValue"in t}function Yc(t){return!!t&&"nullValue"in t}function Xc(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jc(t){return!!t&&"mapValue"in t}function Zc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},xc(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return wc(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=Zc(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Zc(t.arrayValue.values[r]);return n}return Object.assign({},t)}var tl=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Jc(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Zc(e)},t.prototype.setAll=function(t){var e=this,n=Cc.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Zc(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Jc(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return qc(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Jc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){wc(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(Zc(this.value))},t}();function el(t){var e=[];return wc(t.fields,function(t,n){var r=new Cc([t]);if(Jc(n)){var i=el(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Sc(e)}var nl=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,bc.min(),tl.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,tl.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,tl.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=tl.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=tl.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),rl=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function il(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new rl(t,e,n,r,i,o,s)}function ol(t){var e=fc(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Kc(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Mc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=yl(e.startAt)),e.endAt&&(n+="|ub:",n+=yl(e.endAt)),e.h=n}return e.h}function sl(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!_l(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!qc(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Il(t.startAt,e.startAt)&&Il(t.endAt,e.endAt)}function al(t){return Uc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var ul=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(tc.__extends)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new cl(t,n,r):"array-contains"===n?new dl(t,r):"in"===n?new pl(t,r):"not-in"===n?new gl(t,r):"array-contains-any"===n?new vl(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new ll(t,n):new hl(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Hc(e,this.value)):null!==e&&Vc(this.value)===Vc(e)&&this.m(Hc(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return lc()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),cl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Uc.fromName(r.referenceValue),i}return Object(tc.__extends)(e,t),e.prototype.matches=function(t){var e=Uc.comparator(t.key,this.key);return this.m(e)},e}(ul),ll=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=fl(0,n),r}return Object(tc.__extends)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(ul),hl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=fl(0,n),r}return Object(tc.__extends)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(ul);function fl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Uc.fromName(t.referenceValue)})}var dl=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(tc.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Qc(e)&&Bc(e.arrayValue,this.value)},e}(ul),pl=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(tc.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Bc(this.value.arrayValue,e)},e}(ul),gl=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(tc.__extends)(e,t),e.prototype.matches=function(t){if(Bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Bc(this.value.arrayValue,e)},e}(ul),vl=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(tc.__extends)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Qc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Bc(e.value.arrayValue,t)})},e}(ul),ml=function(t,e){this.position=t,this.before=e};function yl(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Kc(t)}).join(",")}var bl=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function _l(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function wl(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Uc.comparator(Uc.fromName(s.referenceValue),n.key):Hc(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Il(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!qc(t.position[n],e.position[n]))return!1;return!0}var Tl=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function El(t,e,n,r,i,o,s,a){return new Tl(t,e,n,r,i,o,s,a)}function Ol(t){return new Tl(t)}function Cl(t){return!Mc(t.limit)&&"F"===t.limitType}function Sl(t){return!Mc(t.limit)&&"L"===t.limitType}function kl(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Al(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function xl(t){return null!==t.collectionGroup}function Nl(t){var e=fc(t);if(null===e.p){e.p=[];var n=Al(e),r=kl(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new bl(n)),e.p.push(new bl(Cc.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new bl(Cc.keyField(),u))}}}return e.p}function jl(t){var e=fc(t);if(!e.T)if("F"===e.limitType)e.T=il(e.path,e.collectionGroup,Nl(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Nl(e);r<i.length;r++){var o=i[r];n.push(new bl(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new ml(e.endAt.position,!e.endAt.before):null,a=e.startAt?new ml(e.startAt.position,!e.startAt.before):null;e.T=il(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Pl(t,e,n){return new Tl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rl(t,e){return sl(jl(t),jl(e))&&t.limitType===e.limitType}function Dl(t){return ol(jl(t))+"|lt:"+t.limitType}function Ml(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Kc(e.value);var e}).join(", ")+"]"),Mc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+yl(t.startAt)),t.endAt&&(e+=", endAt: "+yl(t.endAt)),"Target("+e+")"}(jl(t))+"; limitType="+t.limitType+")"}function Ll(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Uc.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!wl(t.startAt,Nl(t),e)||t.endAt&&wl(t.endAt,Nl(t),e))}(t,e)}function Fl(t){return function(e,n){for(var r=!1,i=0,o=Nl(t);i<o.length;i++){var s=o[i],a=Ul(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Ul(t,e,n){var r=t.field.isKeyField()?Uc.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Hc(r,i):lc()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return lc()}}function Vl(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(e)?"-0":e}}function ql(t){return{integerValue:""+t}}function Bl(t,e){return Fc(e)?ql(e):Vl(t,e)}var Hl=function(){this._=void 0};function zl(t,e,n){return t instanceof Gl?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof $l?Ql(t,e):t instanceof Yl?Xl(t,e):function(t,e){var n=Wl(t,e),r=Zl(n)+Zl(t.A);return $c(n)&&$c(t.A)?ql(r):Vl(t.R,r)}(t,e)}function Kl(t,e,n){return t instanceof $l?Ql(t,e):t instanceof Yl?Xl(t,e):n}function Wl(t,e){return t instanceof Jl?$c(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Gl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(tc.__extends)(e,t),e}(Hl),$l=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(tc.__extends)(e,t),e}(Hl);function Ql(t,e){for(var n=th(e),r=function(t){n.some(function(e){return qc(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Yl=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(tc.__extends)(e,t),e}(Hl);function Xl(t,e){for(var n=th(e),r=function(t){n=n.filter(function(e){return!qc(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Jl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(tc.__extends)(e,t),e}(Hl);function Zl(t){return Nc(t.integerValue||t.doubleValue)}function th(t){return Qc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var eh=function(t,e){this.field=t,this.transform=e},nh=function(t,e){this.version=t,this.transformResults=e},rh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function ih(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var oh=function(){};function sh(t,e,n){t instanceof hh?function(t,e,n){var r=t.value.clone(),i=ph(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof fh?function(t,e,n){if(ih(t.precondition,e)){var r=ph(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(dh(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ah(t,e,n){t instanceof hh?function(t,e,n){if(ih(t.precondition,e)){var r=t.value.clone(),i=gh(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(lh(e),r).setHasLocalMutations()}}(t,e,n):t instanceof fh?function(t,e,n){if(ih(t.precondition,e)){var r=gh(t.fieldTransforms,n,e),i=e.data;i.setAll(dh(t)),i.setAll(r),e.convertToFoundDocument(lh(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){ih(t.precondition,e)&&e.convertToNoDocument(bc.min())}(t,e)}function uh(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Wl(o.transform,s||null);null!=a&&(null==n&&(n=tl.empty()),n.set(o.field,a))}return n||null}function ch(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&vc(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof $l&&e instanceof $l||t instanceof Yl&&e instanceof Yl?vc(t.elements,e.elements,qc):t instanceof Jl&&e instanceof Jl?qc(t.A,e.A):t instanceof Gl&&e instanceof Gl}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function lh(t){return t.isFoundDocument()?t.version:bc.min()}var hh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(tc.__extends)(e,t),e}(oh),fh=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(tc.__extends)(e,t),e}(oh);function dh(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function ph(t,e,n){var r=new Map;hc(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Kl(s,a,n[i]))}return r}function gh(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,zl(a,u,e))}return r}var vh,mh,yh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(tc.__extends)(e,t),e}(oh),bh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(tc.__extends)(e,t),e}(oh),_h=function(t){this.count=t};function wh(t){switch(t){case nc.OK:return lc();case nc.CANCELLED:case nc.UNKNOWN:case nc.DEADLINE_EXCEEDED:case nc.RESOURCE_EXHAUSTED:case nc.INTERNAL:case nc.UNAVAILABLE:case nc.UNAUTHENTICATED:return!1;case nc.INVALID_ARGUMENT:case nc.NOT_FOUND:case nc.ALREADY_EXISTS:case nc.PERMISSION_DENIED:case nc.FAILED_PRECONDITION:case nc.ABORTED:case nc.OUT_OF_RANGE:case nc.UNIMPLEMENTED:case nc.DATA_LOSS:return!0;default:return lc()}}function Ih(t){if(void 0===t)return ac("GRPC error has no .code"),nc.UNKNOWN;switch(t){case vh.OK:return nc.OK;case vh.CANCELLED:return nc.CANCELLED;case vh.UNKNOWN:return nc.UNKNOWN;case vh.DEADLINE_EXCEEDED:return nc.DEADLINE_EXCEEDED;case vh.RESOURCE_EXHAUSTED:return nc.RESOURCE_EXHAUSTED;case vh.INTERNAL:return nc.INTERNAL;case vh.UNAVAILABLE:return nc.UNAVAILABLE;case vh.UNAUTHENTICATED:return nc.UNAUTHENTICATED;case vh.INVALID_ARGUMENT:return nc.INVALID_ARGUMENT;case vh.NOT_FOUND:return nc.NOT_FOUND;case vh.ALREADY_EXISTS:return nc.ALREADY_EXISTS;case vh.PERMISSION_DENIED:return nc.PERMISSION_DENIED;case vh.FAILED_PRECONDITION:return nc.FAILED_PRECONDITION;case vh.ABORTED:return nc.ABORTED;case vh.OUT_OF_RANGE:return nc.OUT_OF_RANGE;case vh.UNIMPLEMENTED:return nc.UNIMPLEMENTED;case vh.DATA_LOSS:return nc.DATA_LOSS;default:return lc()}}(mh=vh||(vh={}))[mh.OK=0]="OK",mh[mh.CANCELLED=1]="CANCELLED",mh[mh.UNKNOWN=2]="UNKNOWN",mh[mh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mh[mh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mh[mh.NOT_FOUND=5]="NOT_FOUND",mh[mh.ALREADY_EXISTS=6]="ALREADY_EXISTS",mh[mh.PERMISSION_DENIED=7]="PERMISSION_DENIED",mh[mh.UNAUTHENTICATED=16]="UNAUTHENTICATED",mh[mh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mh[mh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mh[mh.ABORTED=10]="ABORTED",mh[mh.OUT_OF_RANGE=11]="OUT_OF_RANGE",mh[mh.UNIMPLEMENTED=12]="UNIMPLEMENTED",mh[mh.INTERNAL=13]="INTERNAL",mh[mh.UNAVAILABLE=14]="UNAVAILABLE",mh[mh.DATA_LOSS=15]="DATA_LOSS";var Th=function(){function t(t,e){this.comparator=t,this.root=e||Oh.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Oh.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Oh.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Eh(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Eh(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Eh(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Eh(this.root,t,this.comparator,!0)},t}(),Eh=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Oh=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw lc();if(this.right.isRed())throw lc();var t=this.left.check();if(t!==this.right.check())throw lc();return t+(this.isRed()?0:1)},t}();Oh.EMPTY=null,Oh.RED=!0,Oh.BLACK=!1,Oh.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw lc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw lc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw lc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw lc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw lc()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Oh(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Ch=function(){function t(t){this.comparator=t,this.data=new Th(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Sh(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Sh(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Sh=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),kh=new Th(Uc.comparator);function Ah(){return kh}var xh=new Th(Uc.comparator);function Nh(){return xh}var jh=new Th(Uc.comparator);function Ph(){return jh}var Rh=new Ch(Uc.comparator);function Dh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Rh,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Mh=new Ch(gc);function Lh(){return Mh}var Fh=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Uh.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(bc.min(),r,Lh(),Ah(),Dh())},t}(),Uh=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(kc.EMPTY_BYTE_STRING,n,Dh(),Dh(),Dh())},t}(),Vh=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},qh=function(t,e){this.targetId=t,this.V=e},Bh=function(t,e,n,r){void 0===n&&(n=kc.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Hh=function(){function t(){this.S=0,this.D=Wh(),this.C=kc.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Dh(),e=Dh(),n=Dh();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:lc()}}),new Uh(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Wh()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),zh=function(){function t(t){this.W=t,this.G=new Map,this.H=Ah(),this.J=Kh(),this.Y=new Ch(gc)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:lc()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(al(i))if(0===n){var o=new Uc(i.path);this.tt(e,o,nl.newNoDocument(o,bc.min()))}else hc(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&al(o.target)){var s=new Uc(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,nl.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=Dh();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Fh(t,n,this.Y,this.H,r);return this.H=Ah(),this.J=Kh(),this.Y=new Ch(gc),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Hh,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Ch(gc),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||sc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Hh),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Kh(){return new Th(Uc.comparator)}function Wh(){return new Th(Uc.comparator)}var Gh={asc:"ASCENDING",desc:"DESCENDING"},$h={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qh=function(t,e){this.databaseId=t,this.I=e};function Yh(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xh(t,e){return t.I?e.toBase64():e.toUint8Array()}function Jh(t,e){return Yh(t,e.toTimestamp())}function Zh(t){return hc(!!t),bc.fromTimestamp(function(t){var e=xc(t);return new yc(e.seconds,e.nanos)}(t))}function tf(t,e){return function(t){return new Ec(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function ef(t){var e=Ec.fromString(t);return hc(Cf(e)),e}function nf(t,e){return tf(t.databaseId,e.path)}function rf(t,e){var n=ef(e);if(n.get(1)!==t.databaseId.projectId)throw new rc(nc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new rc(nc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Uc(uf(n))}function of(t,e){return tf(t.databaseId,e)}function sf(t){var e=ef(t);return 4===e.length?Ec.emptyPath():uf(e)}function af(t){return new Ec(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uf(t){return hc(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function cf(t,e,n){return{name:nf(t,e),fields:n.value.mapValue.fields}}function lf(t,e,n){var r=rf(t,e.name),i=Zh(e.updateTime),o=new tl({mapValue:{fields:e.fields}}),s=nl.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function hf(t,e){var n;if(e instanceof hh)n={update:cf(t,e.key,e.value)};else if(e instanceof yh)n={delete:nf(t,e.key)};else if(e instanceof fh)n={update:cf(t,e.key,e.data),updateMask:Of(e.fieldMask)};else{if(!(e instanceof bh))return lc();n={verify:nf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Gl)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof $l)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Yl)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Jl)return{fieldPath:e.field.canonicalString(),increment:n.A};throw lc()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Jh(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:lc()}(t,e.precondition)),n}function ff(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?rh.updateTime(Zh(t.updateTime)):void 0!==t.exists?rh.exists(t.exists):rh.none()}(e.currentDocument):rh.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(hc("REQUEST_TIME"===e.setToServerValue),n=new Gl):"appendMissingElements"in e?n=new $l(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Yl(e.removeAllFromArray.values||[]):"increment"in e?n=new Jl(t,e.increment):lc();var r=Cc.fromServerFormat(e.fieldPath);return new eh(r,n)}(t,e)}):[];if(e.update){var i=rf(t,e.update.name),o=new tl({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Sc((t.fieldPaths||[]).map(function(t){return Cc.fromServerFormat(t)}))}(e.updateMask);return new fh(i,o,s,n,r)}return new hh(i,o,n,r)}if(e.delete){var a=rf(t,e.delete);return new yh(a,n)}if(e.verify){var u=rf(t,e.verify);return new bh(u,n)}return lc()}function df(t,e){return{documents:[of(t,e.path)]}}function pf(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=of(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=of(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Xc(t.value))return{unaryFilter:{field:wf(t.field),op:"IS_NAN"}};if(Yc(t.value))return{unaryFilter:{field:wf(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Xc(t.value))return{unaryFilter:{field:wf(t.field),op:"IS_NOT_NAN"}};if(Yc(t.value))return{unaryFilter:{field:wf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wf(t.field),op:_f(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:wf(t.field),direction:bf(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||Mc(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=mf(e.startAt)),e.endAt&&(n.structuredQuery.endAt=mf(e.endAt)),n}function gf(t){var e=sf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){hc(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=vf(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new bl(If(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Mc(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=yf(n.startAt));var l=null;return n.endAt&&(l=yf(n.endAt)),El(e,i,a,s,u,"F",c,l)}function vf(t){return t?void 0!==t.unaryFilter?[Ef(t)]:void 0!==t.fieldFilter?[Tf(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return vf(t)}).reduce(function(t,e){return t.concat(e)}):lc():[]}function mf(t){return{before:t.before,values:t.position}}function yf(t){return new ml(t.values||[],!!t.before)}function bf(t){return Gh[t]}function _f(t){return $h[t]}function wf(t){return{fieldPath:t.canonicalString()}}function If(t){return Cc.fromServerFormat(t.fieldPath)}function Tf(t){return ul.create(If(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return lc()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ef(t){switch(t.unaryFilter.op){case"IS_NAN":var e=If(t.unaryFilter.field);return ul.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=If(t.unaryFilter.field);return ul.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=If(t.unaryFilter.field);return ul.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=If(t.unaryFilter.field);return ul.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return lc()}}function Of(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Cf(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Sf(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Af(e)),e=kf(t.get(n),e);return Af(e)}function kf(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Af(t){return t+"\x01\x01"}function xf(t){var e=t.length;if(hc(e>=2),2===e)return hc("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Ec.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&lc(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:lc()}o=s+2}return new Ec(r)}var Nf=function(t,e){this.seconds=t,this.nanoseconds=e},jf=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};jf.store="owner",jf.key="owner";var Pf=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Pf.store="mutationQueues",Pf.keyPath="userId";var Rf=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Rf.store="mutations",Rf.keyPath="batchId",Rf.userMutationsIndex="userMutationsIndex",Rf.userMutationsKeyPath=["userId","batchId"];var Df=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Sf(e)]},t.key=function(t,e,n){return[t,Sf(e),n]},t}();Df.store="documentMutations",Df.PLACEHOLDER=new Df;var Mf=function(t,e){this.path=t,this.readTime=e},Lf=function(t,e){this.path=t,this.version=e},Ff=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Ff.store="remoteDocuments",Ff.readTimeIndex="readTimeIndex",Ff.readTimeIndexPath="readTime",Ff.collectionReadTimeIndex="collectionReadTimeIndex",Ff.collectionReadTimeIndexPath=["parentPath","readTime"];var Uf=function(t){this.byteSize=t};Uf.store="remoteDocumentGlobal",Uf.key="remoteDocumentGlobalKey";var Vf=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Vf.store="targets",Vf.keyPath="targetId",Vf.queryTargetsIndexName="queryTargetsIndex",Vf.queryTargetsKeyPath=["canonicalId","targetId"];var qf=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};qf.store="targetDocuments",qf.keyPath=["targetId","path"],qf.documentTargetsIndex="documentTargetsIndex",qf.documentTargetsKeyPath=["path","targetId"];var Bf=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Bf.key="targetGlobalKey",Bf.store="targetGlobal";var Hf=function(t,e){this.collectionId=t,this.parent=e};Hf.store="collectionParents",Hf.keyPath=["collectionId","parent"];var zf=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};zf.store="clientMetadata",zf.keyPath="clientId";var Kf=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Kf.store="bundles",Kf.keyPath="bundleId";var Wf=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Wf.store="namedQueries",Wf.keyPath="name";var Gf=Object(tc.__spreadArray)(Object(tc.__spreadArray)([],Object(tc.__spreadArray)(Object(tc.__spreadArray)([],Object(tc.__spreadArray)(Object(tc.__spreadArray)([],Object(tc.__spreadArray)(Object(tc.__spreadArray)([],[Pf.store,Rf.store,Df.store,Ff.store,Vf.store,jf.store,Bf.store,qf.store]),[zf.store])),[Uf.store])),[Hf.store])),[Kf.store,Wf.store]),$f="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Qf=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Yf=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Xf=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&lc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Jf=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Yf,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new ed(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=sd(e.target.error);n.ft.reject(new ed(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ed(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(sc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new rd(e)},t}(),Zf=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(Yi.getUA)())&&ac("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return sc("SimpleDb","Removing database:",t),id(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(Yi.getUA)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(sc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new ed(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new rc(nc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new ed(t,n))},i.onupgradeneeded=function(t){sc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){sc("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(tc.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(tc.__generator)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(tc.__generator)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Jf.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Xf.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return sc("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),td=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return id(this.Pt.delete())},t}(),ed=function(t){function e(e,n){var r=this;return(r=t.call(this,nc.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(tc.__extends)(e,t),e}(rc);function nd(t){return"IndexedDbTransactionError"===t.name}var rd=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(sc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(sc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),id(n)},t.prototype.add=function(t){return sc("SimpleDb","ADD",this.store.name,t,t),id(this.store.add(t))},t.prototype.get=function(t){var e=this;return id(this.store.get(t)).next(function(n){return void 0===n&&(n=null),sc("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return sc("SimpleDb","DELETE",this.store.name,t),id(this.store.delete(t))},t.prototype.count=function(){return sc("SimpleDb","COUNT",this.store.name),id(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){sc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Xf(function(n,r){e.onerror=function(t){var e=sd(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Xf(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new td(i),s=e(i.primaryKey,i.value,o);if(s instanceof Xf){var a=s.catch(function(t){return o.done(),Xf.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Xf.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function id(t){return new Xf(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=sd(t.target.error);n(e)}})}var od=!1;function sd(t){var e=Zf._t(Object(Yi.getUA)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new rc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return od||(od=!0,setTimeout(function(){throw r},0)),r}}return t}var ad=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(tc.__extends)(e,t),e}(Qf);function ud(t,e){var n=fc(t);return Zf.It(n.Mt,e)}var cd=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&sh(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&ah(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&ah(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(bc.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Dh())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&vc(this.mutations,t.mutations,function(t,e){return ch(t,e)})&&vc(this.baseMutations,t.baseMutations,function(t,e){return ch(t,e)})},t}(),ld=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){hc(e.mutations.length===r.length);for(var i=Ph(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),hd=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=bc.min()),void 0===o&&(o=bc.min()),void 0===s&&(s=kc.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),fd=function(t){this.Lt=t};function dd(t,e){if(e.document)return lf(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Uc.fromSegments(e.noDocument.path),r=yd(e.noDocument.readTime),i=nl.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Uc.fromSegments(e.unknownDocument.path);return r=yd(e.unknownDocument.version),nl.newUnknownDocument(o,r)}return lc()}function pd(t,e,n){var r=gd(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:nf(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Yh(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Ff(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=md(e.version);return s=e.hasCommittedMutations,new Ff(null,new Mf(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=md(e.version);return new Ff(new Lf(c,l),null,null,!0,r,i)}return lc()}function gd(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function vd(t){var e=new yc(t[0],t[1]);return bc.fromTimestamp(e)}function md(t){var e=t.toTimestamp();return new Nf(e.seconds,e.nanoseconds)}function yd(t){var e=new yc(t.seconds,t.nanoseconds);return bc.fromTimestamp(e)}function bd(t,e){for(var n=(e.baseMutations||[]).map(function(e){return ff(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return ff(t.Lt,e)}),o=yc.fromMillis(e.localWriteTimeMs);return new cd(e.batchId,o,n,i)}function _d(t){var e,n,r=yd(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?yd(t.lastLimboFreeSnapshotVersion):bc.min();return void 0!==t.query.documents?(hc(1===(n=t.query).documents.length),e=jl(Ol(sf(n.documents[0])))):e=function(t){return jl(gf(t))}(t.query),new hd(e,t.targetId,0,t.lastListenSequenceNumber,r,i,kc.fromBase64String(t.resumeToken))}function wd(t,e){var n,r=md(e.snapshotVersion),i=md(e.lastLimboFreeSnapshotVersion);n=al(e.target)?df(t.Lt,e.target):pf(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Vf(e.targetId,ol(e.target),r,o,e.sequenceNumber,i,n)}function Id(t){var e=gf({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Pl(e,e.limit,"L"):e}var Td=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Ed(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:yd(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Ed(t).put({bundleId:(n=e).id,createTime:md(Zh(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Od(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Id(e.bundledQuery),readTime:yd(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Od(t).put(function(t){return{name:t.name,readTime:md(Zh(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Ed(t){return ud(t,Kf.store)}function Od(t){return ud(t,Wf.store)}var Cd=function(){function t(){this.Bt=new Sd}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Xf.resolve()},t.prototype.getCollectionParents=function(t,e){return Xf.resolve(this.Bt.getEntries(e))},t}(),Sd=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ch(Ec.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ch(Ec.comparator)).toArray()},t}(),kd=function(){function t(){this.qt=new Sd}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Sf(i)};return Ad(t).put(o)}return Xf.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[mc(e),""],!1,!0);return Ad(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(xf(o.parent))}return n})},t}();function Ad(t){return ud(t,Hf.store)}var xd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nd=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function jd(t,e,n){var r=t.store(Rf.store),i=t.store(Df.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){hc(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Df.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Xf.waitFor(o).next(function(){return c})}function Pd(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw lc();e=t.noDocument}return JSON.stringify(e).length}Nd.DEFAULT_COLLECTION_PERCENTILE=10,Nd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nd.DEFAULT=new Nd(41943040,Nd.DEFAULT_COLLECTION_PERCENTILE,Nd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nd.DISABLED=new Nd(-1,0,0);var Rd=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return hc(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Md(t).$t({index:Rf.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Ld(t),s=Md(t);return s.add({}).next(function(a){hc("number"==typeof a);for(var u=new cd(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return hf(t.Lt,e)}),i=n.mutations.map(function(e){return hf(t.Lt,e)});return new Rf(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Ch(function(t,e){return gc(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=Df.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Df.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),Xf.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Md(t).get(e).next(function(t){return t?(hc(t.userId===n.userId),bd(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Xf.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Md(t).$t({index:Rf.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(hc(e.batchId>=r),o=bd(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Md(t).$t({index:Rf.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Md(t).Nt(Rf.userMutationsIndex,n).next(function(t){return t.map(function(t){return bd(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Df.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Ld(t).$t({range:i},function(r,i,s){var a=r[0],u=r[2],c=xf(r[1]);if(a===n.userId&&e.path.isEqual(c))return Md(t).get(u).next(function(t){if(!t)throw lc();hc(t.userId===n.userId),o.push(bd(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ch(gc),i=[];return e.forEach(function(e){var o=Df.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Ld(t).$t({range:s},function(t,i,o){var s=t[0],a=t[2],u=xf(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Xf.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Df.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ch(gc);return Ld(t).$t({range:s},function(t,e,o){var s=t[0],u=t[2],c=xf(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Md(t).get(e).next(function(t){if(null===t)throw lc();hc(t.userId===n.userId),r.push(bd(n.R,t))}))}),Xf.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return jd(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Xf.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Xf.resolve();var r=IDBKeyRange.lowerBound(Df.prefixForUser(e.userId)),i=[];return Ld(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=xf(t[1]);i.push(o)}else r.done()}).next(function(){hc(0===i.length)})})},t.prototype.containsKey=function(t,e){return Dd(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Fd(t).get(this.userId).next(function(t){return t||new Pf(e.userId,-1,"")})},t}();function Dd(t,e,n){var r=Df.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ld(t).$t({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Md(t){return ud(t,Rf.store)}function Ld(t){return ud(t,Df.store)}function Fd(t){return ud(t,Pf.store)}var Ud=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Vd=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Ud(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return bc.fromTimestamp(new yc(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return qd(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return hc(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return qd(t).$t(function(s,a){var u=_d(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Xf.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return qd(t).$t(function(t,n){var r=_d(n);e(r)})},t.prototype.Xt=function(t){return Bd(t).get(Bf.key).next(function(t){return hc(null!==t),t})},t.prototype.Zt=function(t,e){return Bd(t).put(Bf.key,e)},t.prototype.te=function(t,e){return qd(t).put(wd(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=ol(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return qd(t).$t({range:r,index:Vf.queryTargetsIndexName},function(t,n,r){var o=_d(n);sl(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Hd(t);return e.forEach(function(e){var s=Sf(e.path);i.push(o.put(new qf(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Xf.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Hd(t);return Xf.forEach(e,function(e){var o=Sf(e.path);return Xf.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Hd(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Hd(t),i=Dh();return r.$t({range:n,kt:!0},function(t,e,n){var r=xf(t[1]),o=new Uc(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Sf(e.path),r=IDBKeyRange.bound([n],[mc(n)],!1,!0),i=0;return Hd(t).$t({index:qf.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return qd(t).get(e).next(function(t){return t?_d(t):null})},t}();function qd(t){return ud(t,Vf.store)}function Bd(t){return ud(t,Bf.store)}function Hd(t){return ud(t,qf.store)}function zd(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){if(t.code!==nc.FAILED_PRECONDITION||t.message!==$f)throw t;return sc("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Kd(t,e){var n=t[1],r=e[1],i=gc(t[0],e[0]);return 0===i?gc(n,r):i}var Wd=function(){function t(t){this.ne=t,this.buffer=new Ch(Kd),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Kd(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Gd=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;sc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(tc.__awaiter)(e,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return nd(e=n.sent())?(sc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,zd(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),$d=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Xf.resolve(ec.o);var r=new Wd(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(sc("LruGarbageCollector","Garbage collection skipped; disabled"),Xf.resolve(xd)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(sc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),xd):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(sc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),oc()<=Xi.LogLevel.DEBUG&&sc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Xf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Qd=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new $d(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Yd(t,n)},t.prototype.removeReference=function(t,e,n){return Yd(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Yd(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Fd(t).Ot(function(r){return Dd(t,r,e).next(function(t){return t&&(n=!0),Xf.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Hd(t).delete([0,Sf(s.path)])})});i.push(u)}}).next(function(){return Xf.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Yd(t,e)},t.prototype.we=function(t,e){var n,r=Hd(t),i=ec.o;return r.$t({index:qf.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==ec.o&&e(new Uc(xf(n)),i),i=s,n=o):i=ec.o}).next(function(){i!==ec.o&&e(new Uc(xf(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Yd(t,e){return Hd(t).put(function(t,e){return new qf(0,Sf(t.path),e)}(e,t.currentSequenceNumber))}var Xd=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){wc(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Ic(this.inner)},t}(),Jd=function(){function t(){this.changes=new Xd(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:bc.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:nl.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Xf.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Zd=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return np(t).put(rp(e),n)},t.prototype.removeEntry=function(t,e){var n=np(t),r=rp(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return np(t).get(rp(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return np(t).get(rp(e)).next(function(t){return{document:n.ye(e,t),size:Pd(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=Ah();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=Ah(),i=new Th(Uc.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Pd(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Xf.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return np(t).$t({range:r},function(t,e,r){for(var s=Uc.fromSegments(t);o&&Uc.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Ah(),o=e.path.length+1,s={};if(n.isEqual(bc.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=gd(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Ff.collectionReadTimeIndex}return np(t).$t(s,function(t,n,s){if(t.length===o){var a=dd(r.R,n);e.path.isPrefixOf(a.key.path)?Ll(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new tp(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return ep(t).get(Uf.key).next(function(t){return hc(!!t),t})},t.prototype.me=function(t,e){return ep(t).put(Uf.key,e)},t.prototype.ye=function(t,e){if(e){var n=dd(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(bc.min()))return n}return nl.newInvalidDocument(t)},t}(),tp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Xd(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(tc.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Ch(function(t,e){return gc(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=pd(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Pd(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=pd(e.Ie.R,nl.newNoDocument(o,bc.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Xf.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Jd);function ep(t){return ud(t,Uf.store)}function np(t){return ud(t,Ff.store)}function rp(t){return t.path.toArray()}var ip=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;hc(n<r&&n>=0&&r<=11);var o=new Jf("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(jf.store)}(t),function(t){t.createObjectStore(Pf.store,{keyPath:Pf.keyPath}),t.createObjectStore(Rf.store,{keyPath:Rf.keyPath,autoIncrement:!0}).createIndex(Rf.userMutationsIndex,Rf.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Df.store)}(t),op(t),function(t){t.createObjectStore(Ff.store)}(t));var s=Xf.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(qf.store),t.deleteObjectStore(Vf.store),t.deleteObjectStore(Bf.store)}(t),op(t)),s=s.next(function(){return function(t){var e=t.store(Bf.store),n=new Bf(0,0,bc.min().toTimestamp(),0);return e.put(Bf.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Rf.store).Nt().next(function(n){t.deleteObjectStore(Rf.store),t.createObjectStore(Rf.store,{keyPath:Rf.keyPath,autoIncrement:!0}).createIndex(Rf.userMutationsIndex,Rf.userMutationsKeyPath,{unique:!0});var r=e.store(Rf.store),i=n.map(function(t){return r.put(t)});return Xf.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(zf.store,{keyPath:zf.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Uf.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Ff.store);e.createIndex(Ff.readTimeIndex,Ff.readTimeIndexPath,{unique:!1}),e.createIndex(Ff.collectionReadTimeIndex,Ff.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Kf.store,{keyPath:Kf.keyPath})}(t),function(t){t.createObjectStore(Wf.store,{keyPath:Wf.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(Ff.store).$t(function(t,n){e+=Pd(n)}).next(function(){var n=new Uf(e);return t.store(Uf.store).put(Uf.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(Pf.store),r=t.store(Rf.store);return n.Nt().next(function(n){return Xf.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Rf.userMutationsIndex,i).next(function(r){return Xf.forEach(r,function(r){hc(r.userId===n.userId);var i=bd(e.R,r);return jd(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(qf.store),n=t.store(Ff.store);return t.store(Bf.store).get(Bf.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new Ec(n),s=function(t){return[0,Sf(t)]}(o);r.push(e.get(s).next(function(n){return n?Xf.resolve():function(n){return e.put(new qf(0,Sf(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Xf.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Hf.store,{keyPath:Hf.keyPath});var n=e.store(Hf.store),r=new Sd,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Sf(i)})}};return e.store(Ff.store).$t({kt:!0},function(t,e){var n=new Ec(t);return i(n.popLast())}).next(function(){return e.store(Df.store).$t({kt:!0},function(t,e){var n=xf(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Vf.store);return n.$t(function(t,r){var i=_d(r),o=wd(e.R,i);return n.put(o)})},t}();function op(t){t.createObjectStore(qf.store,{keyPath:qf.keyPath}).createIndex(qf.documentTargetsIndex,qf.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Vf.store,{keyPath:Vf.keyPath}).createIndex(Vf.queryTargetsIndexName,Vf.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Bf.store)}var sp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ap=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new rc(nc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Qd(this,i),this.Le=n+"main",this.R=new fd(u),this.Be=new Zf(this.Le,11,new ip(this.R)),this.qe=new Vd(this.referenceDelegate,this.R),this.Ut=new kd,this.Ue=function(t,e){return new Zd(t,e)}(this.R,this.Ut),this.Qe=new Td,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&ac("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new rc(nc.FAILED_PRECONDITION,sp);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new ec(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(tc.__awaiter)(e,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(tc.__awaiter)(e,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(tc.__awaiter)(e,void 0,void 0,function(){return Object(tc.__generator)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return cp(e).put(new zf(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(nd(e))return sc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return sc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return up(t).get(jf.key).next(function(t){return Xf.resolve(e.tn(t))})},t.prototype.en=function(t){return cp(t).delete(this.clientId)},t.prototype.nn=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=ud(t,zf.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Xf.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Xf.resolve(!0):up(t).get(jf.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new rc(nc.FAILED_PRECONDITION,sp);return!1}}return!(!e.networkEnabled||!e.inForeground)||cp(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&sc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t=this;return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[jf.store,zf.store],function(e){var n=new ad(e,ec.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return cp(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Rd.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return sc("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Gf,function(o){return r=new ad(o,i.Ne?i.Ne.next():ec.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw ac("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new rc(nc.FAILED_PRECONDITION,$f);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return up(t).get(jf.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new rc(nc.FAILED_PRECONDITION,sp)})},t.prototype.Ze=function(t){var e=new jf(this.clientId,this.allowTabSynchronization,Date.now());return up(t).put(jf.key,e)},t.yt=function(){return Zf.yt()},t.prototype.Xe=function(t){var e=this,n=up(t);return n.get(jf.key).next(function(t){return e.tn(t)?(sc("IndexedDbPersistence","Releasing primary lease."),n.delete(jf.key)):Xf.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(ac("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return sc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return ac("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){ac("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function up(t){return ud(t,jf.store)}function cp(t){return ud(t,zf.store)}function lp(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var hp=function(t,e){this.progress=t,this.wn=e},fp=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Uc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):xl(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Uc(e)).next(function(t){var e=Nh();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Nh();return this.Ut.getCollectionParents(t,i).next(function(s){return Xf.forEach(s,function(s){var a=function(t,e){return new Tl(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=nl.newInvalidDocument(c),r=r.insert(c,l)),ah(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Ll(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Dh(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof fh&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),dp=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Dh(),i=Dh(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),pp=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(bc.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(Cl(e)||Sl(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(oc()<=Xi.LogLevel.DEBUG&&sc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ml(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Ch(Fl(t));return e.forEach(function(e,r){Ll(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return oc()<=Xi.LogLevel.DEBUG&&sc("QueryEngine","Using full collection scan to execute query:",Ml(e)),this.Sn.getDocumentsMatchingQuery(t,e,bc.min())},t}(),gp=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Th(gc),this.kn=new Xd(function(t){return ol(t)},sl),this.$n=bc.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new fp(this.On,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function vp(t,e,n,r){return new gp(t,e,n,r)}function mp(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(tc.__generator)(this,function(s){switch(s.label){case 0:return n=fc(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new fp(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=Dh(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,v=p.mutations;g<v.length;g++)s=s.add(v[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function yp(t,e){var n=fc(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Xf.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);hc(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function bp(t){var e=fc(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function _p(t,e){var n=fc(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return hc(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=Ah();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(wp(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(bc.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Xf.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function wp(t,e,n,r,i){var o=Dh();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Ah();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(bc.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):sc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Ip(t,e){var n=fc(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function Tp(t,e){var n=fc(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Xf.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new hd(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Ep(t,e,n){return Object(tc.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return Object(tc.__generator)(this,function(a){switch(a.label){case 0:r=fc(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!nd(s=a.sent()))throw s;return sc("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Op(t,e,n){var r=fc(t),i=bc.min(),o=Dh();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=fc(t),i=r.kn.get(n);return void 0!==i?Xf.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,jl(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:bc.min(),n?o:Dh())}).next(function(t){return{documents:t,Bn:o}})})}function Cp(t,e){var n=fc(t),r=fc(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Sp(t){var e=fc(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=fc(t),i=Ah(),o=gd(n),s=np(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:Ff.readTimeIndex,range:a},function(t,e){var n=dd(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:vd(o)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function kp(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){return[2,(e=fc(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=np(t),n=bc.min();return e.$t({index:Ff.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=vd(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function Ap(t,e,n,r){return Object(tc.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(tc.__generator)(this,function(p){switch(p.label){case 0:for(i=fc(t),o=Dh(),s=Ah(),a=Ph(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,Tp(i,function(t){return jl(Ol(Ec.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return wp(t,f,s,bc.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function xp(t,e,n){return void 0===n&&(n=Dh()),Object(tc.__awaiter)(this,void 0,void 0,function(){var r,i;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:return[4,Tp(t,jl(Id(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=fc(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Zh(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(kc.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var Np=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Xf.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Zh(n.createTime)}),Xf.resolve()},t.prototype.getNamedQuery=function(t,e){return Xf.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Id(t.bundledQuery),readTime:Zh(t.readTime)}}(e)),Xf.resolve()},t}(),jp=function(){function t(){this.Wn=new Ch(Pp.Gn),this.zn=new Ch(Pp.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Pp(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new Pp(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Uc(new Ec([])),r=new Pp(n,t),i=new Pp(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Uc(new Ec([])),n=new Pp(e,t),r=new Pp(e,t+1),i=Dh();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Pp(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Pp=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Uc.comparator(t.key,e.key)||gc(t.ns,e.ns)},t.Hn=function(t,e){return gc(t.ns,e.ns)||Uc.comparator(t.key,e.key)},t}(),Rp=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Ch(Pp.Gn)}return t.prototype.checkEmpty=function(t){return Xf.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new cd(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Pp(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Xf.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Xf.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Xf.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Xf.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Xf.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Pp(e,0),i=new Pp(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Xf.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ch(gc);return e.forEach(function(t){var e=new Pp(t,0),i=new Pp(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Xf.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Uc.isDocumentKey(i)||(i=i.child(""));var o=new Pp(new Uc(i),0),s=new Ch(gc);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Xf.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;hc(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Xf.forEach(e.mutations,function(i){var o=new Pp(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Pp(e,0),r=this.rs.firstAfterOrEqual(n);return Xf.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Xf.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Dp=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Th(Uc.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Xf.resolve(n?n.document.clone():nl.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Ah();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():nl.newInvalidDocument(t))}),Xf.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Ah(),i=new Uc(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||Ll(e,u)&&(r=r.insert(u.key,u.clone()))}return Xf.resolve(r)},t.prototype.fs=function(t,e){return Xf.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Mp(this)},t.prototype.getSize=function(t){return Xf.resolve(this.size)},t}(),Mp=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(tc.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Xf.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Jd),Lp=function(){function t(t){this.persistence=t,this.ds=new Xd(function(t){return ol(t)},sl),this.lastRemoteSnapshotVersion=bc.min(),this.highestTargetId=0,this.ws=0,this._s=new jp,this.targetCount=0,this.ys=Ud.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Xf.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Xf.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Xf.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Xf.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Xf.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Ud(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Xf.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Xf.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Xf.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Xf.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Xf.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Xf.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Xf.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Xf.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Xf.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Xf.resolve(n)},t.prototype.containsKey=function(t,e){return Xf.resolve(this._s.containsKey(e))},t}(),Fp=function(){function t(t,e){var n=this;this.gs={},this.Ne=new ec(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Lp(this),this.Ut=new Cd,this.Ue=function(t,e){return new Dp(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new fd(e),this.Qe=new Np(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Rp(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;sc("MemoryPersistence","Starting transaction:",t);var i=new Up(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Xf.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Up=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(tc.__extends)(e,t),e}(Qf),Vp=function(){function t(t){this.persistence=t,this.As=new jp,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw lc()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Xf.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Xf.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Xf.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xf.forEach(this.vs,function(r){var i=Uc.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Xf.or([function(){return Xf.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),qp=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Bp(t,e){return"firestore_clients_"+t+"_"+e}function Hp(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function zp(t,e){return"firestore_targets_"+t+"_"+e}qp.UNAUTHENTICATED=new qp(null),qp.GOOGLE_CREDENTIALS=new qp("google-credentials-uid"),qp.FIRST_PARTY=new qp("first-party-uid");var Kp=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new rc(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(ac("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Wp=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new rc(i.error.code,i.error.message)),o?new t(e,i.state,r):(ac("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Gp=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Lh(),s=0;i&&s<r.activeTargetIds.length;++s)i=Fc(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(ac("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),$p=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(ac("SharedClientState","Failed to parse online state: "+e),null)},t}(),Qp=function(){function t(){this.activeTargetIds=Lh()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Yp=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Th(gc),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Bp(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Qp),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(tc.__generator)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Bp(this.persistenceKey,r)))&&(o=Gp.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(zp(this.persistenceKey,t));if(n){var r=Wp.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(zp(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return sc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){sc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){sc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(sc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void ac("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(tc.__awaiter)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(tc.__generator)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=ec.o;if(null!=t)try{var n=JSON.parse(t);hc("number"==typeof n),e=n}catch(t){ac("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ec.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Kp(this.currentUser,t,e,n),i=Hp(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Hp(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=zp(this.persistenceKey,t),i=new Wp(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Gp.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Kp.Vs(new qp(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Wp.Vs(r,e)},t.prototype.js=function(t){return $p.Vs(t)},t.prototype.ii=function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(sc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Lh();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Xp=function(){function t(){this.li=new Qp,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Qp,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Jp=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Zp=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){sc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){sc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),tg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},eg=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),ng=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(tc.__extends)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Zu;s.listenOnce(Yu.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Qu.NO_ERROR:var e=s.getResponseJson();sc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Qu.TIMEOUT:sc("Connection",'RPC "'+t+'" timed out'),o(new rc(nc.DEADLINE_EXCEEDED,"Request time out"));break;case Qu.HTTP_ERROR:var n=s.getStatus();if(sc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(nc).indexOf(e)>=0?e:nc.UNKNOWN}(r.status);o(new rc(a,r.message))}else o(new rc(nc.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new rc(nc.UNAVAILABLE,"Connection failed."));break;default:lc()}}finally{sc("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new zu,i=Gs(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(Yi.isMobileCordova)()||Object(Yi.isReactNative)()||Object(Yi.isElectron)()||Object(Yi.isIE)()||Object(Yi.isUWP)()||Object(Yi.isBrowserExtension)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");sc("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new eg({Ei:function(t){c?sc("Connection","Not sending because WebChannel is closed:",t):(u||(sc("Connection","Opening WebChannel transport."),a.open(),u=!0),sc("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Ju.EventType.OPEN,function(){c||sc("Connection","WebChannel transport opened.")}),h(a,Ju.EventType.CLOSE,function(){c||(c=!0,sc("Connection","WebChannel transport closed"),l.Vi())}),h(a,Ju.EventType.ERROR,function(t){c||(c=!0,uc("Connection","WebChannel transport errored:",t),l.Vi(new rc(nc.UNAVAILABLE,"The operation could not be completed")))}),h(a,Ju.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];hc(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){sc("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=vh[t];if(void 0!==e)return Ih(e)}(i),s=r.message;void 0===o&&(o=nc.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new rc(o,s)),a.close()}else sc("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Xu.STAT_EVENT,function(t){10===t.stat?sc("Connection","Detected buffering proxy"):11===t.stat&&sc("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);sc("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return sc("RestConnection","Received: ",t),t},function(e){throw uc("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.3",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+tg[t]},t}());function rg(){return"undefined"!=typeof window?window:null}function ig(){return"undefined"!=typeof document?document:null}function og(t){return new Qh(t,!0)}var sg=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&sc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),ag=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new sg(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===nc.RESOURCE_EXHAUSTED?(ac(e.toString()),ac("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===nc.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new rc(nc.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(tc.__awaiter)(t,void 0,void 0,function(){return Object(tc.__generator)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return sc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(sc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),ug=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(tc.__extends)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:lc()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(hc(void 0===e||"string"==typeof e),kc.fromBase64String(e||"")):(hc(void 0===e||e instanceof Uint8Array),kc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?nc.UNKNOWN:Ih(t.code);return new rc(e,t.message||"")}(a);n=new Bh(r,i,o,s||null)}else if("documentChange"in e){i=rf(t,(r=e.documentChange).document.name),o=Zh(r.document.updateTime);var a=new tl({mapValue:{fields:r.document.fields}}),u=(s=nl.newFoundDocument(i,o,a),r.targetIds||[]);n=new Vh(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=rf(t,(r=e.documentDelete).document),o=r.readTime?Zh(r.readTime):bc.min(),a=nl.newNoDocument(i,o),n=new Vh([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=rf(t,(r=e.documentRemove).document),n=new Vh([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return lc();var c=e.filter;i=new _h(r=c.count||0),n=new qh(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return bc.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?bc.min():e.readTime?Zh(e.readTime):bc.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=af(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=al(r)?{documents:df(t,r)}:{query:pf(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Xh(t,e.resumeToken):e.snapshotVersion.compareTo(bc.min())>0&&(n.readTime=Yh(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lc()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=af(this.R),e.removeTarget=t,this.cr(e)},e}(ag),cg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(tc.__extends)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(hc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(hc(void 0!==e),t.map(function(t){return function(t,e){var n=Zh(t.updateTime?t.updateTime:e);return n.isEqual(bc.min())&&(n=Zh(e)),new nh(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Zh(t.commitTime);return this.listener.Tr(n,e)}return hc(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=af(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return hf(e.R,t)})};this.cr(n)},e}(ag),lg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(tc.__extends)(e,t),e.prototype.br=function(){if(this.Rr)throw new rc(nc.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===nc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new rc(nc.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===nc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new rc(nc.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),hg=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(ac(e),this.Vr=!1):sc("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),fg=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(tc.__awaiter)(o,void 0,void 0,function(){return Object(tc.__generator)(this,function(t){switch(t.label){case 0:return wg(this)?(sc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return(e=fc(t)).Or.add(4),[4,pg(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,dg(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new hg(n,r)};function dg(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:if(!wg(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function pg(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function gg(t,e){var n=fc(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),_g(n)?bg(n):Mg(n).er()&&mg(n,e))}function vg(t,e){var n=fc(t),r=Mg(n);n.$r.delete(e),r.er()&&yg(n,e),0===n.$r.size&&(r.er()?r.ir():wg(n)&&n.Br.set("Unknown"))}function mg(t,e){t.qr.U(e.targetId),Mg(t).mr(e)}function yg(t,e){t.qr.U(e),Mg(t).yr(e)}function bg(t){t.qr=new zh({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Mg(t).start(),t.Br.Sr()}function _g(t){return wg(t)&&!Mg(t).tr()&&t.$r.size>0}function wg(t){return 0===fc(t).Or.size}function Ig(t){t.qr=void 0}function Tg(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){return t.$r.forEach(function(e,n){mg(t,e)}),[2]})})}function Eg(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(n){return Ig(t),_g(t)?(t.Br.Nr(e),bg(t)):t.Br.set("Unknown"),[2]})})}function Og(t,e,n){return Object(tc.__awaiter)(this,void 0,void 0,function(){var r,i,o;return Object(tc.__generator)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Bh&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(tc.__generator)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),sc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Cg(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Vh?t.qr.X(e):e instanceof qh?t.qr.rt(e):t.qr.et(e),n.isEqual(bc.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,bp(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(kc.EMPTY_BYTE_STRING,n.snapshotVersion)),yg(t,e);var r=new hd(n.target,e,1,n.sequenceNumber);mg(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return sc("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Cg(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Cg(t,e,n){return Object(tc.__awaiter)(this,void 0,void 0,function(){var r=this;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:if(!nd(e))throw e;return t.Or.add(1),[4,pg(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return bp(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(tc.__awaiter)(r,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return sc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,dg(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Sg(t,e){return e().catch(function(n){return Cg(t,n,e)})}function kg(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(tc.__generator)(this,function(s){switch(s.label){case 0:e=fc(t),n=Lg(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return wg(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Ip(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Lg(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Cg(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Ag(e)&&xg(e),[2]}})})}function Ag(t){return wg(t)&&!Lg(t).tr()&&t.kr.length>0}function xg(t){Lg(t).start()}function Ng(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){return Lg(t).Ar(),[2]})})}function jg(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(tc.__generator)(this,function(i){for(e=Lg(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function Pg(t,e,n){return Object(tc.__awaiter)(this,void 0,void 0,function(){var r,i;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=ld.from(r,e,n),[4,Sg(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,kg(t)];case 2:return o.sent(),[2]}})})}function Rg(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return e&&Lg(t).pr?[4,function(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return wh(r=e.code)&&r!==nc.ABORTED?(n=t.kr.shift(),Lg(t).sr(),[4,Sg(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,kg(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Ag(t)&&xg(t),[2]}})})}function Dg(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return n=fc(t),e?(n.Or.delete(2),[4,dg(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,pg(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Mg(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=fc(t);return r.br(),new ug(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Tg.bind(null,t),Ri:Eg.bind(null,t),_r:Og.bind(null,t)}),t.Mr.push(function(n){return Object(tc.__awaiter)(e,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),_g(t)?bg(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Ig(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Lg(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=fc(t);return r.br(),new cg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Ng.bind(null,t),Ri:Rg.bind(null,t),Ir:jg.bind(null,t),Tr:Pg.bind(null,t)}),t.Mr.push(function(n){return Object(tc.__awaiter)(e,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,kg(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(sc("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var Fg=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Yf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new rc(nc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Ug(t,e){if(ac("AsyncQueue",e+": "+t),nd(t))return new rc(nc.UNAVAILABLE,e+": "+t);throw t}var Vg=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Uc.comparator(e.key,n.key)}:function(t,e){return Uc.comparator(t.key,e.key)},this.keyedMap=Nh(),this.sortedSet=new Th(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),qg=function(){function t(){this.Kr=new Th(Uc.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):lc():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Bg=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Vg.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Rl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Hg=function(){this.Wr=void 0,this.listeners=[]},zg=function(){this.queries=new Xd(function(t){return Dl(t)},Rl),this.onlineState="Unknown",this.Gr=new Set};function Kg(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(tc.__generator)(this,function(c){switch(c.label){case 0:if(n=fc(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Hg),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Ug(a,"Initialization of query '"+Ml(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Qg(n),[2]}})})}function Wg(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(tc.__generator)(this,function(a){return n=fc(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Gg(t,e){for(var n=fc(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Qg(n)}function $g(t,e,n){var r=fc(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Qg(t){t.Gr.forEach(function(t){t.next()})}var Yg=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Bg(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Bg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Xg=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Jg=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return rf(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?lf(this.R,t.document,!1):nl.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Zh(t)},t}(),Zg=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=tv(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Jg(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Dh()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:return[4,Ap(this.localStore,new Jg(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,xp(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new hp(Object.assign({},this.progress),t))]}})})},t}();function tv(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var ev=function(t){this.key=t},nv=function(t){this.key=t},rv=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Dh(),this.mutatedKeys=Dh(),this.lo=Fl(t),this.fo=new Vg(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new qg,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Cl(this.query)&&i.size===this.query.limit?i.last():null,c=Sl(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Ll(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Cl(this.query)||Sl(this.query))for(;s.size>this.query.limit;){var l=Cl(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lc()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Bg(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new qg,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Dh(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new nv(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new ev(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Dh();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Bg.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),iv=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ov=function(t){this.key=t,this.bo=!1},sv=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Xd(function(t){return Dl(t)},Rl),this.Vo=new Map,this.So=new Set,this.Do=new Th(Uc.comparator),this.Co=new Map,this.No=new jp,this.xo={},this.Fo=new Map,this.ko=Ud.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function av(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(tc.__generator)(this,function(a){switch(a.label){case 0:return n=Mv(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Tp(n.localStore,jl(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,uv(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&gg(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function uv(t,e,n,r){return Object(tc.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(tc.__generator)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return Object(tc.__awaiter)(this,void 0,void 0,function(){var i,o,s;return Object(tc.__generator)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Op(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(wv(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,Op(t.localStore,e,!0)];case 1:return i=l.sent(),o=new rv(e,i.Bn),s=o._o(i.documents),a=Uh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),wv(t,n,u.To),c=new iv(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function cv(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:return n=fc(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Rl(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Ep(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),vg(n.remoteStore,r.targetId),bv(n,r.targetId)}).catch(zd)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return bv(n,r.targetId),[4,Ep(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function lv(t,e,n){return Object(tc.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return Object(tc.__generator)(this,function(a){switch(a.label){case 0:r=Lv(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=fc(t),i=yc.now(),o=e.reduce(function(t,e){return t.add(e.key)},Dh());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=uh(c,n.get(c.key));null!=l&&s.push(new fh(c.key,l,el(l.value.mapValue),rh.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Th(gc)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Ev(r,i.changes)];case 3:return a.sent(),[4,kg(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Ug(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function hv(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:n=fc(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,_p(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(hc(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?hc(r.bo):t.removedDocuments.size>0&&(hc(r.bo),r.bo=!1))}),[4,Ev(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,zd(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function fv(t,e,n){var r=fc(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=fc(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&Qg(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function dv(t,e,n){return Object(tc.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(tc.__generator)(this,function(c){switch(c.label){case 0:return(r=fc(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Th(Uc.comparator)).insert(o,nl.newNoDocument(o,bc.min())),a=Dh().add(o),u=new Fh(bc.min(),new Map,new Ch(gc),s,a),[4,hv(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Tv(r),[3,4];case 2:return[4,Ep(r.localStore,e,!1).then(function(){return bv(r,e,n)}).catch(zd)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function pv(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:n=fc(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,yp(n.localStore,e)];case 2:return i=o.sent(),yv(n,r,null),mv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Ev(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,zd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function gv(t,e,n){return Object(tc.__awaiter)(this,void 0,void 0,function(){var r,i;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:r=fc(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=fc(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return hc(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),yv(r,e,n),mv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Ev(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,zd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function vv(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(tc.__generator)(this,function(a){switch(a.label){case 0:wg((n=fc(t)).remoteStore)||sc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=fc(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Ug(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function mv(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function yv(t,e,n){var r=fc(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function bv(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||_v(t,e)})}function _v(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(vg(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Tv(t))}function wv(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ev?(t.No.addReference(o.key,e),Iv(t,o)):o instanceof nv?(sc("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||_v(t,o.key)):lc()}}function Iv(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(sc("SyncEngine","New document in limbo: "+n),t.So.add(r),Tv(t))}function Tv(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Uc(Ec.fromString(e)),r=t.ko.next();t.Co.set(r,new ov(n)),t.Do=t.Do.insert(n,r),gg(t.remoteStore,new hd(jl(Ol(n.path)),r,2,ec.o))}}function Ev(t,e,n){return Object(tc.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return Object(tc.__generator)(this,function(a){switch(a.label){case 0:return r=fc(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=dp.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(tc.__generator)(this,function(l){switch(l.label){case 0:n=fc(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Xf.forEach(e,function(e){return Xf.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Xf.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!nd(r=l.sent()))throw r;return sc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Ov(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return(n=fc(t)).currentUser.isEqual(e)?[3,3]:(sc("SyncEngine","User change. New user:",e.toKey()),[4,mp(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new rc(nc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Ev(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Cv(t,e){var n=fc(t),r=n.Co.get(e);if(r&&r.bo)return Dh().add(r.key);var i=Dh(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function Sv(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:return[4,Op((n=fc(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&wv(n,e.targetId,i.To),i)]}})})}function kv(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){return[2,Sp((e=fc(t)).localStore).then(function(t){return Ev(e,t)})]})})}function Av(t,e,n,r){return Object(tc.__awaiter)(this,void 0,void 0,function(){var i,o;return Object(tc.__generator)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=fc(t),r=fc(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Xf.resolve(null)})})}((i=fc(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,kg(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(yv(i,e,r||null),mv(i,e),function(t,e){fc(fc(t)._n).Gt(e)}(i.localStore,e)):lc(),s.label=4;case 4:return[4,Ev(i,o)];case 5:return s.sent(),[3,7];case 6:sc("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function xv(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(tc.__generator)(this,function(c){switch(c.label){case 0:return Mv(n=fc(t)),Lv(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Nv(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,Dg(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)gg(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return bv(n,e),Ep(n.localStore,e,!0)}),vg(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Nv(n,a)];case 5:return c.sent(),function(t){var e=fc(t);e.Co.forEach(function(t,n){vg(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Th(Uc.comparator)}(n),n.$o=!1,[4,Dg(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Nv(t,e,n){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(tc.__generator)(this,function(g){switch(g.label){case 0:n=fc(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,Tp(n.localStore,jl(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,Sv(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Cp(n.localStore,a)];case 8:return p=g.sent(),[4,Tp(n.localStore,p)];case 9:return u=g.sent(),[4,uv(n,jv(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function jv(t){return El(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Pv(t){var e=fc(t);return fc(fc(e.localStore).persistence).fn()}function Rv(t,e,n,r){return Object(tc.__awaiter)(this,void 0,void 0,function(){var i,o,s;return Object(tc.__generator)(this,function(a){switch(a.label){case 0:return(i=fc(t)).$o?(sc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Sp(i.localStore)];case 3:return o=a.sent(),s=Fh.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Ev(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Ep(i.localStore,e,!0)];case 6:return a.sent(),bv(i,e,r),[3,8];case 7:lc(),a.label=8;case 8:return[2]}})})}function Dv(t,e,n){return Object(tc.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(tc.__generator)(this,function(f){switch(f.label){case 0:if(!(r=Mv(t)).$o)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(sc("SyncEngine","Adding an already active target "+s),[3,5]):[4,Cp(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,Tp(r.localStore,a)];case 3:return u=f.sent(),[4,uv(r,jv(a),u.targetId,!1)];case 4:f.sent(),gg(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Ep(r.localStore,t,!1).then(function(){vg(r.remoteStore,t),bv(r,t)}).catch(zd)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Mv(t){var e=fc(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Cv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dv.bind(null,e),e.vo._r=Gg.bind(null,e.eventManager),e.vo.Mo=$g.bind(null,e.eventManager),e}function Lv(t){var e=fc(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gv.bind(null,e),e}function Fv(t,e,n){var r=fc(t);(function(t,e,n){return Object(tc.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(tc.__generator)(this,function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=fc(t),r=Zh(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(t){return n.Qe.getBundleMetadata(t,e.id)}).then(function(t){return!!t&&t.createTime.compareTo(r)>=0})}(t.localStore,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n._updateProgress(tv(r)),i=new Zg(r,t.localStore,e.R),[4,e.Lo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(s=c.sent())&&n._updateProgress(s),[4,e.Lo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return a=c.sent(),[4,Ev(t,a.wn,void 0)];case 12:return c.sent(),[4,function(t,e){var n=fc(t);return n.persistence.runTransaction("Save bundle","readwrite",function(t){return n.Qe.saveBundleMetadata(t,e)})}(t.localStore,r)];case 13:return c.sent(),n._completeWith(a.progress),[3,15];case 14:return uc("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}})})})(r,e,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var Uv=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return this.R=og(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return vp(this.persistence,new pp,t.initialUser,this.R)},t.prototype.qo=function(t){return new Fp(Vp.bs,this.R)},t.prototype.Bo=function(t){return new Xp},t.prototype.terminate=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Vv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(tc.__extends)(e,t),e.prototype.initialize=function(e){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,kp(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Lv(this.Ko.syncEngine)];case 4:return n.sent(),[4,kg(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return vp(this.persistence,new pp,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Gd(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=lp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Nd.withCacheSize(this.cacheSizeBytes):Nd.DEFAULT;return new ap(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,rg(),ig(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Xp},e}(Uv),qv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(tc.__extends)(e,t),e.prototype.initialize=function(e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r=this;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Yp?(this.sharedClientState.syncEngine={ui:Av.bind(null,n),ai:Rv.bind(null,n),hi:Dv.bind(null,n),fn:Pv.bind(null,n),ci:kv.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(tc.__awaiter)(r,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return[4,xv(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=rg();if(!Yp.yt(e))throw new rc(nc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=lp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Yp(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Vv),Bv=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n=this;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return fv(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ov.bind(null,this.syncEngine),[4,Dg(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new zg},t.prototype.createDatastore=function(t){var e=og(t.databaseInfo.databaseId),n=new ng(t.databaseInfo);return function(t,e,n){return new lg(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return fv(s.syncEngine,t,0)},o=Zp.yt()?new Zp:new Jp,new fg(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new sv(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return e=fc(t),sc("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,pg(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}();function Hv(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var r;return Object(tc.__generator)(this,function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]})})},cancel:function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(t){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var zv=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Kv=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Yf,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t,e,n,r;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Xg(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})},t}(),Wv=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new rc(nc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(tc.__generator)(this,function(u){switch(u.label){case 0:return n=fc(t),r=af(n.R)+"/documents",i={documents:e.map(function(t){return nf(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){hc(!!e.found);var n=rf(t,e.found.name),r=Zh(e.found.updateTime),i=new tl({mapValue:{fields:e.found.fields}});return nl.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){hc(!!e.missing),hc(!!e.readTime);var n=rf(t,e.missing),r=Zh(e.readTime);return nl.newNoDocument(n,r)}(t,e):lc()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());hc(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new yh(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t,e=this;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Uc.fromPath(n);e.mutations.push(new bh(r,e.precondition(r)))}),[4,function(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:return n=fc(t),r=af(n.R)+"/documents",i={writes:e.map(function(t){return hf(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw lc();e=bc.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new rc(nc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?rh.updateTime(e):rh.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(bc.min()))throw new rc(nc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return rh.updateTime(e)}return rh.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),Gv=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new sg(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(tc.__awaiter)(t,void 0,void 0,function(){var t,e,n=this;return Object(tc.__generator)(this,function(r){return t=new Wv(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Mc(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!wh(e)}return!1},t}(),$v=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=qp.UNAUTHENTICATED,this.clientId=pc.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return Object(tc.__awaiter)(r,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return sc("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new rc(nc.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Yf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(tc.__awaiter)(t,void 0,void 0,function(){var t,n;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Ug(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Qv(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i=this;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),sc("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return Object(tc.__awaiter)(i,void 0,void 0,function(){return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,mp(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Yv(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Xv(t)];case 1:return n=i.sent(),sc("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return(n=fc(t)).asyncQueue.verifyOperationInProgress(),sc("RemoteStore","RemoteStore received new credentials"),r=wg(n),n.Or.add(3),[4,pg(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,dg(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function Xv(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(sc("FirestoreClient","Using default OfflineComponentProvider"),[4,Qv(t,new Uv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Jv(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(sc("FirestoreClient","Using default OnlineComponentProvider"),[4,Yv(t,new Bv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Zv(t){return Xv(t).then(function(t){return t.persistence})}function tm(t){return Xv(t).then(function(t){return t.localStore})}function em(t){return Jv(t).then(function(t){return t.remoteStore})}function nm(t){return Jv(t).then(function(t){return t.syncEngine})}function rm(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return[4,Jv(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=av.bind(null,e.syncEngine),n.onUnlisten=cv.bind(null,e.syncEngine),n)]}})})}function im(t,e,n){var r=this;void 0===n&&(n={});var i=new Yf;return t.asyncQueue.enqueueAndForget(function(){return Object(tc.__awaiter)(r,void 0,void 0,function(){var r;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new zv({next:function(o){e.enqueueAndForget(function(){return Wg(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new rc(nc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new rc(nc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Yg(Ol(n.path),o,{includeMetadataChanges:!0,so:!0});return Kg(t,s)},[4,rm(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function om(t,e,n){var r=this;void 0===n&&(n={});var i=new Yf;return t.asyncQueue.enqueueAndForget(function(){return Object(tc.__awaiter)(r,void 0,void 0,function(){var r;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new zv({next:function(n){e.enqueueAndForget(function(){return Wg(t,s)}),n.fromCache&&"server"===r.source?i.reject(new rc(nc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Yg(n,o,{includeMetadataChanges:!0,so:!0});return Kg(t,s)},[4,rm(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var sm=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},am=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),um=new Map,cm=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},lm=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(qp.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),hm=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),fm=function(){function t(t){var e=this;this.currentUser=qp.UNAUTHENTICATED,this.oc=new Yf,this.cc=0,this.changeListener=function(){return Promise.resolve()},this.uc=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.ac=function(){e.cc++,e.currentUser=e.hc(),e.oc.resolve(),e.uc&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){sc("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.lc(),e.auth.addAuthTokenListener(e.ac)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):e.uc&&(sc("FirebaseCredentialsProvider","Auth not yet detected"),e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)}))}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(sc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(hc("string"==typeof n.accessToken),new cm(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){this.uc=!0,this.asyncQueue=t,this.changeListener=e},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.ac),this.changeListener=function(){return Promise.resolve()}},t.prototype.hc=function(){var t=this.auth&&this.auth.getUid();return hc(null===t||"string"==typeof t),new qp(t)},t.prototype.lc=function(){var t=this;this.uc&&(this.uc=!1,this.asyncQueue.enqueueRetryable(function(){return Object(tc.__awaiter)(t,void 0,void 0,function(){return Object(tc.__generator)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,this.changeListener(this.currentUser)];case 2:return t.sent(),this.uc=!0,[2]}})})}))},t}(),dm=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n,this.type="FirstParty",this.user=qp.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.dc},e=this.fc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.wc&&(t["X-Goog-Iam-Authorization-Token"]=this.wc),t},enumerable:!1,configurable:!0}),t}(),pm=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n}return t.prototype.getToken=function(){return Promise.resolve(new dm(this.fc,this.dc,this.wc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(qp.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function gm(t,e,n){if(!n)throw new rc(nc.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function vm(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new rc(nc.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function mm(t,e,n,r){if(!0===e&&!0===r)throw new rc(nc.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function ym(t){if(!Uc.isDocumentKey(t))throw new rc(nc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function bm(t){if(Uc.isDocumentKey(t))throw new rc(nc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function _m(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":lc()}function wm(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new rc(nc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=_m(t);throw new rc(nc.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Im(t,e){if(e<=0)throw new rc(nc.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Tm=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new rc(nc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new rc(nc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,mm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Em=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tm({}),this._settingsFrozen=!1,t instanceof am?(this._databaseId=t,this._credentials=new lm):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new rc(nc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new am(t.options.projectId)}(t),this._credentials=new fm(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new rc(nc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new rc(nc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tm(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new lm;switch(t.type){case"gapi":var e=t.client;return hc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new pm(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new rc(nc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=um.get(this))&&(sc("ComponentProvider","Removing Datastore"),um.delete(this),t.terminate()),Promise.resolve();var t},t}(),Om=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Sm(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Cm=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Sm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Ol(r))||this)._path=r,i.type="collection",i}return Object(tc.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Om(this.firestore,null,new Uc(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Cm);function km(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Yi.getModularInstance)(t),gm("collection","path",e),t instanceof Em)return bm(n=Ec.fromString.apply(Ec,Object(tc.__spreadArray)([e],r))),new Sm(t,null,n);if(!(t instanceof Om||t instanceof Sm))throw new rc(nc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return bm(n=Ec.fromString.apply(Ec,Object(tc.__spreadArray)([t.path],r)).child(Ec.fromString(e))),new Sm(t.firestore,null,n)}function Am(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Yi.getModularInstance)(t),1===arguments.length&&(e=pc.u()),gm("doc","path",e),t instanceof Em)return ym(n=Ec.fromString.apply(Ec,Object(tc.__spreadArray)([e],r))),new Om(t,null,new Uc(n));if(!(t instanceof Om||t instanceof Sm))throw new rc(nc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ym(n=t._path.child(Ec.fromString.apply(Ec,Object(tc.__spreadArray)([e],r)))),new Om(t.firestore,t instanceof Sm?t.converter:null,new Uc(n))}function xm(t,e){return t=Object(Yi.getModularInstance)(t),e=Object(Yi.getModularInstance)(e),(t instanceof Om||t instanceof Sm)&&(e instanceof Om||e instanceof Sm)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Nm(t,e){return t=Object(Yi.getModularInstance)(t),e=Object(Yi.getModularInstance)(e),t instanceof Cm&&e instanceof Cm&&t.firestore===e.firestore&&Rl(t._query,e._query)&&t.converter===e.converter}var jm=function(){function t(){var t=this;this._c=Promise.resolve(),this.mc=[],this.yc=!1,this.gc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new sg(this,"async_queue_retry"),this.Ac=function(){var e=ig();e&&sc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=ig();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ac)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.yc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Rc(),this.bc(t)},t.prototype.enterRestrictedMode=function(){if(!this.yc){this.yc=!0;var t=ig();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ac)}},t.prototype.enqueue=function(t){return this.Rc(),this.yc?new Promise(function(t){}):this.bc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.mc.push(t),e.vc()})},t.prototype.vc=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t,e=this;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:if(0===this.mc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.mc[0]()];case 2:return n.sent(),this.mc.shift(),this.Zi.reset(),[3,4];case 3:if(!nd(t=n.sent()))throw t;return sc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.mc.length>0&&this.Zi.ji(function(){return e.vc()}),n.label=5;case 5:return[2]}})})},t.prototype.bc=function(t){var e=this,n=this._c.then(function(){return e.Tc=!0,t().catch(function(t){throw e.Ec=t,e.Tc=!1,ac("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.Tc=!1,t})});return this._c=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Rc(),this.Ic.indexOf(t)>-1&&(e=0);var i=Fg.createAndSchedule(this,t,e,n,function(t){return r.Pc(t)});return this.gc.push(i),i},t.prototype.Rc=function(){this.Ec&&lc()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Vc=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t;return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return[4,t=this._c];case 1:e.sent(),e.label=2;case 2:if(t!==this._c)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Sc=function(t){for(var e=0,n=this.gc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Dc=function(t){var e=this;return this.Vc().then(function(){e.gc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.gc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Vc()})},t.prototype.Cc=function(t){this.Ic.push(t)},t.prototype.Pc=function(t){var e=this.gc.indexOf(t);this.gc.splice(e,1)},t}();function Pm(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Rm=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Yf,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),Dm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new jm,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(tc.__extends)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Lm(this),this._firestoreClient.terminate()},e}(Em);function Mm(t){return t._firestoreClient||Lm(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Lm(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new sm(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new $v(t._credentials,t._queue,r)}function Fm(t,e,n){var r=this,i=new Yf;return t.asyncQueue.enqueue(function(){return Object(tc.__awaiter)(r,void 0,void 0,function(){var r;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Qv(t,n)];case 1:return o.sent(),[4,Yv(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===nc.FAILED_PRECONDITION||t.code===nc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Um(t){if(t._initialized||t._terminated)throw new rc(nc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Vm=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new rc(nc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cc(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),qm=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(kc.fromBase64String(e))}catch(e){throw new rc(nc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(kc.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Bm=function(t){this._methodName=t},Hm=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new rc(nc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new rc(nc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return gc(this._lat,t._lat)||gc(this._long,t._long)},t}(),zm=/^__.*__$/,Km=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new fh(t,this.data,this.fieldMask,e,this.fieldTransforms):new hh(t,this.data,e,this.fieldTransforms)},t}(),Wm=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new fh(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Gm(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lc()}}var $m=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Nc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"xc",{get:function(){return this.settings.xc},enumerable:!1,configurable:!0}),t.prototype.Fc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,$c:!1});return r.Oc(t),r},t.prototype.Mc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,$c:!1});return r.Nc(),r},t.prototype.Lc=function(t){return this.Fc({path:void 0,$c:!0})},t.prototype.Bc=function(t){return py(t,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Uc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Nc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Oc(this.path.get(t))},t.prototype.Oc=function(t){if(0===t.length)throw this.Bc("Document fields must not be empty");if(Gm(this.xc)&&zm.test(t))throw this.Bc('Document fields cannot begin and end with "__"')},t}(),Qm=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||og(t)}return t.prototype.Qc=function(t,e,n,r){return void 0===r&&(r=!1),new $m({xc:t,methodName:e,Uc:n,path:Cc.emptyPath(),$c:!1,qc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Ym(t){var e=t._freezeSettings(),n=og(t._databaseId);return new Qm(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Xm(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Qc(o.merge||o.mergeFields?2:0,e,n,i);ly("Data must be an object, but it was:",s,r);var a,u,c=uy(r,s);if(o.merge)a=new Sc(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=hy(e,f[h],n);if(!s.contains(d))throw new rc(nc.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");gy(l,d)||l.push(d)}a=new Sc(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new Km(new tl(c),a,u)}var Jm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(tc.__extends)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.xc)throw t.Bc(1===t.xc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Bm);function Zm(t,e,n){return new $m({xc:3,Uc:e.settings.Uc,methodName:t._methodName,$c:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var ty=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(tc.__extends)(e,t),e.prototype._toFieldTransform=function(t){return new eh(t.path,new Gl)},e.prototype.isEqual=function(t){return t instanceof e},e}(Bm),ey=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(tc.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=Zm(this,t,!0),n=this.Kc.map(function(t){return ay(t,e)}),r=new $l(n);return new eh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Bm),ny=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(tc.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=Zm(this,t,!0),n=this.Kc.map(function(t){return ay(t,e)}),r=new Yl(n);return new eh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Bm),ry=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(tc.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=new Jl(t.R,Bl(t.R,this.jc));return new eh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Bm);function iy(t,e,n,r){var i=t.Qc(1,e,n);ly("Data must be an object, but it was:",i,r);var o=[],s=tl.empty();wc(r,function(t,r){var a=dy(e,t,n);r=Object(Yi.getModularInstance)(r);var u=i.Mc(a);if(r instanceof Jm)o.push(a);else{var c=ay(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Sc(o);return new Wm(s,a,i.fieldTransforms)}function oy(t,e,n,r,i,o){var s=t.Qc(1,e,n),a=[hy(e,r,n)],u=[i];if(o.length%2!=0)throw new rc(nc.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(hy(e,o[c])),u.push(o[c+1]);for(var l=[],h=tl.empty(),f=a.length-1;f>=0;--f)if(!gy(l,a[f])){var d=a[f],p=u[f];p=Object(Yi.getModularInstance)(p);var g=s.Mc(d);if(p instanceof Jm)l.push(d);else{var v=ay(p,g);null!=v&&(l.push(d),h.set(d,v))}}var m=new Sc(l);return new Wm(h,m,s.fieldTransforms)}function sy(t,e,n,r){return void 0===r&&(r=!1),ay(n,t.Qc(r?4:3,e))}function ay(t,e){if(cy(t=Object(Yi.getModularInstance)(t)))return ly("Unsupported field value:",e,t),uy(t,e);if(t instanceof Bm)return function(t,e){if(!Gm(e.xc))throw e.Bc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Bc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.$c&&4!==e.xc)throw e.Bc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=ay(o[i],e.Lc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(Yi.getModularInstance)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Bl(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=yc.fromDate(t);return{timestampValue:Yh(e.R,n)}}if(t instanceof yc)return n=new yc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Yh(e.R,n)};if(t instanceof Hm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof qm)return{bytesValue:Xh(e.R,t._byteString)};if(t instanceof Om){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Bc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:tf(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Bc("Unsupported field value: "+_m(t))}(t,e)}function uy(t,e){var n={};return Ic(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wc(t,function(t,r){var i=ay(r,e.kc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function cy(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof yc||t instanceof Hm||t instanceof qm||t instanceof Om||t instanceof Bm)}function ly(t,e,n){if(!cy(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=_m(n);throw e.Bc("an object"===r?t+" a custom object":t+" "+r)}}function hy(t,e,n){if((e=Object(Yi.getModularInstance)(e))instanceof Vm)return e._internalPath;if("string"==typeof e)return dy(t,e);throw py("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var fy=new RegExp("[~\\*/\\[\\]]");function dy(t,e,n){if(e.search(fy)>=0)throw py("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Vm.bind.apply(Vm,Object(tc.__spreadArray)([void 0],e.split(".")))))._internalPath}catch(r){throw py("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function py(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new rc(nc.INVALID_ARGUMENT,(a+=". ")+t+u)}function gy(t,e){return t.some(function(t){return t.isEqual(e)})}var vy=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Om(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new my(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(yy("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),my=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(tc.__extends)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(vy);function yy(t,e){return"string"==typeof e?dy(t,e):e instanceof Vm?e._internalPath:e._delegate._internalPath}var by=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),_y=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(tc.__extends)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new wy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(yy("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(vy),wy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(tc.__extends)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(_y),Iy=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new by(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new wy(n._firestore,n._userDataWriter,r.key,r,new by(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new rc(nc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new wy(t._firestore,t._userDataWriter,e.doc.key,e.doc,new by(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new wy(t._firestore,t._userDataWriter,e.doc.key,e.doc,new by(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Ty(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Ty(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lc()}}function Ey(t,e){return t instanceof _y&&e instanceof _y?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Iy&&e instanceof Iy&&t._firestore===e._firestore&&Nm(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Oy(t){if(Sl(t)&&0===t.explicitOrderBy.length)throw new rc(nc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Cy=function(){};function Sy(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var ky=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Wc=e,i.Gc=n,i.zc=r,i.type="where",i}return Object(tc.__extends)(e,t),e.prototype._apply=function(t){var e=Ym(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new rc(nc.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Dy(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Ry(r,t,l[c]));a={arrayValue:{values:u}}}else a=Ry(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Dy(s,o),a=sy(n,"where",s,"in"===o||"not-in"===o);var h=ul.create(i,o,a);return function(t,e){if(e.g()){var n=Al(t);if(null!==n&&!n.isEqual(e.field))throw new rc(nc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=kl(t);null!==r&&My(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new rc(nc.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Wc,this.Gc,this.zc);return new Cm(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Tl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Cy),Ay=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Wc=e,r.Hc=n,r.type="orderBy",r}return Object(tc.__extends)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new rc(nc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new rc(nc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new bl(e,n);return function(t,e){if(null===kl(t)){var n=Al(t);null!==n&&My(0,n,e.field)}}(t,r),r}(t._query,this.Wc,this.Hc);return new Cm(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Tl(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Cy),xy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return Object(tc.__extends)(e,t),e.prototype._apply=function(t){return new Cm(t.firestore,t.converter,Pl(t._query,this.Jc,this.Yc))},e}(Cy),Ny=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(tc.__extends)(e,t),e.prototype._apply=function(t){var e=Py(t,this.type,this.Xc,this.Zc);return new Cm(t.firestore,t.converter,function(t,e){return new Tl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Cy),jy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(tc.__extends)(e,t),e.prototype._apply=function(t){var e=Py(t,this.type,this.Xc,this.Zc);return new Cm(t.firestore,t.converter,function(t,e){return new Tl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Cy);function Py(t,e,n,r){if(n[0]=Object(Yi.getModularInstance)(n[0]),n[0]instanceof vy)return function(t,e,n,r,i){if(!r)throw new rc(nc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Nl(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Gc(e,r.key));else{var c=r.data.field(u.field);if(Pc(c))throw new rc(nc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new rc(nc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ml(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Ym(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new rc(nc.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new rc(nc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!xl(t)&&-1!==c.indexOf("/"))throw new rc(nc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Ec.fromString(c));if(!Uc.isDocumentKey(l))throw new rc(nc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Uc(l);a.push(Gc(e,h))}else{var f=sy(n,r,c);a.push(f)}}return new ml(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Ry(t,e,n){if("string"==typeof(n=Object(Yi.getModularInstance)(n))){if(""===n)throw new rc(nc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!xl(e)&&-1!==n.indexOf("/"))throw new rc(nc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Ec.fromString(n));if(!Uc.isDocumentKey(r))throw new rc(nc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Gc(t,new Uc(r))}if(n instanceof Om)return Gc(t,n._key);throw new rc(nc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+_m(n)+".")}function Dy(t,e){if(!Array.isArray(t)||0===t.length)throw new rc(nc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new rc(nc.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function My(t,e,n){if(!n.isEqual(e))throw new rc(nc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Ly=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Vc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Nc(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(jc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw lc()}},t.prototype.convertObject=function(t,e){var n=this,r={};return wc(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Hm(Nc(t.latitude),Nc(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Rc(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Dc(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=xc(t);return new yc(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Ec.fromString(t);hc(Cf(n));var r=new am(n.get(1),n.get(3)),i=new Uc(n.popFirst(5));return r.isEqual(e)||ac("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Fy(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Uy=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(tc.__extends)(e,t),e.prototype.convertBytes=function(t){return new qm(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Om(this.firestore,null,e)},e}(Ly),Vy=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Ym(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=qy(t,this._firestore),i=Fy(r.converter,e,n),o=Xm(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,rh.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=qy(t,this._firestore);return o="string"==typeof(e=Object(Yi.getModularInstance)(e))||e instanceof Vm?oy(this._dataReader,"WriteBatch.update",s._key,e,n,r):iy(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,rh.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=qy(t,this._firestore);return this._mutations=this._mutations.concat(new yh(e._key,rh.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new rc(nc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function qy(t,e){if((t=Object(Yi.getModularInstance)(t)).firestore!==e)throw new rc(nc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var By=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(tc.__extends)(e,t),e.prototype.convertBytes=function(t){return new qm(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Om(this.firestore,null,e)},e}(Ly);function Hy(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=wm(t,Om);var o=wm(t.firestore,Dm),s=Ym(o);return Ky(o,[("string"==typeof(e=Object(Yi.getModularInstance)(e))||e instanceof Vm?oy(s,"updateDoc",t._key,e,n,r):iy(s,"updateDoc",t._key,e)).toMutation(t._key,rh.exists(!0))])}function zy(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(Yi.getModularInstance)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Pm(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Pm(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Om)c=wm(t.firestore,Dm),l=Ol(t._key.path),u={next:function(e){i[a]&&i[a](Wy(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=wm(t,Cm);c=wm(d.firestore,Dm),l=d._query;var p=new By(c);u={next:function(t){i[a]&&i[a](new Iy(c,p,d,t))},error:i[a+1],complete:i[a+2]},Oy(t._query)}return function(t,e,n,r){var i=this,o=new zv(r),s=new Yg(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(tc.__awaiter)(i,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return e=Kg,[4,rm(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(tc.__awaiter)(i,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return e=Wg,[4,rm(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Mm(c),l,h,u)}function Ky(t,e){return function(t,e){var n=this,r=new Yf;return t.asyncQueue.enqueueAndForget(function(){return Object(tc.__awaiter)(n,void 0,void 0,function(){var n;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return n=lv,[4,nm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Mm(t),e)}function Wy(t,e,n){var r=n.docs.get(e._key),i=new By(t);return new _y(t,i,e._key,r,new by(n.hasPendingWrites,n.fromCache),e.converter)}var Gy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(tc.__extends)(e,t),e.prototype.get=function(e){var n=this,r=qy(e,this._firestore),i=new By(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new _y(n._firestore,i,r._key,t._document,new by(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Ym(t)}return t.prototype.get=function(t){var e=this,n=qy(t,this._firestore),r=new Uy(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return lc();var i=t[0];if(i.isFoundDocument())return new vy(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new vy(e._firestore,r,n._key,null,n.converter);throw lc()})},t.prototype.set=function(t,e,n){var r=qy(t,this._firestore),i=Fy(r.converter,e,n),o=Xm(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=qy(t,this._firestore);return o="string"==typeof(e=Object(Yi.getModularInstance)(e))||e instanceof Vm?oy(this._dataReader,"Transaction.update",s._key,e,n,r):iy(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=qy(t,this._firestore);return this._transaction.delete(e._key),this},t}());function $y(){if("undefined"==typeof Uint8Array)throw new rc(nc.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Qy(){if("undefined"==typeof atob)throw new rc(nc.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Yy=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Qy(),new t(qm.fromBase64String(e))},t.fromUint8Array=function(e){return $y(),new t(qm.fromUint8Array(e))},t.prototype.toBase64=function(){return Qy(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return $y(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Xy=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Um(t=wm(t,Dm));var n=Mm(t),r=t._freezeSettings(),i=new Bv;return Fm(n,i,new Vv(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Um(t=wm(t,Dm));var e=Mm(t),n=t._freezeSettings(),r=new Bv;return Fm(e,r,new qv(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new rc(nc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Yf;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(tc.__awaiter)(e,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return Zf.yt()?[4,Zf.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(lp(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Jy=function(){function t(t,e,n){var r=this;this._delegate=e,this.tu=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof am||(this.eu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||uc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=wm(t,Em))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&uc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Object(Yi.createMockUserToken)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new rc(nc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new hm(new cm(o,new qp(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(tc.__awaiter)(e,void 0,void 0,function(){var e,n;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return[4,Zv(t)];case 1:return e=r.sent(),[4,em(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=fc(t);return e.Or.delete(0),dg(e)}(n))]}})})})}(Mm(wm(this._delegate,Dm)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(tc.__awaiter)(e,void 0,void 0,function(){var e,n;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return[4,Zv(t)];case 1:return e=r.sent(),[4,em(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return(e=fc(t)).Or.add(0),[4,pg(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(Mm(wm(this._delegate,Dm)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&mm("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.tu.enableMultiTabIndexedDbPersistence(this):this.tu.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.tu.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.eu&&(this.eu._removeServiceInstance("firestore"),this.eu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Yf;return t.asyncQueue.enqueueAndForget(function(){return Object(tc.__awaiter)(e,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return e=vv,[4,nm(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Mm(wm(this._delegate,Dm)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new zv(e);return t.asyncQueue.enqueueAndForget(function(){return Object(tc.__awaiter)(n,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return e=function(t,e){fc(t).Gr.add(e),e.next()},[4,rm(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(tc.__awaiter)(n,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return e=function(t,e){fc(t).Gr.delete(e)},[4,rm(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Mm(t=wm(t,Dm)),Pm(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.eu)throw new rc(nc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.eu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new fb(this,km(this._delegate,t))}catch(t){throw ib(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new rb(this,Am(this._delegate,t))}catch(t){throw ib(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new cb(this,function(t,e){if(t=wm(t,Em),gm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new rc(nc.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Cm(t,null,function(t){return new Tl(Ec.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw ib(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Yf;return t.asyncQueue.enqueueAndForget(function(){return Object(tc.__awaiter)(n,void 0,void 0,function(){var n;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return[4,function(t){return Jv(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Gv(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Mm(t),function(n){return e(new Gy(t,n))})}(this._delegate,function(n){return t(new tb(e,n))})},t.prototype.batch=function(){var t=this;return Mm(this._delegate),new eb(new Vy(this._delegate,function(e){return Ky(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new rc(nc.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new rc(nc.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Zy=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(tc.__extends)(e,t),e.prototype.convertBytes=function(t){return new Yy(new qm(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return rb.nu(e,this.firestore,null)},e}(Ly),tb=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Zy(t)}return t.prototype.get=function(t){var e=this,n=db(t);return this._delegate.get(n).then(function(t){return new ab(e._firestore,new _y(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=db(t);return n?(vm("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=db(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(tc.__spreadArray)([s,e,n],i)),this},t.prototype.delete=function(t){var e=db(t);return this._delegate.delete(e),this},t}(),eb=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=db(t);return n?(vm("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=db(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(tc.__spreadArray)([s,e,n],i)),this},t.prototype.delete=function(t){var e=db(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),nb=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new wy(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new ub(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.su=function(e,n){var r=t.iu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Zy(e),n),i.set(n,o)),o},t}();nb.iu=new WeakMap;var rb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Zy(t)}return t.ru=function(e,n,r){if(e.length%2!=0)throw new rc(nc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Om(n._delegate,r,new Uc(e)))},t.nu=function(e,n,r){return new t(n,new Om(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new fb(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new fb(this.firestore,km(this._delegate,t))}catch(t){throw ib(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(Yi.getModularInstance)(t))instanceof Om&&xm(this._delegate,t)},t.prototype.set=function(t,e){e=vm("DocumentReference.set",e);try{return function(t,e,n){t=wm(t,Om);var r=wm(t.firestore,Dm),i=Fy(t.converter,e,n);return Ky(r,[Xm(Ym(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,rh.none())])}(this._delegate,t,e)}catch(t){throw ib(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Hy(this._delegate,t):Hy.apply(void 0,Object(tc.__spreadArray)([this._delegate,t,e],n))}catch(t){throw ib(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Ky(wm((t=this._delegate).firestore,Dm),[new yh(t._key,rh.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ob(e),i=sb(e,function(e){return new ab(t.firestore,new _y(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return zy(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=wm(t,Om);var e=wm(t.firestore,Dm),n=Mm(e),r=new By(e);return function(t,e){var n=this,r=new Yf;return t.asyncQueue.enqueueAndForget(function(){return Object(tc.__awaiter)(n,void 0,void 0,function(){var n;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(tc.__awaiter)(this,void 0,void 0,function(){var r,i;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=fc(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new rc(nc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Ug(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,tm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new _y(e,r,t._key,n,new by(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=wm(t,Om);var e=wm(t.firestore,Dm);return im(Mm(e),t._key,{source:"server"}).then(function(n){return Wy(e,t,n)})}(this._delegate):function(t){t=wm(t,Om);var e=wm(t.firestore,Dm);return im(Mm(e),t._key).then(function(n){return Wy(e,t,n)})}(this._delegate)).then(function(t){return new ab(e.firestore,new _y(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?nb.su(this.firestore,e):null))},t}();function ib(t,e,n){return t.message=t.message.replace(e,n),t}function ob(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Pm(r))return r}return{}}function sb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Pm(t[0])?t[0]:Pm(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ab=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new rb(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Ey(this._delegate,t._delegate)},t}(),ub=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(tc.__extends)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(ab),cb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Zy(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Sy(this._delegate,function(t,e,n){var r=e,i=yy("where",t);return new ky(i,r,n)}(e,n,r)))}catch(e){throw ib(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Sy(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=yy("orderBy",t);return new Ay(r,n)}(e,n)))}catch(e){throw ib(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Sy(this._delegate,function(t){return Im("limit",t),new xy("limit",t,"F")}(e)))}catch(e){throw ib(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Sy(this._delegate,function(t){return Im("limitToLast",t),new xy("limitToLast",t,"L")}(e)))}catch(e){throw ib(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Sy(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ny("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw ib(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Sy(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ny("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw ib(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Sy(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new jy("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw ib(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Sy(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new jy("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw ib(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Nm(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=wm(t,Cm);var e=wm(t.firestore,Dm),n=Mm(e),r=new By(e);return function(t,e){var n=this,r=new Yf;return t.asyncQueue.enqueueAndForget(function(){return Object(tc.__awaiter)(n,void 0,void 0,function(){var n;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(tc.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(tc.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Op(t,e,!0)];case 1:return a=u.sent(),r=new rv(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Ug(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,tm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Iy(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=wm(t,Cm);var e=wm(t.firestore,Dm),n=Mm(e),r=new By(e);return om(n,t._query,{source:"server"}).then(function(n){return new Iy(e,r,t,n)})}(this._delegate):function(t){t=wm(t,Cm);var e=wm(t.firestore,Dm),n=Mm(e),r=new By(e);return Oy(t._query),om(n,t._query).then(function(n){return new Iy(e,r,t,n)})}(this._delegate)).then(function(t){return new hb(e.firestore,new Iy(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ob(e),i=sb(e,function(e){return new hb(t.firestore,new Iy(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return zy(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?nb.su(this.firestore,e):null))},t}(),lb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new ub(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),hb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new cb(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new ub(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new lb(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new ub(n._firestore,r))})},t.prototype.isEqual=function(t){return Ey(this._delegate,t._delegate)},t}(),fb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(tc.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new rb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new rb(this.firestore,void 0===t?Am(this._delegate):Am(this._delegate,t))}catch(t){throw ib(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=wm(t.firestore,Dm),r=Am(t),i=Fy(t.converter,e);return Ky(n,[Xm(Ym(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,rh.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new rb(e.firestore,t)})},e.prototype.isEqual=function(t){return xm(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?nb.su(this.firestore,t):null))},e}(cb);function db(t){return wm(t,Om)}var pb,gb,vb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Vm.bind.apply(Vm,Object(tc.__spreadArray)([void 0],t)))}return t.documentId=function(){return new t(Cc.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(Yi.getModularInstance)(t))instanceof Vm&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),mb=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new ty("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Jm("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ey("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ny("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new ry("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),yb=n("/6Yf"),bb={Firestore:Jy,GeoPoint:Hm,Timestamp:yc,Blob:Yy,Transaction:tb,WriteBatch:eb,DocumentReference:rb,DocumentSnapshot:ab,Query:cb,QueryDocumentSnapshot:ub,QuerySnapshot:hb,CollectionReference:fb,FieldPath:vb,FieldValue:mb,setLogLevel:function(t){ic.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new yb.Component("firestore",function(t){return function(t,e){return new Jy(t,new Dm(t,e),new Xy)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},bb)))})(pb=Qi.default),pb.registerVersion("@firebase/firestore","2.3.2"),(gb=Jy).prototype.loadBundle=function(t){return function(t,e){var n=Mm(t=wm(t,Dm)),r=new Rm;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new Kv(t,e)}(function(t,e){if(t instanceof Uint8Array)return Hv(t,e);if(t instanceof ArrayBuffer)return Hv(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,og(e));t.asyncQueue.enqueueAndForget(function(){return Object(tc.__awaiter)(i,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return e=Fv,[4,nm(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}})})})}(n,t._databaseId,e,r),r}(this._delegate,t)},gb.prototype.namedQuery=function(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue(function(){return Object(tc.__awaiter)(n,void 0,void 0,function(){var n;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return n=function(t,e){var n=fc(t);return n.persistence.runTransaction("Get named query","readonly",function(t){return n.Qe.getNamedQuery(t,e)})},[4,tm(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}})})})}(Mm(e=wm(e,Dm)),n).then(function(t){return t?new Cm(e,null,t.query):null})).then(function(t){return t?new cb(r,t):null})};var _b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},wb=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return Object(tc.__extends)(e,t),e}(Error),Ib=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}return t.prototype.getAuthToken=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t;return Object(tc.__generator)(this,function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}})})},t.prototype.getInstanceIdToken=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},t.prototype.getContext=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}})})},t}();function Tb(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Eb,Ob,Cb,Sb=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return Tb(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?Tb(t,function(t){return e.decode(t)}):t},t}(),kb=function(){function t(t,e,n,r,i,o){var s=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new Sb,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(s.deleteService())}},this.contextProvider=new Ib(e,n),this.cancelAllRequests=new Promise(function(t){s.deleteService=function(){return t()}});try{var a=new URL(i);this.customDomain=a.origin,this.region="us-central1"}catch(pb){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Object(tc.__awaiter)(this,void 0,void 0,function(){var r,i,o;return Object(tc.__generator)(this,function(s){switch(s.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=s.sent())&&(n["X-Firebase-AppCheck"]=r),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=s.sent(),[3,5];case 4:return s.sent(),[2,{status:0,json:null}];case 5:o=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,i.json()];case 7:return o=s.sent(),[3,9];case 8:return s.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}})})},t.prototype.getAppCheckToken=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t;return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype.call=function(t,e,n){return Object(tc.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h,f;return Object(tc.__generator)(this,function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(s=d.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=function(t){var e,n=new Promise(function(n,r){e=setTimeout(function(){r(new wb("deadline-exceeded","deadline-exceeded"))},t)});return{timer:e,promise:n}}(n.timeout||7e4),u=a.timer,c=a.promise,[4,Promise.race([Ab(u,this.postJSON(r,i,o)),c,Ab(u,this.cancelAllRequests)])];case 2:if(!(l=d.sent()))throw new wb("cancelled","Firebase Functions instance was deleted.");if(h=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!_b[a])return new wb("internal","internal");r=_b[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(pb){}return"ok"===r?null:new wb(r,i,o)}(l.status,l.json,this.serializer))throw h;if(!l.json)throw new wb("internal","Response is not valid JSON object.");if(void 0===(f=l.json.data)&&(f=l.json.result),void 0===f)throw new wb("internal","Response is missing data field.");return[2,{data:this.serializer.decode(f)}]}})})},t}();function Ab(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}})})}Eb=Qi.default,Ob=fetch.bind(self),Cb={Functions:kb},Eb.INTERNAL.registerComponent(new yb.Component("functions",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal"),s=t.getProvider("messaging");return new kb(r,i,s,o,n,Ob)},"PUBLIC").setServiceProps(Cb).setMultipleInstances(!0)),Qi.default.registerVersion("@firebase/functions","0.6.9");var xb,Nb=n("nbvr"),jb="w:0.4.26",Pb=((xb={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',xb["not-registered"]="Firebase Installation is not registered.",xb["installation-not-found"]="Firebase Installation not found.",xb["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',xb["app-offline"]="Could not process request. Application offline.",xb["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",xb),Rb=new Yi.ErrorFactory("installations","Installations",Pb);function Db(t){return t instanceof Yi.FirebaseError&&t.code.includes("request-failed")}function Mb(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function Lb(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function Fb(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),[2,Rb.create("request-failed",{requestName:t,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}})})}function Ub(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function Vb(t,e){var n=e.refreshToken,r=Ub(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function qb(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}})})}function Bb(t,e){var n=e.fid;return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,r,i,o,s;return Object(tc.__generator)(this,function(a){switch(a.label){case 0:return e=Mb(t),r=Ub(t),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:jb})},[4,qb(function(){return fetch(e,i)})];case 1:return(o=a.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(s=a.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:Lb(s.authToken)}];case 3:return[4,Fb("Create Installation",o)];case 4:throw a.sent()}})})}function Hb(t){return new Promise(function(e){setTimeout(e,t)})}var zb=/^[cdef][\w-]{21}$/;function Kb(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Object(tc.__spreadArray)([],Object(tc.__read)(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return zb.test(e)?e:""}catch(n){return""}}function Wb(t){return t.appName+"!"+t.appId}var Gb=new Map;function $b(t,e){var n=Wb(t);Qb(n,e),function(t,e){var n=Xb();n&&n.postMessage({key:t,fid:e}),Jb()}(n,e)}function Qb(t,e){var n,r,i=Gb.get(t);if(i)try{for(var o=Object(tc.__values)(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Yb=null;function Xb(){return!Yb&&"BroadcastChannel"in self&&((Yb=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){Qb(t.data.key,t.data.fid)}),Yb}function Jb(){0===Gb.size&&Yb&&(Yb.close(),Yb=null)}var Zb,t_="firebase-installations-store",e_=null;function n_(){return e_||(e_=Object(Nb.openDb)("firebase-installations-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(t_)}})),e_}function r_(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(tc.__generator)(this,function(a){switch(a.label){case 0:return n=Wb(t),[4,n_()];case 1:return r=a.sent(),i=r.transaction(t_,"readwrite"),[4,(o=i.objectStore(t_)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||$b(t,e.fid),[2,e]}})})}function i_(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return e=Wb(t),[4,n_()];case 1:return n=i.sent(),[4,(r=n.transaction(t_,"readwrite")).objectStore(t_).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function o_(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(tc.__generator)(this,function(u){switch(u.label){case 0:return n=Wb(t),[4,n_()];case 1:return r=u.sent(),i=r.transaction(t_,"readwrite"),[4,(o=i.objectStore(t_)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||$b(t,a.fid),[2,a]}})})}function s_(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return[4,o_(t,function(n){var r=function(t){return c_(t||{fid:Kb(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Rb.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,Bb(t,e)];case 1:return n=i.sent(),[2,r_(t,n)];case 2:return Db(r=i.sent())&&409===r.customData.serverCode?[4,i_(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,r_(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:a_(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry})];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function a_(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:return[4,u_(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,Hb(100)];case 3:return o.sent(),[4,u_(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,s_(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}function u_(t){return o_(t,function(t){if(!t)throw Rb.create("installation-not-found");return c_(t)})}function c_(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function l_(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Object(tc.__awaiter)(this,void 0,void 0,function(){var t,i,o,s,a;return Object(tc.__generator)(this,function(u){switch(u.label){case 0:return t=function(t,e){var n=e.fid;return Mb(t)+"/"+n+"/authTokens:generate"}(n,e),i=Vb(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:jb}})},[4,qb(function(){return fetch(t,s)})];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,Lb(u.sent())];case 3:return[4,Fb("Generate Auth Token",a)];case 4:throw u.sent()}})})}function h_(t,e){return void 0===e&&(e=!1),Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:return[4,o_(t.appConfig,function(r){if(!d_(r))throw Rb.create("not-registered");var i,o=r.authToken;if(!e&&2===(i=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i))return r;if(1===o.requestStatus)return n=function(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return[4,f_(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,Hb(100)];case 3:return i.sent(),[4,f_(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,h_(t,e)]:[2,r]}})})}(t,e),r;if(!navigator.onLine)throw Rb.create("app-offline");var s=function(t){var e={requestStatus:1,requestTime:Date.now()};return Object(tc.__assign)(Object(tc.__assign)({},t),{authToken:e})}(r);return n=function(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,l_(t,e)];case 1:return n=o.sent(),i=Object(tc.__assign)(Object(tc.__assign)({},e),{authToken:n}),[4,r_(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!Db(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,i_(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(tc.__assign)(Object(tc.__assign)({},e),{authToken:{requestStatus:0}}),[4,r_(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}(t,s),s})];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}})})}function f_(t){return o_(t,function(t){if(!d_(t))throw Rb.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object(tc.__assign)(Object(tc.__assign)({},t),{authToken:{requestStatus:0}}):t})}function d_(t){return void 0!==t&&2===t.registrationStatus}function p_(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return[4,s_(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function g_(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(tc.__generator)(this,function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return Mb(t)+"/"+n}(t,e),r=Vb(t,e),i={method:"DELETE",headers:r},[4,qb(function(){return fetch(n,i)})];case 1:return(o=s.sent()).ok?[3,3]:[4,Fb("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}})})}function v_(t){return Rb.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new yb.Component("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw v_("App Configuration");if(!t.name)throw v_("App Name");try{for(var r=Object(tc.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw v_(o)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return[4,s_(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):h_(t).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return[4,p_(t.appConfig)];case 1:return n.sent(),[4,h_(t,e)];case 2:return[2,n.sent().token]}})})}(n,t)},delete:function(){return function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return[4,o_(e=t.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Rb.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Rb.create("app-offline");case 3:return[4,g_(e,n)];case 4:return r.sent(),[4,i_(e)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){Xb();var n=Wb(t),r=Gb.get(n);r||(r=new Set,Gb.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=Wb(t),r=Gb.get(n);r&&(r.delete(e),0===r.size&&Gb.delete(n),Jb())}(n,e)}}(n,t)}}},"PUBLIC")),t.registerVersion("@firebase/installations","0.4.26")}(Qi.default);var m_=((Zb={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Zb["only-available-in-window"]="This method is available in a Window context.",Zb["only-available-in-sw"]="This method is available in a service worker context.",Zb["permission-default"]="The notification permission was not granted and dismissed instead.",Zb["permission-blocked"]="The notification permission was not granted and blocked instead.",Zb["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Zb["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Zb["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Zb["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Zb["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Zb["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Zb["token-update-no-token"]="FCM returned no token when updating the user to push.",Zb["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Zb["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Zb["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Zb["invalid-vapid-key"]="The public VAPID key must be a string.",Zb["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Zb),y_=new Yi.ErrorFactory("messaging","Messaging",m_),b_="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",__=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}({});function w_(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(tc.__spreadArray)([],Object(tc.__read)(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function I_(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var T_="fcm_token_details_db",E_="fcm_token_object_Store";function O_(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map(function(t){return t.name}).includes(T_))return[2,null];r.label=2;case 2:return e=null,[4,Object(Nb.openDb)(T_,5,function(r){return Object(tc.__awaiter)(n,void 0,void 0,function(){var n,i,o,s;return Object(tc.__generator)(this,function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(E_)?[4,(n=r.transaction.objectStore(E_)).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:w_(o.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:w_(o.auth),p256dh:w_(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:w_(o.vapidKey)}});return[2]}})})})];case 3:return r.sent().close(),[4,Object(Nb.deleteDb)(T_)];case 4:return r.sent(),[4,Object(Nb.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,Object(Nb.deleteDb)("undefined")];case 6:return r.sent(),[2,C_(e)?e:null]}})})}function C_(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var S_="firebase-messaging-store",k_=null;function A_(){return k_||(k_=Object(Nb.openDb)("firebase-messaging-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(S_)}})),k_}function x_(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return e=P_(t),[4,A_()];case 1:return[4,i.sent().transaction(S_).objectStore(S_).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,O_(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,N_(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}})})}function N_(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:return n=P_(t),[4,A_()];case 1:return r=o.sent(),[4,(i=r.transaction(S_,"readwrite")).objectStore(S_).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}})})}function j_(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return e=P_(t),[4,A_()];case 1:return n=i.sent(),[4,(r=n.transaction(S_,"readwrite")).objectStore(S_).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function P_(t){return t.appConfig.appId}function R_(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(tc.__generator)(this,function(a){switch(a.label){case 0:return[4,F_(t)];case 1:n=a.sent(),r=U_(e),i={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(L_(t.appConfig),i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),y_.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw y_.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw y_.create("token-subscribe-no-token");return[2,o.token]}})})}function D_(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(tc.__generator)(this,function(a){switch(a.label){case 0:return[4,F_(t)];case 1:n=a.sent(),r=U_(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(L_(t.appConfig)+"/"+e.token,i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),y_.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw y_.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw y_.create("token-update-no-token");return[2,o.token]}})})}function M_(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(tc.__generator)(this,function(s){switch(s.label){case 0:return[4,F_(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(L_(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw y_.create("token-unsubscribe-failed",{errorInfo:i.error.message});return[3,6];case 5:throw o=s.sent(),y_.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function L_(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function F_(t){var e=t.appConfig,n=t.installations;return Object(tc.__awaiter)(this,void 0,void 0,function(){var t;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}})})}function U_(t){var e=t.vapidKey,n={web:{endpoint:t.endpoint,auth:t.auth,p256dh:t.p256dh}};return e!==b_&&(n.web.applicationPubKey=e),n}function V_(t,e,n){return Object(tc.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return Object(tc.__generator)(this,function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw y_.create("permission-blocked");return[4,z_(e,n)];case 1:return r=a.sent(),[4,x_(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:w_(r.getKey("auth")),p256dh:w_(r.getKey("p256dh"))},i?[3,3]:[2,H_(t,o)];case 3:if(l=(c=o).endpoint===(u=i.subscriptionOptions).endpoint,c.vapidKey===u.vapidKey&&l&&c.auth===u.auth&&c.p256dh===u.p256dh)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,M_(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,H_(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,B_({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l})})}function q_(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return[4,x_(t)];case 1:return(n=i.sent())?[4,M_(t,n.token)]:[3,4];case 2:return i.sent(),[4,j_(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}})})}function B_(t,e,n){return Object(tc.__awaiter)(this,void 0,void 0,function(){var r,i,o;return Object(tc.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,D_(e,t)];case 1:return r=s.sent(),i=Object(tc.__assign)(Object(tc.__assign)({},t),{token:r,createTime:Date.now()}),[4,N_(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,q_(e,n)];case 4:throw s.sent(),o;case 5:return[2]}})})}function H_(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return[4,R_(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,N_(t,r)];case 2:return i.sent(),[2,r.token]}})})}function z_(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:I_(e)})]}})})}function K_(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function W_(t){return new Promise(function(e){setTimeout(e,t)})}var G_=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw y_.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Object(tc.__awaiter)(this,void 0,void 0,function(){var n;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,x_(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:b_,r.label=2;case 2:return[2,V_(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},t.prototype.deleteToken=function(){return q_(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw y_.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw y_.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw y_.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw y_.create("only-available-in-window")},t.prototype.onMessage=function(){throw y_.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw y_.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,X_()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})}(n=o.sent())?[2,Y_(n,e)]:(r=!1,e.notification?[4,J_($_(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,W_(1e3)]);case 4:return o.sent(),[2]}})})},t.prototype.onSubChange=function(t){var e,n;return Object(tc.__awaiter)(this,void 0,void 0,function(){var r;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,q_(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,x_(this.firebaseDependencies)];case 3:return r=i.sent(),[4,q_(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,V_(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:b_)];case 5:return i.sent(),[2]}})})},t.prototype.onNotificationClick=function(t){var e,n;return Object(tc.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(tc.__generator)(this,function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r;return(null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action)||(K_(t.data)?self.location.origin:null)}(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,Q_(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,W_(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=__.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}})})},t}();function $_(t){var e,n=Object(tc.__assign)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function Q_(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Object(tc.__generator)(this,function(u){switch(u.label){case 0:return[4,X_()];case 1:e=u.sent();try{for(n=Object(tc.__values)(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}function Y_(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=__.PUSH_RECEIVED;try{for(var i=Object(tc.__values)(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function X_(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function J_(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var Z_=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===__.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),K_(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw y_.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,V_(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},t.prototype.updateVapidKey=function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=b_),[2]})})},t.prototype.updateSwReg=function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw y_.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},t.prototype.registerDefaultSw=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=n.sent(),y_.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},t.prototype.deleteToken=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,q_(this.firebaseDependencies,this.swRegistration)]}})})},t.prototype.requestPermission=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t;return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw y_.create("denied"===t?"permission-blocked":"permission-default")}})})},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw y_.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw y_.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw y_.create("invalid-sw-registration");if(this.swRegistration)throw y_.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw y_.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw y_.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return n=function(t){switch(t){case __.NOTIFICATION_CLICKED:return"notification_open";case __.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},t}();function tw(t){return y_.create("missing-app-config-values",{valueName:t})}var ew={isSupported:nw};function nw(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Qi.default.INTERNAL.registerComponent(new yb.Component("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw tw("App Configuration Object");if(!t.name)throw tw("App Name");var r=t.options;try{for(var i=Object(tc.__values)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw tw(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!nw())throw y_.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new G_(n):new Z_(n)},"PUBLIC").setServiceProps(ew));var rw="firebasestorage.googleapis.com",iw=function(t){function e(n,r){var i=t.call(this,ow(n),"Firebase Storage: "+r+" ("+ow(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return Object(tc.__extends)(e,t),e.prototype._codeEquals=function(t){return ow(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(Yi.FirebaseError);function ow(t){return"storage/"+t}function sw(){return new iw("unknown","An unknown error occurred, please check the error payload for server response.")}function aw(){return new iw("canceled","User canceled the upload/download.")}function uw(){return new iw("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function cw(t){return new iw("invalid-argument",t)}function lw(){return new iw("app-deleted","The Firebase app was deleted.")}function hw(t){return new iw("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fw(t,e){return new iw("invalid-format","String does not match format '"+t+"': "+e)}function dw(t){throw new iw("internal-error","Internal error: "+t)}var pw={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},gw=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function vw(t,e){switch(t){case pw.RAW:return new gw(mw(e));case pw.BASE64:case pw.BASE64URL:return new gw(yw(t,e));case pw.DATA_URL:return new gw((n=new bw(e)).base64?yw(pw.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(pb){throw fw(pw.DATA_URL,"Malformed data URL.")}return mw(e)}(n.rest),new bw(e).contentType)}var n;throw sw()}function mw(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function yw(t,e){switch(t){case pw.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw fw(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case pw.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw fw(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(pb){throw fw(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var bw=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw fw(pw.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),_w={STATE_CHANGED:"state_changed"},ww={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Iw(t){switch(t){case"running":case"pausing":case"canceling":return ww.RUNNING;case"paused":return ww.PAUSED;case"success":return ww.SUCCESS;case"canceled":return ww.CANCELED;case"error":default:return ww.ERROR}}var Tw=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Ew=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Tw.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=Tw.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=Tw.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw dw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw dw("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw dw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(pb){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw dw("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Ow=function(){function t(){}return t.prototype.createXhrIo=function(){return new Ew},t}(),Cw=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(pb){return new t(e,"")}if(""===r.path)return r;throw new iw("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===rw?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.path];f||(f=""),r=new t(h[l.indices.bucket],f),l.postModify(r);break}}if(null==r)throw function(t){return new iw("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),Sw=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function kw(t){return"string"==typeof t||t instanceof String}function Aw(t){return xw()&&t instanceof Blob}function xw(){return"undefined"!=typeof Blob}function Nw(t,e,n,r){if(r<e)throw cw("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw cw("Invalid value for '"+t+"'. Expected "+n+" or less.")}function jw(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function Pw(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var Rw=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(pb){o(pb)}else null!==s?((r=sw()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?lw():aw():new iw("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Dw(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new Dw(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Tw.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Dw(s,n))}else{var a=n.getErrorCode()===Tw.ABORT;e(!1,new Dw(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())},e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(tc.__spreadArray)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(tc.__spreadArray)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Dw=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function Mw(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Lw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Mw();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(xw())return new Blob(t);throw new iw("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Fw=function(){function t(t,e){var n=0,r="";Aw(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Aw(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(xw()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(Lw.apply(null,r))}var i=e.map(function(t){return kw(t)?vw(pw.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function Uw(t){var e,n;try{e=JSON.parse(t)}catch(pb){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function Vw(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function qw(t,e){return e}var Bw=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||qw}}(),Hw=null;function zw(){if(Hw)return Hw;var t=[];t.push(new Bw("bucket")),t.push(new Bw("generation")),t.push(new Bw("metageneration")),t.push(new Bw("name","fullPath",!0));var e=new Bw("name");e.xform=function(t,e){return function(t){return!kw(t)||t.length<2?t:Vw(t)}(e)},t.push(e);var n=new Bw("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Bw("timeCreated")),t.push(new Bw("updated")),t.push(new Bw("md5Hash",null,!0)),t.push(new Bw("cacheControl",null,!0)),t.push(new Bw("contentDisposition",null,!0)),t.push(new Bw("contentEncoding",null,!0)),t.push(new Bw("contentLanguage",null,!0)),t.push(new Bw("contentType",null,!0)),t.push(new Bw("metadata","customMetadata",!0)),Hw=t}function Kw(t,e,n){var r=Uw(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Cw(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function Ww(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Gw=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function $w(t){if(!t)throw sw()}function Qw(t,e){return function(n,r){var i=Kw(t,r,e);return $w(null!==i),i}}function Yw(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new iw("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new iw("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new iw("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new iw("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function Xw(t){var e=Yw(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new iw("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Jw(t,e,n){var r=jw(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Gw(r,"GET",Qw(t,n),i);return o.errorHandler=Xw(e),o}function Zw(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var tI=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function eI(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(pb){$w(!1)}return $w(!!n&&-1!==(e||["active"]).indexOf(n)),n}var nI=262144,rI=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function iI(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var oI=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=zw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Zw(e,r,i),a={name:s.fullPath},u=jw(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=Ww(s,n),h=new Gw(u,"POST",function(t){var e;eI(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(pb){$w(!1)}return $w(kw(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=Yw(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i=function(t,e,n,r){var i=new Gw(n,"POST",function(t){var e=eI(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(pb){$w(!1)}n||$w(!1);var i=Number(n);return $w(!isNaN(i)),new tI(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=Yw(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=nI*this._chunkMultiplier,n=new tI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){var s;try{s=function(t,e,n,r,i,o,s,a){var u=new tI(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new iw("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw uw();var p=new Gw(n,"POST",function(t,n){var i,s=eI(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?Qw(e,o)(t,n):null,new tI(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=Yw(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(pb){return t._error=pb,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){nI*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=Jw(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Zw(e,r,i),c=Ww(u,n),l=Fw.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw uw();var h={name:u.fullPath},f=jw(o,t.host),d=t.maxUploadRetryTime,p=new Gw(f,"POST",Qw(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=Yw(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=aw(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Iw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new rI(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Iw(this._state)){case ww.SUCCESS:iI(this._resolve.bind(null,this.snapshot))();break;case ww.CANCELED:case ww.ERROR:iI(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Iw(this._state)){case ww.RUNNING:case ww.PAUSED:t.next&&iI(t.next.bind(t,this.snapshot))();break;case ww.SUCCESS:t.complete&&iI(t.complete.bind(t))();break;case ww.CANCELED:case ww.ERROR:t.error&&iI(t.error.bind(t,this._error))();break;default:t.error&&iI(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),sI=function(){function t(t,e){this._service=t,this._location=e instanceof Cw?e:Cw.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Cw(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Vw(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Cw(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw hw(t)},t}();function aI(t){var e={prefixes:[],items:[]};return uI(t,e).then(function(){return e})}function uI(t,e,n){return Object(tc.__awaiter)(this,void 0,void 0,function(){var r,i,o;return Object(tc.__generator)(this,function(s){switch(s.label){case 0:return[4,cI(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,uI(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function cI(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Nw("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=jw(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new Gw(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=Uw(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new Cw(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new Cw(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return $w(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Yw(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function lI(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Cw(t._location.bucket,n);return new sI(t.storage,r)}function hI(t){return/^[A-Za-z]+:\/\//.test(t)}function fI(t,e){if(t instanceof gI){var n=t;if(null==n._bucket)throw new iw("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new sI(n,n._bucket);return null!=e?fI(r,e):r}if(void 0!==e){if(e.includes(".."))throw cw('`path` param cannot contain ".."');return lI(t,e)}return t}function dI(t,e){if(e&&hI(e)){if(t instanceof gI)return new sI(t,e);throw cw("To use ref(service, url), the first argument must be a Storage instance.")}return fI(t,e)}function pI(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:Cw.makeFromBucketSpec(n,t)}var gI=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=rw,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Cw.makeFromBucketSpec(i,this._host):pI(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?Cw.makeFromBucketSpec(this._url,t):pI(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Nw("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Nw("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t;return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new sI(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new Sw(lw());var i=function(t,e,n,r,i,o){var s=Pw(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new Rw(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},t.prototype.makeRequestWithTokens=function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},t}();function vI(t,e){return dI(t=Object(Yi.getModularInstance)(t),e)}var mI=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),yI=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new mI(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new mI(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new mI(t,i,i._ref))}:{next:e.next?function(t){return e.next(new mI(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),bI=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new _I(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new _I(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),_I=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return lI(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new yI(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new oI(t,new Fw(e),n)}(t=Object(Yi.getModularInstance)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=pw.RAW),this._throwIfRoot("putString");var r=vw(e,t),i=Object(tc.__assign)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new yI(new oI(this._delegate,new Fw(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,aI(t=Object(Yi.getModularInstance)(t))).then(function(t){return new bI(t,e.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return cI(t=Object(Yi.getModularInstance)(t),e)}(this._delegate,t||void 0).then(function(t){return new bI(t,e.storage)})},t.prototype.getMetadata=function(){return t=this._delegate,function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=Jw(t.storage,t._location,zw()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=Object(Yi.getModularInstance)(t));var t},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=jw(e.fullServerUrl(),t.host),o=Ww(n,r),s=t.maxOperationRetryTime,a=new Gw(i,"PATCH",Qw(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Xw(e),a}(t.storage,t._location,e,zw()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=Object(Yi.getModularInstance)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return t=this._delegate,function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=jw(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Gw(r,"GET",function(t,e){return function(n,r){var i=Kw(t,r,e);return $w(null!==i),function(t,e,n){var r=Uw(e);if(null===r)return null;if(!kw(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return jw("/b/"+o(t.bucket)+"/o/"+o(r),n)+Pw({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=Xw(e),o}(t.storage,t._location,zw()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new iw("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=Object(Yi.getModularInstance)(t));var t},t.prototype.delete=function(){return this._throwIfRoot("delete"),t=this._delegate,function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=jw(e.fullServerUrl(),t.host),r=new Gw(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=Xw(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=Object(Yi.getModularInstance)(t));var t},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw hw(t)},t}(),wI=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(hI(t))throw cw("ref() expected a child path but got a URL, use refFromURL instead.");return new _I(vI(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!hI(t))throw cw("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Cw.makeFromUrl(t,this._delegate.host)}catch(pb){throw cw("refFromUrl() expected a valid full URL but got an invalid one.")}return new _I(vI(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function II(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new wI(r,new gI(r,i,o,new Ow,n,Qi.default.SDK_VERSION))}!function(t){var e={TaskState:ww,TaskEvent:_w,StringFormat:pw,Storage:gI,Reference:_I};t.INTERNAL.registerComponent(new yb.Component("storage",II,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.5.2")}(Qi.default);var TI,EI,OI,CI="0.4.12",SI=CI,kI="FB-PERF-TRACE-MEASURE",AI="_wt_",xI="_fcp",NI="_fid",jI="@firebase/performance/config",PI="@firebase/performance/configexpire",RI="Performance",DI=((TI={})["trace started"]="Trace {$traceName} was started before.",TI["trace stopped"]="Trace {$traceName} is not running.",TI["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",TI["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",TI["no window"]="Window is not available.",TI["no app id"]="App id is not available.",TI["no project id"]="Project id is not available.",TI["no api key"]="Api key is not available.",TI["invalid cc log"]="Attempted to queue invalid cc event",TI["FB not default"]="Performance can only start when Firebase app instance is the default one.",TI["RC response not ok"]="RC response is not ok",TI["invalid attribute name"]="Attribute name {$attributeName} is invalid.",TI["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",TI["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",TI["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",TI),MI=new Yi.ErrorFactory("performance",RI,DI),LI=new Xi.Logger(RI);LI.logLevel=Xi.LogLevel.INFO;var FI,UI=function(){function t(t){if(this.window=t,!t)throw MI.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(Yi.isIndexedDBAvailable)()||(LI.info("IndexedDB is not supported by current browswer"),!1):(LI.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var n=0,r=t.getEntries();n<r.length;n++)e(r[n])}).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===EI&&(EI=new t(OI)),EI},t}();function VI(t,e){var n=t.length-e.length;if(n<0||n>1)throw MI.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var qI,BI=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=VI("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=VI("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw MI.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw MI.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw MI.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===FI&&(FI=new t),FI},t}();function HI(){return qI}var zI=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}({}),KI=["firebase_","google_","ga_"],WI=new RegExp("^[a-zA-Z]\\w*$");function GI(){var t=UI.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function $I(){switch(UI.getInstance().document.visibilityState){case"visible":return zI.VISIBLE;case"hidden":return zI.HIDDEN;default:return zI.UNKNOWN}}function QI(){var t=UI.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function YI(t){if(!t)return t;var e=BI.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=XI(e.tracesSamplingRate),e.logNetworkAfterSampling=XI(e.networkRequestsSamplingRate),t}function XI(t){return Math.random()<=t}var JI,ZI=1;function tT(){return ZI=2,JI=JI||function(){var t=UI.getInstance().document;return new Promise(function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}().then(function(){return(t=BI.getInstance().installationsService.getId()).then(function(t){qI=t}),t;var t}).then(function(t){return function(t){var e=function(){var t=UI.getInstance().localStorage;if(t){var e=t.getItem(PI);if(e&&Number(e)>Date.now()){var n=t.getItem(jI);if(n)try{return JSON.parse(n)}catch(r){return}}}}();return e?(YI(e),Promise.resolve()):function(t){return(e=BI.getInstance().installationsService.getToken(),e.then(function(t){}),e).then(function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+BI.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+BI.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:BI.getInstance().getAppId(),app_version:SI,sdk_version:"0.0.1"})});return fetch(r).then(function(t){if(t.ok)return t.json();throw MI.create("RC response not ok")})}).catch(function(){LI.info("Could not fetch config, will use default configs")});var e}(t).then(YI).then(function(t){return function(t){var e=UI.getInstance().localStorage;t&&e&&(e.setItem(jI,JSON.stringify(t)),e.setItem(PI,String(Date.now()+60*BI.getInstance().configTimeToLive*60*1e3)))}(t)},function(){})}(t)}).then(function(){return eT()},function(){return eT()})}function eT(){ZI=3}var nT,rT=1e4,iT=3,oT=[],sT=!1;function aT(t){setTimeout(function(){var t,e;if(0!==iT)return oT.length?(e=(t=oT.splice(0,1e3)).map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),void function(t,e){return function(t){var e=BI.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||LI.info("Call to Firebase backend failed."),t.json()}).then(function(t){var n=Number(t.nextRequestWaitMillis),r=rT;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(oT=Object(tc.__spreadArray)(Object(tc.__spreadArray)([],e),oT),LI.info("Retry transport request later.")),iT=3,aT(r)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:BI.getInstance().logSource,log_event:e},t).catch(function(){oT=Object(tc.__spreadArray)(Object(tc.__spreadArray)([],t),oT),iT--,LI.info("Tries left: "+iT+"."),aT(rT)})):aT(rT)},t)}function uT(t){if(!t.eventTime||!t.message)throw MI.create("invalid cc log");oT=Object(tc.__spreadArray)(Object(tc.__spreadArray)([],oT),[t])}function cT(t,e){var n;nT||(n=fT,nT=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];uT({message:n.apply(void 0,t),eventTime:Date.now()})}),nT(t,e)}function lT(t){var e=BI.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&UI.getInstance().requiredApisAvailable()&&(t.isAuto&&$I()!==zI.VISIBLE||(3===ZI?hT(t):tT().then(function(){return hT(t)},function(){return hT(t)})))}function hT(t){if(HI()){var e=BI.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return cT(t,1)},0)}}function fT(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:dT(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:dT(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function dT(){return{google_app_id:BI.getInstance().getAppId(),app_instance_id:HI(),web_app_info:{sdk_version:SI,page_url:UI.getInstance().getUrl(),service_worker_status:GI(),visibility_state:$I(),effective_connection_type:QI()},application_process_state:0}}var pT=["_fp",xI,NI],gT=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=UI.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw MI.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw MI.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),lT(this)},t.prototype.record=function(t,e,n){if(t<=0)throw MI.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw MI.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object(tc.__assign)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}lT(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(o=this.name,0===(i=t).length||i.length>100||!(o&&o.startsWith(AI)&&pT.indexOf(i)>-1)&&i.startsWith("_"))throw MI.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&LI.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||KI.some(function(t){return n.startsWith(t)})||!n.match(WI)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw MI.create("invalid attribute name",{attributeName:t});if(!i)throw MI.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Object(tc.__assign)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=UI.getInstance().getUrl();if(i){var o=new t(AI+i,!0),s=Math.floor(1e3*UI.getInstance().getTimeOrigin());if(o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var a=n.find(function(t){return"first-paint"===t.name});a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find(function(t){return"first-contentful-paint"===t.name});u&&u.startTime&&o.putMetric(xI,Math.floor(1e3*u.startTime)),r&&o.putMetric(NI,Math.floor(1e3*r))}lT(o)}},t.createUserTimingTrace=function(e){lT(new t(e,!1,e))},t}();function vT(t){var e=t;if(e&&void 0!==e.responseStart){var n=UI.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=BI.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(function(){return cT(t,0)},0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function mT(){HI()&&(setTimeout(function(){return function(){var t=UI.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){gT.createOobTrace(e,n),r=void 0},5e3);t.onFirstInputDelay(function(t){r&&(clearTimeout(r),gT.createOobTrace(e,n,t))})}else gT.createOobTrace(e,n)}()},0),setTimeout(function(){return function(){for(var t=UI.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)vT(n[e]);t.setupObserver("resource",vT)}()},0),setTimeout(function(){return function(){for(var t=UI.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)yT(n[e]);t.setupObserver("measure",yT)}()},0))}function yT(t){var e=t.name;e.substring(0,kI.length)!==kI&&gT.createUserTimingTrace(e)}var bT=function(){function t(t){this.app=t,UI.getInstance().requiredApisAvailable()&&Object(Yi.validateIndexedDBOpenable)().then(function(t){t&&(sT||(aT(5500),sT=!0),tT().then(mT,mT))}).catch(function(t){LI.info("Environment doesn't support IndexedDB: "+t)})}return t.prototype.trace=function(t){return new gT(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return BI.getInstance().instrumentationEnabled},set:function(t){BI.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return BI.getInstance().dataCollectionEnabled},set:function(t){BI.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new yb.Component("performance",function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw MI.create("FB not default");if("undefined"==typeof window)throw MI.create("no window");return function(t){OI=t}(window),BI.getInstance().firebaseAppInstance=t,BI.getInstance().installationsService=e,new bT(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC")),t.registerVersion("@firebase/performance",CI)}(Qi.default);var _T,wT="https://www.googletagmanager.com/gtag/js",IT=function(t){return t.EVENT="event",t.SET="set",t.CONFIG="config",t}({}),TT=function(t){return t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results",t}({}),ET=new Xi.Logger("@firebase/analytics");function OT(t,e,n,r,i,o){return Object(tc.__awaiter)(this,void 0,void 0,function(){var s,a,u,c;return Object(tc.__generator)(this,function(l){switch(l.label){case 0:s=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=l.sent(),(u=a.find(function(t){return t.measurementId===i}))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),ET.error(c),[3,8];case 8:return t(IT.CONFIG,i,o),[2]}})})}function CT(t,e,n,r,i){return Object(tc.__awaiter)(this,void 0,void 0,function(){var o,s,a,u,c,l,h;return Object(tc.__generator)(this,function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=f.sent(),u=function(t){var n=a.find(function(e){return e.measurementId===t}),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=s;c<l.length&&"break"!==u(l[c]);c++);f.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return f.sent(),t(IT.EVENT,r,i||{}),[3,5];case 4:return h=f.sent(),ET.error(h),[3,5];case 5:return[2]}})})}var ST=((_T={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",_T["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",_T["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",_T["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",_T["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",_T["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",_T["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",_T["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',_T["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',_T),kT=new Yi.ErrorFactory("analytics","Analytics",ST),AT=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function xT(t){var e;return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(tc.__generator)(this,function(u){switch(u.label){case 0:return n=t.appId,r={method:"GET",headers:(c=t.apiKey,new Headers({Accept:"application/json","x-goog-api-key":c}))},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(i,r)];case 1:if(200===(o=u.sent()).status||304===o.status)return[3,6];s="",u.label=2;case 2:return u.trys.push([2,4,,5]),[4,o.json()];case 3:return a=u.sent(),(null===(e=a.error)||void 0===e?void 0:e.message)&&(s=a.error.message),[3,5];case 4:return u.sent(),[3,5];case 5:throw kT.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s});case 6:return[2,o.json()]}var c})})}function NT(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=AT),Object(tc.__awaiter)(this,void 0,void 0,function(){var e,s,a,u,c,l,h;return Object(tc.__generator)(this,function(f){switch(f.label){case 0:e=t.appId,s=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,jT(n,i)];case 2:return f.sent(),[3,4];case 3:if(a=f.sent(),s)return ET.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return f.trys.push([4,6,,7]),[4,xT(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof Yi.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),s)return ET.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:s}];throw c}return l=503===Number(c.customData.httpStatus)?Object(Yi.calculateBackoffMillis)(o,r.intervalMillis,30):Object(Yi.calculateBackoffMillis)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),ET.debug("Calling attemptFetch again in "+l+" millis"),[2,NT(t,h,n,r)];case 7:return[2]}})})}function jT(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(kT.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var PT,RT,DT=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),MT={},LT=[],FT={},UT="dataLayer",VT="gtag",qT=!1;function BT(t){if(qT)throw kT.create("already-initialized");t.dataLayerName&&(UT=t.dataLayerName),t.gtagName&&(VT=t.gtagName)}var HT="analytics";function zT(){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(t){switch(t.label){case 0:if(Object(Yi.isBrowserExtension)())return[2,!1];if(!Object(Yi.areCookiesEnabled)())return[2,!1];if(!Object(Yi.isIndexedDBAvailable)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(Yi.validateIndexedDBOpenable)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}!function(t){t.INTERNAL.registerComponent(new yb.Component(HT,function(t){return function(t,e){!function(){var t=[];if(Object(Yi.isBrowserExtension)()&&t.push("This is a browser extension environment."),Object(Yi.areCookiesEnabled)()||t.push("Cookies are not available."),t.length>0){var e=t.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=kT.create("invalid-analytics-context",{errorInfo:e});ET.warn(n.message)}}();var n,r,i=t.options.appId;if(!i)throw kT.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw kT.create("no-api-key");ET.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=MT[i])throw kT.create("already-exists",{id:i});if(!qT){n=UT,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var o=function(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return Object(tc.__awaiter)(this,void 0,void 0,function(){var a;return Object(tc.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==IT.EVENT?[3,2]:[4,CT(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==IT.CONFIG?[3,4]:[4,OT(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(IT.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),ET.error(a),[3,7];case 7:return[2]}})})}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(MT,LT,FT,UT,VT);RT=o.wrappedGtag,PT=o.gtagCore,qT=!0}return MT[i]=function(t,e,n,r,i,o){return Object(tc.__awaiter)(this,void 0,void 0,function(){var s,a,u,c,l,h,f;return Object(tc.__generator)(this,function(d){switch(d.label){case 0:return(s=function(t,e,n){return void 0===e&&(e=AT),Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u=this;return Object(tc.__generator)(this,function(c){if(i=(n=t.options).apiKey,o=n.measurementId,!(r=n.appId))throw kT.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw kT.create("no-api-key")}return s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new DT,setTimeout(function(){return Object(tc.__awaiter)(u,void 0,void 0,function(){return Object(tc.__generator)(this,function(t){return a.abort(),[2]})})},6e4),[2,NT({appId:r,apiKey:i,measurementId:o},s,a,e)]})})}(t)).then(function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&ET.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return ET.error(t)}),e.push(s),a=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t;return Object(tc.__generator)(this,function(e){switch(e.label){case 0:return Object(Yi.isIndexedDBAvailable)()?[3,1]:(ET.warn(kT.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(Yi.validateIndexedDBOpenable)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),ET.warn(kT.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?r.getId():void 0}),[4,Promise.all([s,a])];case 1:return u=d.sent(),c=u[0],l=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(wT))return r}return null}()||function(t,e){var n=document.createElement("script");n.src=wT+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=l&&(h.firebase_id=l),i(IT.CONFIG,c.measurementId,h),[2,c.measurementId]}})})}(t,LT,FT,e,PT,UT),{app:t,logEvent:function(t,e,n){(function(t,e,n,r,i){return Object(tc.__awaiter)(this,void 0,void 0,function(){var o,s;return Object(tc.__generator)(this,function(a){switch(a.label){case 0:return i&&i.global?(t(IT.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=Object(tc.__assign)(Object(tc.__assign)({},r),{send_to:o}),t(IT.EVENT,n,s),a.label=3;case 3:return[2]}})})})(RT,MT[i],t,e,n).catch(function(t){return ET.error(t)})},setCurrentScreen:function(t,e){(function(t,e,n,r){return Object(tc.__awaiter)(this,void 0,void 0,function(){var i;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(IT.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(IT.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}})})})(RT,MT[i],t,e).catch(function(t){return ET.error(t)})},setUserId:function(t,e){(function(t,e,n,r){return Object(tc.__awaiter)(this,void 0,void 0,function(){var i;return Object(tc.__generator)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(IT.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(IT.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}})})})(RT,MT[i],t,e).catch(function(t){return ET.error(t)})},setUserProperties:function(t,e){(function(t,e,n,r){return Object(tc.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(tc.__generator)(this,function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)i["user_properties."+(a=s[o])]=n[a];return t(IT.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(IT.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}})})})(RT,MT[i],t,e).catch(function(t){return ET.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}})})})(MT[i],t).catch(function(t){return ET.error(t)})},INTERNAL:{delete:function(){return delete MT[i],Promise.resolve()}}}}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:BT,EventName:TT,isSupported:zT})),t.INTERNAL.registerComponent(new yb.Component("analytics-internal",function(t){try{return{logEvent:t.getProvider(HT).getImmediate().logEvent}}catch(pb){throw kT.create("interop-component-reg-failed",{reason:pb})}},"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.10")}(Qi.default);var KT,WT=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(tc.__generator)(this,function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}})})},t}(),GT=((KT={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",KT["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",KT["registration-api-key"]="Undefined API key. Check Firebase app initialization.",KT["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",KT["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",KT["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",KT["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",KT["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",KT["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",KT["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',KT["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',KT["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",KT["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",KT),$T=new Yi.ErrorFactory("remoteconfig","Remote Config",GT),QT=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,l,h,f,d,p,g,v;return Object(tc.__generator)(this,function(m){switch(m.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=m.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:(void 0===y&&(y=navigator),y.languages&&y.languages[0]||y.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},body:JSON.stringify(i)},s=fetch(r,o),a=new Promise(function(e,n){t.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)})}),m.label=2;case 2:return m.trys.push([2,5,,6]),[4,Promise.race([s,a])];case 3:return m.sent(),[4,s];case 4:return u=m.sent(),[3,6];case 5:throw c=m.sent(),l="fetch-client-network","AbortError"===c.name&&(l="fetch-timeout"),$T.create(l,{originalErrorMessage:c.message});case 6:if(h=u.status,f=u.headers.get("ETag")||void 0,200!==u.status)return[3,11];g=void 0,m.label=7;case 7:return m.trys.push([7,9,,10]),[4,u.json()];case 8:return g=m.sent(),[3,10];case 9:throw v=m.sent(),$T.create("fetch-client-parse",{originalErrorMessage:v.message});case 10:d=g.entries,p=g.state,m.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(d={}),304!==h&&200!==h)throw $T.create("fetch-status",{httpStatus:h});return[2,{status:h,eTag:f,config:d}]}var y})})},t}(),YT=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),XT=["1","true","t","yes","y","on"],JT=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&XT.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),ZT=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Xi.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=Xi.LogLevel.SILENT;break;default:this._logger.logLevel=Xi.LogLevel.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t,e,n;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}})})},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},t.prototype.fetch=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:t=new YT,setTimeout(function(){return Object(tc.__awaiter)(r,void 0,void 0,function(){return Object(tc.__generator)(this,function(e){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof Yi.FirebaseError&&-1!==t.code.indexOf("fetch-throttle")}(e)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}})})},t.prototype.fetchAndActivate=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){return Object(tc.__generator)(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Object(tc.__assign)(Object(tc.__assign)({},t),e))).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new JT("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new JT("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new JT("static"))},t}();function tE(t,e){var n=t.target.error||void 0;return $T.create(e,{originalErrorMessage:n&&n.message})}var eE="app_namespace_store",nE=function(){function t(t,e,n,r){void 0===r&&(r=new Promise(function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(tE(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(eE,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([eE],"readonly").objectStore(eE),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(tE(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(pb){i($T.create("storage-get",{originalErrorMessage:pb&&pb.message}))}})]}})})},t.prototype.set=function(t,e){return Object(tc.__awaiter)(this,void 0,void 0,function(){var n,r=this;return Object(tc.__generator)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(i,o){var s=n.transaction([eE],"readwrite").objectStore(eE),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(tE(t,"storage-set"))},u.onsuccess=function(){i()}}catch(pb){o($T.create("storage-set",{originalErrorMessage:pb&&pb.message}))}})]}})})},t.prototype.delete=function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(tc.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([eE],"readwrite").objectStore(eE),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(tE(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(pb){i($T.create("storage-delete",{originalErrorMessage:pb&&pb.message}))}})]}})})},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),rE=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Object(tc.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i,o;return Object(tc.__generator)(this,function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}})})},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function iE(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r($T.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var oE,sE=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Object(tc.__awaiter)(this,void 0,void 0,function(){var e;return Object(tc.__generator)(this,function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}})})},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Object(tc.__awaiter)(this,void 0,void 0,function(){var e,i,o;return Object(tc.__generator)(this,function(s){switch(s.label){case 0:return[4,iE(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof Yi.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+Object(Yi.calculateBackoffMillis)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}})})},t}(),aE="@firebase/remote-config";(oE=Qi.default).INTERNAL.registerComponent(new yb.Component("remoteConfig",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw $T.create("registration-window");var o=r.options,s=o.projectId,a=o.apiKey,u=o.appId;if(!s)throw $T.create("registration-project-id");if(!a)throw $T.create("registration-api-key");if(!u)throw $T.create("registration-app-id");var c=new nE(u,r.name,n=n||"firebase"),l=new rE(c),h=new Xi.Logger(aE);h.logLevel=Xi.LogLevel.ERROR;var f=new QT(i,oE.SDK_VERSION,n,s,a,u),d=new sE(f,c),p=new WT(d,c,l,h),g=new ZT(r,p,l,c,h);return g.ensureInitialized(),g},"PUBLIC").setMultipleInstances(!0)),oE.registerVersion(aE,"0.1.37"),n("X8/r"),Qi.default.registerVersion("firebase","8.6.3","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),Qi.default.registerVersion("firebase","8.6.3");var uE=n("D0XW");function cE(){return t=>t.lift(new lE)}class lE{call(t,e){return e.subscribe(new hE(t))}}class hE extends ee.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class fE{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new dE(t,this.compare,this.keySelector))}}class dE extends ee.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var pE=n("pxpQ"),gE=n("spgP"),vE=n("Jgta"),mE=n("VRyK"),yE=n("qgXg"),bE=n("Ylt2");class _E extends Yt.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new wE(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Xt.a;if(this.isStopped||this.hasError?o=Je.a.EMPTY:(this.observers.push(t),o=new bE.a(this,t)),r&&t.add(t=new pE.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||yE.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class wE{constructor(t,e){this.time=t,this.value=e}}function IE(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new _E(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function TE(t,e){return e?be(()=>t,e):be(()=>t)}var EE=n("tf+s");const OE=new r.r("angularfire2.auth.use-emulator"),CE=new r.r("angularfire2.auth.settings"),SE=new r.r("angularfire2.auth.tenant-id"),kE=new r.r("angularfire2.auth.langugage-code"),AE=new r.r("angularfire2.auth.use-device-language"),xE=new r.r("angularfire.auth.persistence");let NE=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new gE.d(i),f=Object(gE.h)(h),d=new Yt.a,p=Object(Qt.a)(void 0).pipe(Object(pE.b)(h.outsideAngular),be(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(me.a)(()=>Object(gE.g)(t,i,e)),Object(me.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(gE.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),IE({bufferSize:1,refCount:!1}));if(pt(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Qt.a)(null);else{p.pipe(Qe()).subscribe();const t=p.pipe(be(t=>t.getRedirectResult().then(t=>t,()=>null)),f,IE({bufferSize:1,refCount:!1})),e=t=>new oe.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(be(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(be(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(TE(n),Object(EE.a)(h.outsideAngular),Object(pE.b)(h.insideAngular)),this.user=t.pipe(TE(r),Object(EE.a)(h.outsideAngular),Object(pE.b)(h.insideAngular)),this.idToken=this.user.pipe(be(t=>t?Object($t.a)(t.getIdToken()):Object(Qt.a)(null))),this.idTokenResult=this.user.pipe(be(t=>t?Object($t.a)(t.getIdTokenResult()):Object(Qt.a)(null))),this.credential=Object(mE.a)(t,d,this.authState.pipe(xe(t=>!t))).pipe(Object(me.a)(t=>(null==t?void 0:t.user)?t:null),Object(EE.a)(h.outsideAngular),Object(pE.b)(h.insideAngular))}return Object(gE.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(gE.c),r.Ub(gE.b,8),r.Ub(r.C),r.Ub(r.A),r.Ub(OE,8),r.Ub(CE,8),r.Ub(SE,8),r.Ub(kE,8),r.Ub(AE,8),r.Ub(xE,8))},t.\u0275prov=r.Hb({factory:function(){return new t(r.Ub(gE.c),r.Ub(gE.b,8),r.Ub(r.C),r.Ub(r.A),r.Ub(OE,8),r.Ub(CE,8),r.Ub(SE,8),r.Ub(kE,8),r.Ub(AE,8),r.Ub(xE,8))},token:t,providedIn:"any"}),t})();Object(gE.e)(NE,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);let jE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:[NE]}),t})();function PE(t,e){return function(t,e=uE.a){return new oe.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function RE(t,e){return PE(t,e).pipe(Object(me.a)(t=>({payload:t,type:"query"})))}function DE(t,e){return RE(t,e).pipe(Ce(void 0),cE(),Object(me.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function ME(t,e,n){return DE(t,n).pipe(Se((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return LE(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return LE(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return LE(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new fE(void 0,void 0)),Object(me.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function LE(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function FE(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class UE{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=DE(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(me.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Ce(void 0),cE(),xe(([t,e])=>e.length>0||!t),Object(me.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Se((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=FE(t);return ME(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return RE(this.query,this.afs.schedulers.outsideAngular).pipe(Object(me.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object($t.a)(this.query.get(t)).pipe(Object(pE.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new VE(this.ref.doc(t),this.afs)}}class VE{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=WE(n,e);return new UE(r,i,this.afs)}snapshotChanges(){return PE(this.ref,this.afs.schedulers.outsideAngular).pipe(Ce(void 0),cE(),Object(me.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(me.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object($t.a)(this.ref.get(t)).pipe(Object(pE.b)(this.afs.schedulers.insideAngular))}}class qE{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?DE(this.query,this.afs.schedulers.outsideAngular).pipe(Object(me.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),xe(t=>t.length>0),this.afs.keepUnstableUntilFirst):DE(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Se((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=FE(t);return ME(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return RE(this.query,this.afs.schedulers.outsideAngular).pipe(Object(me.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object($t.a)(this.query.get(t)).pipe(Object(pE.b)(this.afs.schedulers.insideAngular))}}const BE=new r.r("angularfire2.enableFirestorePersistence"),HE=new r.r("angularfire2.firestore.persistenceSettings"),zE=new r.r("angularfire2.firestore.settings"),KE=new r.r("angularfire2.firestore.use-emulator");function WE(t,e=(t=>t)){return{query:e(t),ref:t}}let GE=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new gE.d(o),this.keepUnstableUntilFirst=Object(gE.h)(this.schedulers);const c=Object(gE.g)(t,o,e);!vE.a.auth&&u&&Object(gE.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(gE.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!pt(i)){const e=()=>{try{return Object($t.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(pb){return"undefined"!=typeof console&&console.warn(pb),Object(Qt.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Qt.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=WE(n,e),o=this.schedulers.ngZone.run(()=>r);return new UE(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new qE(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new VE(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(gE.c),r.Ub(gE.b,8),r.Ub(BE,8),r.Ub(zE,8),r.Ub(r.C),r.Ub(r.A),r.Ub(HE,8),r.Ub(KE,8),r.Ub(OE,8))},t.\u0275prov=r.Hb({factory:function(){return new t(r.Ub(gE.c),r.Ub(gE.b,8),r.Ub(BE,8),r.Ub(zE,8),r.Ub(r.C),r.Ub(r.A),r.Ub(HE,8),r.Ub(KE,8),r.Ub(OE,8))},token:t,providedIn:"any"}),t})(),$E=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:BE,useValue:!0},{provide:HE,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:[GE]}),t})();var QE=Qi.default.firestore;let YE=(()=>{class t{constructor(t){this.afs=t}removePostById(t){return this.afs.doc(`posts/${t}`).delete()}getBlog(){return this.afs.collection("posts").valueChanges({idField:"id"})}savePost(t){return this.afs.collection("posts").add(t)}getPost(t){return this.afs.doc(`posts/${t}`).valueChanges({idField:"id"})}getComments(t){return this.afs.doc(`comments/${t}`).valueChanges()}createCommentDocs(t){return this.afs.doc(`comments/${t}`).set({comments:[]})}saveComment(t,e){return this.afs.doc(`comments/${t}`).update({comments:QE.FieldValue.arrayUnion(e)})}deleteComment(t,e){return this.afs.doc(`comments/${t}`).update({comments:QE.FieldValue.arrayRemove(e)})}togglePostScore(t,e){const n=this.afs.doc(`posts/${t}`).update({score:QE.FieldValue.increment(1)}),r=this.afs.doc(`users/${e}`).update({voted:QE.FieldValue.arrayUnion(t)});return Promise.all([n,r])}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(GE))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),XE=(()=>{class t{constructor(t,e){this.afAuth=t,this.afs=e,this.user=this.afAuth.authState.pipe(be(t=>t?this.afs.doc(`users/${t.uid}`).valueChanges():Object(Qt.a)(null)))}createUserDoc(t){return this.afs.doc(`users/${t.uid}`).set({displayName:t.displayName,email:t.email,photoURL:t.photoURL,uid:t.uid,voted:[]})}signInWithGoogle(){const t=new Qi.default.auth.GoogleAuthProvider;return this.afAuth.signInWithPopup(t)}logOut(){return this.afAuth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(NE),r.Ub(GE))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function JE(t,e){if(1&t&&(r.Qb(0,"li"),r.Qb(1,"h4"),r.jc(2),r.Pb(),r.Qb(3,"p"),r.jc(4),r.Pb(),r.Qb(5,"button",1),r.jc(6,"Read More"),r.Pb(),r.Pb()),2&t){const t=e.$implicit;r.Bb(2),r.kc(t.title),r.Bb(2),r.lc("",t.body.slice(0,130),"..."),r.Bb(1),r.dc("routerLink","/post/",t.id,"")}}let ZE=(()=>{class t{constructor(t,e){this.coreService=t,this.authS=e}ngOnInit(){this.userSub=this.authS.user.subscribe(t=>{this.user=t}),this.getBlog()}ngOnDestroy(){this.userSub&&this.userSub.unsubscribe(),this.blogSub&&this.blogSub.unsubscribe()}getBlog(){this.blogSub=this.coreService.getBlog().subscribe(t=>{this.blog=t.sort((t,e)=>t.createdAt>e.createdAt?1:-1)})}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(YE),r.Lb(XE))},t.\u0275cmp=r.Fb({type:t,selectors:[["ab-blog-page"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(t,e){1&t&&(r.Qb(0,"ul"),r.ic(1,JE,7,3,"li",0),r.Pb()),2&t&&(r.Bb(1),r.cc("ngForOf",e.blog))},directives:[at,ki],styles:["ul[_ngcontent-%COMP%]{padding:0;display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1.2rem}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.6rem;list-style:none;box-shadow:0 0 5px 0 #0000;transition:box-shadow .3s}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px #0000004d}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;outline:none;padding:.2rem .6rem;font-size:1rem;background:#039be5;cursor:pointer;border-radius:4px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#086ba5}"]}),t})();var tO=n("XoHu");function eO(t,e){return new oe.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object($t.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const nO=new r.r("NgValueAccessor"),rO={provide:nO,useExisting:Object(r.U)(()=>oO),multi:!0},iO=new r.r("CompositionEventMode");let oO=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.E),r.Lb(r.l),r.Lb(iO,8))},t.\u0275dir=r.Gb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Xb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.Ab([rO])]}),t})();function sO(t){return null==t||0===t.length}function aO(t){return null!=t&&"number"==typeof t.length}const uO=new r.r("NgValidators"),cO=new r.r("NgAsyncValidators"),lO=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class hO{static min(t){return function(t){return e=>{if(sO(e.value)||sO(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(t)}static max(t){return function(t){return e=>{if(sO(e.value)||sO(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(t)}static required(t){return function(t){return sO(t.value)?{required:!0}:null}(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return sO(t.value)||lO.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>sO(e.value)||!aO(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return fO(t)}static pattern(t){return function(t){if(!t)return dO;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(sO(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return bO(t)}static composeAsync(t){return wO(t)}}function fO(t){return e=>aO(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function dO(t){return null}function pO(t){return null!=t}function gO(t){const e=Object(r.sb)(t)?Object($t.a)(t):t;return Object(r.rb)(e),e}function vO(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function mO(t,e){return e.map(e=>e(t))}function yO(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function bO(t){if(!t)return null;const e=t.filter(pO);return 0==e.length?null:function(t){return vO(mO(t,e))}}function _O(t){return null!=t?bO(yO(t)):null}function wO(t){if(!t)return null;const e=t.filter(pO);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(te.a)(e))return eO(e,null);if(Object(tO.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return eO(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return eO(t=1===t.length&&Object(te.a)(t[0])?t[0]:t,null).pipe(Object(me.a)(t=>e(...t)))}return eO(t,null)}(mO(t,e).map(gO)).pipe(Object(me.a)(vO))}}function IO(t){return null!=t?wO(yO(t)):null}function TO(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function EO(t){return t._rawValidators}function OO(t){return t._rawAsyncValidators}let CO=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=_O(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=IO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Gb({type:t}),t})(),SO=(()=>{class t extends CO{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return kO(e||t)},t.\u0275dir=r.Gb({type:t,features:[r.yb]}),t})();const kO=r.Sb(SO);class AO extends CO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xO{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let NO=(()=>{class t extends xO{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(AO,2))},t.\u0275dir=r.Gb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Db("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.yb]}),t})(),jO=(()=>{class t extends xO{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(SO,10))},t.\u0275dir=r.Gb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Db("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.yb]}),t})();function PO(t,e){MO(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&FO(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&FO(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function RO(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),LO(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function DO(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function MO(t,e,n){const r=EO(t);null!==e.validator?t.setValidators(TO(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=OO(t);if(null!==e.asyncValidator?t.setAsyncValidators(TO(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();DO(e._rawValidators,n),DO(e._rawAsyncValidators,n)}}function LO(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=EO(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=OO(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};DO(e._rawValidators,t),DO(e._rawAsyncValidators,t)}return r}function FO(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function UO(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const VO="VALID",qO="INVALID",BO="PENDING",HO="DISABLED";function zO(t){return($O(t)?t.validators:t)||null}function KO(t){return Array.isArray(t)?_O(t):t||null}function WO(t,e){return($O(e)?e.asyncValidators:t)||null}function GO(t){return Array.isArray(t)?IO(t):t||null}function $O(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class QO{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=KO(this._rawValidators),this._composedAsyncValidatorFn=GO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===VO}get invalid(){return this.status===qO}get pending(){return this.status==BO}get disabled(){return this.status===HO}get enabled(){return this.status!==HO}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=KO(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=GO(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=BO,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=HO,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=VO,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==VO&&this.status!==BO||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?HO:VO}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=BO,this._hasOwnPendingAsyncValidator=!0;const e=gO(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof XO?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof JO&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?HO:this.errors?qO:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(BO)?BO:this._anyControlsHaveStatus(qO)?qO:VO}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){$O(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class YO extends QO{constructor(t=null,e,n){super(zO(e),WO(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){UO(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){UO(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class XO extends QO{constructor(t,e,n){super(zO(e),WO(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof YO?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class JO extends QO{constructor(t,e,n){super(zO(e),WO(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof YO?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let ZO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Gb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),tC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({}),t})();const eC=new r.r("NgModelWithFormControlWarning"),nC={provide:AO,useExisting:Object(r.U)(()=>rC)};let rC=(()=>{class t extends AO{constructor(t,e,n,i){super(),this._ngModelWarningConfig=i,this.update=new r.n,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(e),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===oO?n=t:Object.getPrototypeOf(t.constructor)===class{}?r=t:i=t}),i||r||n||null}(0,n)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const e=t.form.previousValue;e&&RO(e,this,!1),PO(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}(function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)})(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&RO(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(uO,10),r.Lb(cO,10),r.Lb(nO,10),r.Lb(eC,8))},t.\u0275dir=r.Gb({type:t,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[r.Ab([nC]),r.yb,r.zb]}),t._ngModelWarningSentOnce=!1,t})();const iC={provide:SO,useExisting:Object(r.U)(()=>oC)};let oC=(()=>{class t extends SO{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.n,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(LO(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return PO(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){RO(t.control||null,t,!1),UO(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(RO(e||null,t),n instanceof YO&&(PO(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);(function(t,e){MO(t,e,!1)})(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return LO(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){MO(this.form,this,!1),this._oldForm&&LO(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(uO,10),r.Lb(cO,10))},t.\u0275dir=r.Gb({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Xb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.Ab([iC]),r.yb,r.zb]}),t})();const sC={provide:uO,useExisting:Object(r.U)(()=>aC),multi:!0};let aC=(()=>{class t{constructor(){this._validator=dO}ngOnChanges(t){"maxlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return null!=this.maxlength?this._validator(t):null}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=fO("number"==typeof this.maxlength?this.maxlength:parseInt(this.maxlength,10))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Gb({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&r.Cb("maxlength",e.maxlength?e.maxlength:null)},inputs:{maxlength:"maxlength"},features:[r.Ab([sC]),r.zb]}),t})(),uC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[[tC]]}),t})(),cC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[uC]}),t})(),lC=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:eC,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[uC]}),t})(),hC=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,o=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,o=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,o=null!=e.asyncValidator?e.asyncValidator:null)),new XO(n,{asyncValidators:o,updateOn:r,validators:i})}control(t,e,n){return new YO(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new JO(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof YO||t instanceof XO||t instanceof JO?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Hb)({factory:function(){return new t},token:t,providedIn:lC}),t})();function fC(t,e){if(1&t&&(r.Ob(0),r.Qb(1,"h4"),r.jc(2),r.Pb(),r.Nb()),2&t){const t=r.Zb();r.Bb(2),r.lc("",t.comments.length," Comments")}}function dC(t,e){if(1&t){const t=r.Rb();r.Qb(0,"form",3),r.Xb("ngSubmit",function(){return r.fc(t),r.Zb().sendComment()}),r.Qb(1,"label",4),r.jc(2,"Please write your option!"),r.Pb(),r.Mb(3,"textarea",5),r.Qb(4,"button",6),r.jc(5,"Submit"),r.Pb(),r.Pb()}if(2&t){const t=r.Zb();r.cc("formGroup",t.commentForm),r.Bb(3),r.cc("formControl",t.content)}}function pC(t,e){if(1&t){const t=r.Rb();r.Qb(0,"button",10),r.Xb("click",function(){r.fc(t);const e=r.Zb().$implicit;return r.Zb().deleteComment(e)}),r.jc(1,"Delete"),r.Pb()}}function gC(t,e){if(1&t&&(r.Qb(0,"div",7),r.Qb(1,"h5"),r.jc(2),r.Pb(),r.Mb(3,"img",8),r.Qb(4,"p"),r.jc(5),r.Pb(),r.Qb(6,"p"),r.jc(7),r.ac(8,"date"),r.Pb(),r.ic(9,pC,2,0,"button",9),r.Pb()),2&t){const t=e.$implicit,n=r.Zb();r.Bb(2),r.kc(t.displayName),r.Bb(1),r.cc("src",t.photoURL,r.gc)("alt",t.displayName),r.Bb(2),r.kc(t.comment),r.Bb(2),r.lc("Create At is =>",r.bc(8,6,t.createdAt),""),r.Bb(2),r.cc("ngIf",(null==n.user?null:n.user.uid)===t.uid)}}let vC=(()=>{class t{constructor(t,e,n){this.formBuilder=t,this.authS=e,this.coreService=n}ngOnInit(){this.buildForm(),this.getUser(),this.getComments()}ngOnDestroy(){this.userSub&&this.userSub.unsubscribe(),this.commentsSub&&this.commentsSub.unsubscribe()}getUser(){this.userSub=this.authS.user.subscribe(t=>{this.user=t})}getComments(){this.commentsSub=this.coreService.getComments(this.postId).subscribe(t=>Object(tc.__awaiter)(this,void 0,void 0,function*(){void 0===t?yield this.coreService.createCommentDocs(this.postId):this.comments=t.comments,this.comments=t.comments}))}buildForm(){this.commentForm=this.formBuilder.group({content:["",[hO.required,hO.maxLength(200),hO.minLength(5)]]})}get content(){return this.commentForm.get("content")}sendComment(){return Object(tc.__awaiter)(this,void 0,void 0,function*(){if(!this.commentForm.valid)return alert("Not valid!");const t={uid:this.user.uid,comment:this.content.value,createdAt:Date.now(),displayName:this.user.displayName,photoURL:this.user.photoURL};yield this.coreService.saveComment(this.postId,t),this.commentForm.reset()})}deleteComment(t){return Object(tc.__awaiter)(this,void 0,void 0,function*(){if(console.log(this.user.uid),console.log(t.uid),this.user.uid!==t.uid)return alert("Not commenter");yield this.coreService.deleteComment(this.postId,t),alert("success delete")})}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(hC),r.Lb(XE),r.Lb(YE))},t.\u0275cmp=r.Fb({type:t,selectors:[["ab-comments"]],inputs:{postId:"postId"},decls:3,vars:3,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","comment",4,"ngFor","ngForOf"],[3,"formGroup","ngSubmit"],["for","comment"],["name","comment","id","comment","cols","30","rows","10",3,"formControl"],["type","submit"],[1,"comment"],[3,"src","alt"],[3,"click",4,"ngIf"],[3,"click"]],template:function(t,e){1&t&&(r.ic(0,fC,3,1,"ng-container",0),r.ic(1,dC,6,2,"form",1),r.ic(2,gC,10,8,"div",2)),2&t&&(r.cc("ngIf",e.comments),r.Bb(1),r.cc("ngIf",e.user),r.Bb(1),r.cc("ngForOf",e.comments))},directives:[ct,at,ZO,jO,oC,oO,NO,rC],pipes:[ft],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),t})();function mC(t,e){if(1&t){const t=r.Rb();r.Ob(0),r.Mb(1,"h2",4),r.Qb(2,"h3"),r.jc(3),r.Pb(),r.Qb(4,"button",3),r.Xb("click",function(){return r.fc(t),r.Zb().toggleVote()}),r.jc(5,"Vote"),r.Pb(),r.Mb(6,"p",4),r.Nb()}if(2&t){const t=r.Zb();r.Bb(1),r.cc("innerText",t.post.title),r.Bb(2),r.lc("Score is =>",t.post.score,""),r.Bb(3),r.cc("innerText",t.post.body)}}let yC=(()=>{class t{constructor(t,e,n,r){this.coreService=t,this.activatedRoute=e,this.router=n,this.authService=r,this.postId=this.activatedRoute.snapshot.paramMap.get("postID")}ngOnInit(){this.getPost(),this.getUser()}getUser(){this.userSub=this.authService.user.subscribe(t=>{this.user=t})}ngOnDestroy(){this.postSub&&this.postSub.unsubscribe()}getPost(){this.postSub=this.coreService.getPost(this.postId).subscribe(t=>{this.post=t})}removeThisPost(){this.coreService.removePostById(this.postId).then(()=>Object(tc.__awaiter)(this,void 0,void 0,function*(){alert("Delete Successfully!"),yield this.router.navigateByUrl("/")}))}toggleVote(){this.coreService.togglePostScore(this.postId,this.user.uid).then(()=>{alert("Voted Successfully")})}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(YE),r.Lb(ar),r.Lb(Si),r.Lb(XE))},t.\u0275cmp=r.Fb({type:t,selectors:[["ab-post-page"]],decls:6,vars:2,consts:[["routerLink","/"],[4,"ngIf"],[3,"postId"],[3,"click"],[3,"innerText"]],template:function(t,e){1&t&&(r.Qb(0,"button",0),r.jc(1,"Go Back"),r.Pb(),r.ic(2,mC,7,3,"ng-container",1),r.Mb(3,"ab-comments",2),r.Qb(4,"button",3),r.Xb("click",function(){return e.removeThisPost()}),r.jc(5,"Remove"),r.Pb()),2&t&&(r.Bb(2),r.cc("ngIf",e.post),r.Bb(1),r.cc("postId",e.postId))},directives:[ki,ct,vC],styles:[""]}),t})();function bC(t,e){1&t&&(r.Qb(0,"span"),r.jc(1,"Title is => required"),r.Pb())}function _C(t,e){1&t&&(r.Qb(0,"span"),r.jc(1,"Body is => required"),r.Pb())}function wC(t,e){if(1&t){const t=r.Rb();r.Qb(0,"form",1),r.Xb("ngSubmit",function(){return r.fc(t),r.Zb().saveNewPost()}),r.Qb(1,"div"),r.Qb(2,"label",2),r.jc(3,"Post Title:"),r.Pb(),r.Mb(4,"input",3),r.ic(5,bC,2,0,"span",4),r.Pb(),r.Qb(6,"div"),r.Qb(7,"label",5),r.jc(8,"Post Body:"),r.Pb(),r.Mb(9,"textarea",6),r.Qb(10,"span"),r.jc(11),r.Pb(),r.ic(12,_C,2,0,"span",4),r.Pb(),r.Qb(13,"button",7),r.jc(14,"Save New Post"),r.Pb(),r.Pb()}if(2&t){const t=r.Zb();r.cc("formGroup",t.addPostForm),r.Bb(4),r.cc("formControl",t.getTitle),r.Bb(1),r.cc("ngIf",t.getTitle.invalid&&t.getTitle.dirty&&t.getTitle.touched),r.Bb(4),r.cc("formControl",t.getBody),r.Bb(2),r.lc("Max is =>",null==t.getBody.value?null:t.getBody.value.length,"/500"),r.Bb(1),r.cc("ngIf",(null==t.getBody.errors?null:t.getBody.errors.required)&&t.getBody.touched&&t.getBody.dirty)}}let IC=(()=>{class t{constructor(t,e,n){this.formBuilder=t,this.coreService=e,this.authService=n}ngOnInit(){this.buildForm(),this.getUser()}getUser(){this.userSub=this.authService.user.subscribe(t=>{this.user=t})}buildForm(){this.addPostForm=this.formBuilder.group({title:["",[hO.required]],body:["",[hO.required,hO.maxLength(500)]]})}saveNewPost(){if(this.addPostForm.invalid)return alert("Invalid form");this.coreService.savePost({userId:this.user.uid,title:this.getTitle.value,body:this.getBody.value,comments:[],score:0,createdAt:Date.now()}).then(()=>{this.addPostForm.reset(),alert("Successfully Saved")})}get getTitle(){return this.addPostForm.get("title")}get getBody(){return this.addPostForm.get("body")}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(hC),r.Lb(YE),r.Lb(XE))},t.\u0275cmp=r.Fb({type:t,selectors:[["ab-add-page"]],decls:1,vars:1,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["for","title"],["autocomplete","off","id","title","type","text",3,"formControl"],[4,"ngIf"],["for","body"],["maxlength","500","name","body","id","body","cols","30","rows","10",3,"formControl"],["type","submit"]],template:function(t,e){1&t&&r.ic(0,wC,15,6,"form",0),2&t&&r.cc("ngIf",e.user)},directives:[ct,ZO,jO,oC,oO,NO,rC,aC],styles:["div[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{display:flex;flex-direction:column}div[_ngcontent-%COMP%]{margin:0 0 20px}button[_ngcontent-%COMP%]{border:0;outline:none;background:#039be5;color:#000;padding:20px;border-radius:8px;cursor:pointer}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:18px}label[_ngcontent-%COMP%]{font-size:23px;font-weight:700}"]}),t})();var TC=n("mCNh");const EC=Object(me.a)(t=>!!t);let OC=(()=>{class t{constructor(t,e){this.router=t,this.auth=e,this.canActivate=(t,e)=>{const n=t.data.authGuardPipe||(()=>EC);return this.auth.user.pipe(Te(1),n(t,e),Object(me.a)(t=>"boolean"==typeof t?t:Array.isArray(t)?this.router.createUrlTree(t):this.router.parseUrl(t)))}}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(Si),r.Ub(NE))},t.\u0275prov=r.Hb({factory:function(){return new t(r.Ub(Si),r.Ub(NE))},token:t,providedIn:"any"}),t})();Object(me.a)(t=>!!t&&!t.isAnonymous);const CC=be(t=>t?t.getIdTokenResult():Object(Qt.a)(null));Object(me.a)(t=>!!t&&t.emailVerified),Object(TC.a)(CC,Object(me.a)(t=>t?t.claims:[]));const SC=[{path:"",component:ZE,pathMatch:"full"},{path:"post/:postID",component:yC},{path:"add",component:IC,canActivate:[OC],data:{authGuardPipe:()=>{return t=["/"],Object(TC.a)(EC,Object(me.a)(e=>e||t));var t}}}];let kC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[[Vi.forRoot(SC)],Vi]}),t})();function AC(t,e){1&t&&(r.Qb(0,"button",3),r.jc(1,"Add New"),r.Pb())}function xC(t,e){if(1&t){const t=r.Rb();r.Qb(0,"button",4),r.Xb("click",function(){return r.fc(t),r.Zb().register()}),r.jc(1,"Log in to view content "),r.Pb()}}function NC(t,e){if(1&t){const t=r.Rb();r.Qb(0,"button",4),r.Xb("click",function(){return r.fc(t),r.Zb().logOut()}),r.jc(1,"Log Out "),r.Pb()}}let jC=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){this.getUser()}getUser(t){this.userSub&&this.userSub.unsubscribe(),this.userSub=this.authService.user.subscribe(e=>Object(tc.__awaiter)(this,void 0,void 0,function*(){void 0===e?yield this.authService.createUserDoc(t):this.userApp=e}))}register(){this.authService.signInWithGoogle().then(t=>{this.getUser(t.user)})}logOut(){return this.authService.logOut()}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(XE))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-root"]],decls:7,vars:3,consts:[[1,"container"],["routerLink","/add",4,"ngIf"],[3,"click",4,"ngIf"],["routerLink","/add"],[3,"click"]],template:function(t,e){1&t&&(r.Qb(0,"div",0),r.Qb(1,"h1"),r.jc(2,"The Angular-Blog"),r.Pb(),r.ic(3,AC,2,0,"button",1),r.ic(4,xC,2,0,"button",2),r.ic(5,NC,2,0,"button",2),r.Mb(6,"router-outlet"),r.Pb()),2&t&&(r.Bb(3),r.cc("ngIf",e.userApp),r.Bb(1),r.cc("ngIf",!e.userApp),r.Bb(1),r.cc("ngIf",e.userApp))},directives:[ct,xi,ki],styles:[".container[_ngcontent-%COMP%]{max-width:1024px;margin:0 auto}button[_ngcontent-%COMP%]{margin:0 0 20px}"]}),t})();const PC={apiKey:"AIzaSyArCsvEa26c42ZvCU3XpRtBBspVHfUL04c",authDomain:"angular-blog-062021.firebaseapp.com",projectId:"angular-blog-062021",storageBucket:"angular-blog-062021.appspot.com",messagingSenderId:"1072859711263",appId:"1:1072859711263:web:c627901c0c105ed1d1522a",measurementId:"G-63ZPHTGS52"};class RC{}class DC{}class MC{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof MC?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new MC;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof MC?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class LC{encodeKey(t){return FC(t)}encodeValue(t){return FC(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function FC(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class UC{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new LC,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new UC({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function VC(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function qC(t){return"undefined"!=typeof Blob&&t instanceof Blob}function BC(t){return"undefined"!=typeof FormData&&t instanceof FormData}class HC{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new MC),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new UC,this.urlWithParams=e}serializeBody(){return null===this.body?null:VC(this.body)||qC(this.body)||BC(this.body)||"string"==typeof this.body?this.body:this.body instanceof UC?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||BC(this.body)?null:qC(this.body)?this.body.type||null:VC(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof UC?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new HC(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var zC=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class KC{constructor(t,e=200,n="OK"){this.headers=t.headers||new MC,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class WC extends KC{constructor(t={}){super(t),this.type=zC.ResponseHeader}clone(t={}){return new WC({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class GC extends KC{constructor(t={}){super(t),this.type=zC.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new GC({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class $C extends KC{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function QC(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let YC=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof HC)r=t;else{let i,o;i=n.headers instanceof MC?n.headers:new MC(n.headers),n.params&&(o=n.params instanceof UC?n.params:new UC({fromObject:n.params})),r=new HC(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(Qt.a)(r).pipe(Le(t=>this.handler.handle(t)));if(t instanceof HC||"events"===n.observe)return i;const o=i.pipe(xe(t=>t instanceof GC));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(me.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(me.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(me.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(me.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new UC).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,QC(n,e))}post(t,e,n={}){return this.request("POST",t,QC(n,e))}put(t,e,n={}){return this.request("PUT",t,QC(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(RC))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();class XC{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const JC=new r.r("HTTP_INTERCEPTORS");let ZC=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const tS=/^\)\]\}',?\n/;class eS{}let nS=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),rS=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new oe.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new MC(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new WC({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(tS,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new GC({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new $C({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new $C({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:zC.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:zC.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:zC.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(eS))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const iS=new r.r("XSRF_COOKIE_NAME"),oS=new r.r("XSRF_HEADER_NAME");class sS{}let aS=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ot(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(s),r.Ub(r.C),r.Ub(iS))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),uS=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(sS),r.Ub(oS))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),cS=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(JC,[]);this.chain=t.reduceRight((t,e)=>new XC(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(DC),r.Ub(r.s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),lS=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:uS,useClass:ZC}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:iS,useValue:e.cookieName}:[],e.headerName?{provide:oS,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:[uS,{provide:JC,useExisting:uS,multi:!0},{provide:sS,useClass:aS},{provide:iS,useValue:"XSRF-TOKEN"},{provide:oS,useValue:"X-XSRF-TOKEN"}]}),t})(),hS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:[YC,{provide:RC,useClass:cS},rS,{provide:DC,useExisting:rS},nS,{provide:eS,useExisting:nS}],imports:[[lS.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),fS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t,bootstrap:[jC]}),t.\u0275inj=r.Ib({providers:[],imports:[[Gt,kC,gE.a.initializeApp(PC),cC,lC,jE,$E,hS]]}),t})();Object(r.T)(),Kt().bootstrapModule(fS).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);